var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,c=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&o(e,l,a[l]);if(s)for(var l of s(a))r.call(a,l)&&o(e,l,a[l]);return e};import{d as n,h as i,r as u,s as d,b as p,x as m,A as v,p as f,c as g,m as b,g as h,e as y,f as w,w as _,E as k}from"./vendor.46a65300.js";import{S as V}from"./index.aa4d8cb7.js";import{_ as F}from"./index.3c098132.js";var S=n({name:"PersonalSetting",setup(){const e=i(),s=u("left"),t=u(),r=d({userSwitch:!1,sysSwitch:!0,taskSwitch:!0}),o=d({email:"",nickname:"",desc:"",mobile:""}),n=u(),f=u(!1),g={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],nickname:{required:!0,message:"请输入昵称",trigger:["blur","change"]},desc:{required:!0,message:"请输入个人简介",trigger:["blur","change"]},mobile:{required:!0,validator:(e,a,l)=>{if(""===a)l(new Error("手机号码不可为空哦"));else{/^1[3-9]\d{9}$/.test(a)?l():l(new Error("请输入正确的手机号码"))}},trigger:["blur","change"]}};p((()=>{}));return b=c({handleBack:()=>{e.go(-1)},tabPosition:s,settingFormRef:t,settingForm:o,submitForm:()=>{t.value.validate((async e=>{if(e){try{f.value=!0;const e=c({},o),a=await V.postSetBasicInfo(e);console.log(a),f.value=!1,v.ElMessage({type:"success",message:a.data.message})}catch(a){console.error(a)}return!0}return!1}))},resetForm:()=>{t.value.resetFields()},handleAvatarSuccess:(e,a)=>{n.value=URL.createObjectURL(a.raw)},beforeAvatarUpload:e=>{if(!/(gif|png|jpg|jpeg)$/i.test(e.type))return v.ElMessage({message:"上传头像图片只能是gif|png|jpg|jpeg 格式!",type:"warning"}),!1;const a=e.size/1024/1024<2;return a||v.ElMessage.error("上传头像图片大小不能超过 2MB!"),a},rules:g,imageUrl:n},m(r)),a(b,l({updateLoading:f}));var b}});const j=_();f("data-v-45909019");const U={class:"PersonalSetting"},x={class:"grid-content bg-purple-dark"},O={class:"card-header"},P=w("i",{class:"el-icon-arrow-left"},null,-1),E=k("返回 "),A=w("span",null,"个人设置",-1),q=w("div",null,null,-1),B=w("div",{class:"set-title"},[w("span",null,"基本设置")],-1),C={class:"set-info"},L={class:"form-info"},M=k("更新基本信息"),R=k("重置"),I={class:"avatar"},z=w("div",{class:"preview"},[w("span",null,"头像"),w("img",{src:F})],-1),$=w("i",{class:"el-icon-upload"},null,-1),D=k("更换头像 "),G=w("div",{class:"set-title"},[w("span",null,"安全设置")],-1),H=w("div",{class:"secure-item"},[w("div",{class:"secure-info"},[w("span",{class:"secure-key"},"账户密码"),w("span",{class:"secure-value"},"当前密码强度：强")]),w("div",{class:"opera-btn"},[w("span",null,"修改")])],-1),J=w("div",{class:"secure-item"},[w("div",{class:"secure-info"},[w("span",{class:"secure-key"},"密保手机"),w("span",{class:"secure-value"},"已绑定手机：138****2234")]),w("div",{class:"opera-btn"},[w("span",null,"修改")])],-1),K=w("div",{class:"secure-item"},[w("div",{class:"secure-info"},[w("span",{class:"secure-key"},"绑定邮箱"),w("span",{class:"secure-value"},"已绑定邮箱：geek****@outlook.com")]),w("div",{class:"opera-btn"},[w("span",null,"修改")])],-1),N=w("div",{class:"set-title"},[w("span",null,"新消息通知")],-1),Q={class:"secure-item"},T=w("div",{class:"secure-info"},[w("span",{class:"secure-key"},"账户密码"),w("span",{class:"secure-value"},"用户信息将以系统内部渠道通知")],-1),W={class:"secure-item"},X=w("div",{class:"secure-info"},[w("span",{class:"secure-key"},"系统消息"),w("span",{class:"secure-value"},"系统消息将以系统内部渠道通知")],-1),Y={class:"secure-item"},Z=w("div",{class:"secure-info"},[w("span",{class:"secure-key"},"代办任务"),w("span",{class:"secure-value"},"代办任务将以系统内部渠道通知")],-1);g();const ee=j(((e,a,l,s,t,r)=>{const o=b("el-button"),c=b("el-input"),n=b("el-form-item"),i=b("el-form"),u=b("el-upload"),d=b("el-tab-pane"),p=b("el-switch"),m=b("el-tooltip"),v=b("el-tabs"),f=b("el-card"),g=b("el-col"),_=b("el-row");return h(),y("div",U,[w(_,null,{default:j((()=>[w(g,{offset:1,span:22},{default:j((()=>[w("div",x,[w(f,{class:"box-card"},{header:j((()=>[w("div",O,[w(o,{class:"button",type:"text",onClick:e.handleBack},{default:j((()=>[P,E])),_:1},8,["onClick"]),A,q])])),default:j((()=>[w(v,{"tab-position":e.tabPosition},{default:j((()=>[w(d,{label:"基本设置"},{default:j((()=>[B,w("div",C,[w("div",L,[w(i,{ref:"settingFormRef",model:e.settingForm,rules:e.rules,"label-width":"100px",class:"demo-ruleForm"},{default:j((()=>[w(n,{label:"邮箱",prop:"email"},{default:j((()=>[w(c,{modelValue:e.settingForm.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.settingForm.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),w(n,{label:"昵称",prop:"nickname"},{default:j((()=>[w(c,{modelValue:e.settingForm.nickname,"onUpdate:modelValue":a[2]||(a[2]=a=>e.settingForm.nickname=a),placeholder:"请输入昵称",maxlength:"10"},null,8,["modelValue"])])),_:1}),w(n,{label:"个人简介",prop:"desc"},{default:j((()=>[w(c,{modelValue:e.settingForm.desc,"onUpdate:modelValue":a[3]||(a[3]=a=>e.settingForm.desc=a),type:"textarea",placeholder:"个人简介",maxlength:"120"},null,8,["modelValue"])])),_:1}),w(n,{label:"联系电话",prop:"mobile"},{default:j((()=>[w(c,{modelValue:e.settingForm.mobile,"onUpdate:modelValue":a[4]||(a[4]=a=>e.settingForm.mobile=a),placeholder:"请输入11位大陆手机号码"},null,8,["modelValue"])])),_:1}),w(n,null,{default:j((()=>[w(o,{type:"primary",loading:e.updateLoading,onClick:a[5]||(a[5]=a=>e.submitForm())},{default:j((()=>[M])),_:1},8,["loading"]),w(o,{onClick:a[6]||(a[6]=a=>e.resetForm())},{default:j((()=>[R])),_:1})])),_:1})])),_:1},8,["model","rules"])]),w("div",I,[z,w(u,{class:"avatar-uploader",action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload},{default:j((()=>[w(o,{style:{"margin-left":"10px"},size:"small",type:"success"},{default:j((()=>[$,D])),_:1})])),_:1},8,["on-success","before-upload"])])])])),_:1}),w(d,{label:"安全设置"},{default:j((()=>[G,H,J,K])),_:1}),w(d,{label:"新消息通知"},{default:j((()=>[N,w("div",Q,[T,w(m,{content:"是否开启用户信息: ",placement:"top"},{default:j((()=>[w(p,{modelValue:e.userSwitch,"onUpdate:modelValue":a[7]||(a[7]=a=>e.userSwitch=a),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1})]),w("div",W,[X,w(m,{content:"是否开启系统消息: ",placement:"top"},{default:j((()=>[w(p,{modelValue:e.sysSwitch,"onUpdate:modelValue":a[8]||(a[8]=a=>e.sysSwitch=a),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1})]),w("div",Y,[Z,w(m,{content:"是否开启代办任务消息: ",placement:"top"},{default:j((()=>[w(p,{modelValue:e.taskSwitch,"onUpdate:modelValue":a[9]||(a[9]=a=>e.taskSwitch=a),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1})])])),_:1})])),_:1},8,["tab-position"])])),_:1})])])),_:1})])),_:1})])}));S.render=ee,S.__scopeId="data-v-45909019";export{S as default};
