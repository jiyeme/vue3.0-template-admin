var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;import{d as i,r as a,b as s,aP as u,p as l,c,g as p,e as f,f as h,w as d,Z as m,i as v,t as g,s as y,x as b,m as w,E as k}from"./vendor.aebea105.js";function x(t){this.content=t}x.prototype={constructor:x,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new x(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new x(n)},addToStart:function(t,e){return new x([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new x(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new x(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=x.from(t)).size?new x(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=x.from(t)).size?new x(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=x.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},x.from=function(t){if(t instanceof x)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new x(e)};var C=x;function D(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=D(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function E(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=t.child(--o),s=e.child(--i),u=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var l=0,c=Math.min(a.text.length,s.text.length);l<c&&a.text[a.text.length-l-1]==s.text[s.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var p=E(a.content,s.content,n-1,r-1);if(p)return p}n-=u,r-=u}else n-=u,r-=u}}var T=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},M={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};T.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,a=0;a<e;i++){var s=this.content[i],u=a+s.nodeSize;if(u>t&&!1!==n(s,r+a,o,i)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,t-l),Math.min(s.content.size,e-l),n,r+l)}a=u}},T.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},T.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(a,s){a.isText?(o+=a.text.slice(Math.max(t,s)-s,e-s),i=!n):a.isLeaf&&r?(o+=r,i=!n):!i&&a.isBlock&&(o+=n,i=!0)}),0),o},T.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new T(r,this.size+t.size)},T.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var a=this.content[o],s=i+a.nodeSize;s>t&&((i<t||s>e)&&(a=a.isText?a.cut(Math.max(0,t-i),Math.min(a.text.length,e-i)):a.cut(Math.max(0,t-i-1),Math.min(a.content.size,e-i-1))),n.push(a),r+=a.nodeSize),i=s}return new T(n,r)},T.prototype.cutByIndex=function(t,e){return t==e?T.empty:0==t&&e==this.content.length?this:new T(this.content.slice(t,e))},T.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new T(r,o)},T.prototype.addToStart=function(t){return new T([t].concat(this.content),this.size+t.nodeSize)},T.prototype.addToEnd=function(t){return new T(this.content.concat(t),this.size+t.nodeSize)},T.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},M.firstChild.get=function(){return this.content.length?this.content[0]:null},M.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},M.childCount.get=function(){return this.content.length},T.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},T.prototype.maybeChild=function(t){return this.content[t]},T.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},T.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),D(this,t,e)},T.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),E(this,t,e,n)},T.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return S(0,t);if(t==this.size)return S(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?S(n+1,o):S(n,r);r=o}},T.prototype.toString=function(){return"<"+this.toStringInner()+">"},T.prototype.toStringInner=function(){return this.content.join(", ")},T.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},T.fromJSON=function(t,e){if(!e)return T.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new T(e.map(t.nodeFromJSON))},T.fromArray=function(t){if(!t.length)return T.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new T(e||t,n)},T.from=function(t){if(!t)return T.empty;if(t instanceof T)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new T([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(T.prototype,M);var A={index:0,offset:0};function S(t,e){return A.index=t,A.offset=e,A}function O(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!O(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!O(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}T.empty=new T([],0);var N=function(t,e){this.type=t,this.attrs=e};function L(t){var e=Error.call(this,t);return e.__proto__=L.prototype,e}N.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},N.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},N.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},N.prototype.eq=function(t){return this==t||this.type==t.type&&O(this.attrs,t.attrs)},N.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},N.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},N.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},N.setFrom=function(t){if(!t||0==t.length)return N.none;if(t instanceof N)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},N.none=[],L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L.prototype.name="ReplaceError";var I=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},_={size:{configurable:!0}};function F(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,a=t.maybeChild(o),s=t.findIndex(n),u=s.index,l=s.offset;if(i==e||a.isText){if(l!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(o,a.copy(F(a.content,e-i-1,n-i-1)))}function B(t,e,n,r){var o=t.findIndex(e),i=o.index,a=o.offset,s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var u=B(s.content,e-a-1,n);return u&&t.replaceChild(i,s.copy(u))}function R(t,e,n){if(n.openStart>t.depth)throw new L("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new L("Inconsistent open depths");return P(t,e,n,0)}function P(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var a=P(t,e,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var s=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(T.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return q(i,V(t,s.start,s.end,e,r))}var u=t.parent,l=u.content;return q(u,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}return q(i,U(t,e,r))}function z(t,e){if(!e.type.compatibleContent(t.type))throw new L("Cannot join "+e.type.name+" onto "+t.type.name)}function j(t,e,n){var r=t.node(n);return z(r,e.node(n)),r}function H(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function $(t,e,n,r){var o=(e||t).node(n),i=0,a=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(H(t.nodeAfter,r),i++));for(var s=i;s<a;s++)H(o.child(s),r);e&&e.depth==n&&e.textOffset&&H(e.nodeBefore,r)}function q(t,e){if(!t.type.validContent(e))throw new L("Invalid content for node "+t.type.name);return t.copy(e)}function V(t,e,n,r,o){var i=t.depth>o&&j(t,e,o+1),a=r.depth>o&&j(n,r,o+1),s=[];return $(null,t,o,s),i&&a&&e.index(o)==n.index(o)?(z(i,a),H(q(i,V(t,e,n,r,o+1)),s)):(i&&H(q(i,U(t,e,o+1)),s),$(e,n,o,s),a&&H(q(a,U(n,r,o+1)),s)),$(r,null,o,s),new T(s)}function U(t,e,n){var r=[];($(null,t,n,r),t.depth>n)&&H(q(j(t,e,n+1),U(t,e,n+1)),r);return $(e,null,n,r),new T(r)}_.size.get=function(){return this.content.size-this.openStart-this.openEnd},I.prototype.insertAt=function(t,e){var n=B(this.content,t+this.openStart,e,null);return n&&new I(n,this.openStart,this.openEnd)},I.prototype.removeBetween=function(t,e){return new I(F(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},I.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},I.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},I.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},I.fromJSON=function(t,e){if(!e)return I.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new I(T.fromJSON(t,e.content),n,r)},I.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new I(t,n,r)},Object.defineProperties(I.prototype,_),I.empty=new I(T.empty,0,0);var W=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},J={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};W.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},J.parent.get=function(){return this.node(this.depth)},J.doc.get=function(){return this.node(0)},W.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},W.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},W.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},W.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},W.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},W.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},W.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},J.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},J.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},J.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},W.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},W.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return N.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i},W.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},W.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},W.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new X(this,t,n)},W.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},W.prototype.max=function(t){return t.pos>this.pos?t:this},W.prototype.min=function(t){return t.pos<this.pos?t:this},W.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},W.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var a=i.content.findIndex(o),s=a.index,u=a.offset,l=o-u;if(n.push(i,s,r+u),!l)break;if((i=i.child(s)).isText)break;o=l-1,r+=u+1}return new W(e,n,o)},W.resolveCached=function(t,e){for(var n=0;n<K.length;n++){var r=K[n];if(r.pos==e&&r.doc==t)return r}var o=K[Z]=W.resolve(t,e);return Z=(Z+1)%G,o},Object.defineProperties(W.prototype,J);var K=[],Z=0,G=12,X=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Q={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Q.start.get=function(){return this.$from.before(this.depth+1)},Q.end.get=function(){return this.$to.after(this.depth+1)},Q.parent.get=function(){return this.$from.node(this.depth)},Q.startIndex.get=function(){return this.$from.index(this.depth)},Q.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(X.prototype,Q);var Y=Object.create(null),tt=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||T.empty,this.marks=r||N.none},et={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};et.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},et.childCount.get=function(){return this.content.childCount},tt.prototype.child=function(t){return this.content.child(t)},tt.prototype.maybeChild=function(t){return this.content.maybeChild(t)},tt.prototype.forEach=function(t){this.content.forEach(t)},tt.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},tt.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},et.textContent.get=function(){return this.textBetween(0,this.content.size,"")},tt.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},et.firstChild.get=function(){return this.content.firstChild},et.lastChild.get=function(){return this.content.lastChild},tt.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},tt.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},tt.prototype.hasMarkup=function(t,e,n){return this.type==t&&O(this.attrs,e||t.defaultAttrs||Y)&&N.sameSet(this.marks,n||N.none)},tt.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},tt.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},tt.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},tt.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return I.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new I(s,r.depth-i,o.depth-i)},tt.prototype.replace=function(t,e,n){return R(this.resolve(t),this.resolve(e),n)},tt.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},tt.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},tt.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},tt.prototype.resolve=function(t){return W.resolveCached(this,t)},tt.prototype.resolveNoCache=function(t){return W.resolve(this,t)},tt.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},et.isBlock.get=function(){return this.type.isBlock},et.isTextblock.get=function(){return this.type.isTextblock},et.inlineContent.get=function(){return this.type.inlineContent},et.isInline.get=function(){return this.type.isInline},et.isText.get=function(){return this.type.isText},et.isLeaf.get=function(){return this.type.isLeaf},et.isAtom.get=function(){return this.type.isAtom},tt.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),rt(this.marks,t)},tt.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},tt.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=T.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0},tt.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},tt.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},tt.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=N.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!N.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},tt.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},tt.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=T.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(tt.prototype,et);var nt=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(tt);function rt(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var ot=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},it={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};ot.parse=function(t,e){var n=new at(t,e);if(null==n.next)return ot.empty;var r=ut(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(dt(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),a=i>-1&&o[i+1];dt(t,r).forEach((function(t){a||o.push(n,a=[]),-1==a.indexOf(t)&&a.push(t)}))}}))}));for(var i=e[r.join(",")]=new ot(r.indexOf(t.length-1)>-1),a=0;a<o.length;a+=2){var s=o[a+1].sort(ht);i.next.push(o[a],e[s.join(",")]||n(s))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var a=0;;a++){var s=i(t.exprs[a],e);if(a==t.exprs.length-1)return s;o(s,e=n())}else{if("star"==t.type){var u=n();return r(e,u),o(i(t.expr,u),u),[r(u)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var c=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,c),f),c=f}if(-1==t.max)o(i(t.expr,c),c);else for(var h=t.min;h<t.max;h++){var d=n();r(c,d),o(i(t.expr,c),d),c=d}return[r(c)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s+=2){var u=o.next[s],l=o.next[s+1];a.push(u.name),!i||u.isText||u.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},ot.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},ot.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},it.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},it.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},ot.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},ot.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,a){var s=i.matchFragment(t,n);if(s&&(!e||s.validEnd))return T.from(a.map((function(t){return t.createAndFill()})));for(var u=0;u<i.next.length;u+=2){var l=i.next[u],c=i.next[u+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(c)){r.push(c);var p=o(c,a.concat(l));if(p)return p}}}(this,[])},ot.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},ot.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s+=2){var u=o.next[s];u.isLeaf||u.hasRequiredAttrs()||u.name in e||r.type&&!o.next[s+1].validEnd||(n.push({match:u.contentMatch,type:u,via:r}),e[u.name]=!0)}}},it.edgeCount.get=function(){return this.next.length>>1},ot.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},ot.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(ot.prototype,it),ot.empty=new ot(!0);var at=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},st={next:{configurable:!0}};function ut(t){var e=[];do{e.push(lt(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function lt(t){var e=[];do{e.push(ct(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function ct(t){for(var e=function(t){if(t.eat("(")){var e=ut(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.groups.indexOf(e)>-1&&o.push(a)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=ft(t,e)}return e}function pt(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function ft(t,e){var n=pt(t),r=n;return t.eat(",")&&(r="}"!=t.next?pt(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ht(t,e){return e-t}function dt(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,u=a.to;s||-1!=n.indexOf(u)||e(u)}}(e),n.sort(ht)}function mt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function vt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function gt(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new wt(t[n]);return e}st.next.get=function(){return this.tokens[this.pos]},at.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},at.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(at.prototype,st);var yt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=gt(n.attrs),this.defaultAttrs=mt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},bt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};bt.isInline.get=function(){return!this.isBlock},bt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},bt.isLeaf.get=function(){return this.contentMatch==ot.empty},bt.isAtom.get=function(){return this.isLeaf||this.spec.atom},yt.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},yt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},yt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:vt(this.attrs,t)},yt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new tt(this,this.computeAttrs(t),T.from(e),N.setFrom(n))},yt.prototype.createChecked=function(t,e,n){if(e=T.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new tt(this,this.computeAttrs(t),e,N.setFrom(n))},yt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=T.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(T.empty,!0);return o?new tt(this,t,e.append(o),N.setFrom(n)):null},yt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},yt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},yt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},yt.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:N.empty:t},yt.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new yt(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(yt.prototype,bt);var wt=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},kt={isRequired:{configurable:!0}};kt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(wt.prototype,kt);var xt=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=gt(r.attrs),this.rank=e,this.excluded=null;var o=mt(this.attrs);this.instance=o&&new N(this,o)};xt.prototype.create=function(t){return!t&&this.instance?this.instance:new N(this,vt(this.attrs,t))},xt.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new xt(t,r++,e,o)})),n},xt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},xt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},xt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Ct=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=C.from(t.nodes),this.spec.marks=C.from(t.marks),this.nodes=yt.compile(this.spec.nodes,this),this.marks=xt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[i]||(n[i]=ot.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?Dt(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var s in this.marks){var u=this.marks[s],l=u.spec.excludes;u.excluded=null==l?[u]:""==l?[]:Dt(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Dt(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],a=i;if(i)n.push(i);else for(var s in t.marks){var u=t.marks[s];("_"==o||u.spec.group&&u.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}Ct.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof yt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},Ct.prototype.text=function(t,e){var n=this.nodes.text;return new nt(n,n.defaultAttrs,t,N.setFrom(e))},Ct.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Ct.prototype.nodeFromJSON=function(t){return tt.fromJSON(this,t)},Ct.prototype.markFromJSON=function(t){return N.fromJSON(this,t)},Ct.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Et=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};Et.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Nt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Et.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Nt(this,e,!0);return n.addAll(t,null,e.from,e.to),I.maxOpen(n.finish())},Et.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(It(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},Et.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a}return i}}},Et.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=_t(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var a in t.nodes)i=void 0,(i=t.nodes[a].spec.parseDOM)&&i.forEach((function(t){n(t=_t(t)),t.node=a}));return e},Et.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Et(t,Et.schemaRules(t)))};var Tt={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Mt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},At={ol:!0,ul:!0};function St(t){return(t?1:0)|("full"===t?2:0)}var Ot=function(t,e,n,r,o,i,a){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&a?null:t.contentMatch),this.options=a,this.content=[],this.marks=n,this.activeMarks=N.none,this.pendingMarks=r,this.stashMarks=[]};Ot.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(T.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Ot.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=T.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(T.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Ot.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Ot.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Ft(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},Ot.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Tt.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var Nt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=St(e.preserveWhitespace)|(n?4:0);r=o?new Ot(o.type,o.attrs,N.none,N.none,!0,e.topMatch||o.type.contentMatch,i):new Ot(n?null:t.schema.topNodeType,null,N.none,N.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Lt={top:{configurable:!0},currentPos:{configurable:!0}};function It(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function _t(t){var e={};for(var n in t)e[n]=t[n];return e}function Ft(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],a=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,s=r.next;if(o==e)return!0;if(i.indexOf(s)<0&&a(s))return!0}};return a(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Lt.top.get=function(){return this.nodes[this.open]},Nt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Nt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Nt.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();At.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&At.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:Mt.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,a=this.top,s=this.needsBlock;if(Tt.hasOwnProperty(r))i=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(a),this.needsBlock=s}else this.addElementByRule(t,o,!1===o.consuming?n:null)},Nt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Nt.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},Nt.prototype.readStyles=function(t){var e=N.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},Nt.prototype.addElementByRule=function(t,e,n){var r,o,i,a=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var u=e.contentElement;"string"==typeof u?u=t.querySelector(u):"function"==typeof u&&(u=u(t)),u||(u=t),this.findAround(t,u,!0),this.addAll(u,r)}r&&(this.sync(s),this.open--),i&&this.removePendingMark(i,s)},Nt.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,a=null==r?null:t.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&Tt.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Nt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var a=0;a<e.length;a++)this.enterInner(e[a],null,!1);return!0},Nt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Nt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},Nt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:St(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Ot(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Nt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Nt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Nt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Lt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Nt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Nt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Nt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Nt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Nt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(t,s){for(;t>=0;t--){var u=n[t];if(""==u){if(t==n.length-1||0==t)continue;for(;s>=i;s--)if(a(t-1,s))return!0;return!1}var l=s>0||0==s&&o?e.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!l||l.name!=u&&-1==l.groups.indexOf(u))return!1;s--}return!0};return a(n.length-1,this.open)},Nt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Nt.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},Nt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(Nt.prototype,Lt);var Bt=function(t,e){this.nodes=t||{},this.marks=e||{}};function Rt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Pt(t){return t.document||window.document}Bt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Pt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,a=0;n<i.length&&a<t.marks.length;){var s=t.marks[a];if(r.marks[s.type.name]){if(!s.eq(i[n])||!1===s.type.spec.spanning)break;n+=2,a++}else a++}for(;n<i.length;)o=i.pop(),i.pop();for(;a<t.marks.length;){var u=t.marks[a++],l=r.serializeMark(u,t.isInline,e);l&&(i.push(u,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Bt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Bt.renderSpec(Pt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Bt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Bt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Bt.renderSpec(Pt(n),r(t,e))},Bt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,a=n?t.createElementNS(n,r):t.createElement(r),s=e[1],u=1;if(s&&"object"==typeof s&&null==s.nodeType&&!Array.isArray(s))for(var l in u=2,s)if(null!=s[l]){var c=l.indexOf(" ");c>0?a.setAttributeNS(l.slice(0,c),l.slice(c+1),s[l]):a.setAttribute(l,s[l])}for(var p=u;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var h=Bt.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(a.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:a,contentDOM:i}},Bt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Bt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Bt.nodesFromSchema=function(t){var e=Rt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Bt.marksFromSchema=function(t){return Rt(t.marks)};var zt=Math.pow(2,16);function jt(t){return 65535&t}var Ht=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},$t=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};$t.prototype.recover=function(t){var e=0,n=jt(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/zt}(t)},$t.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},$t.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},$t.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var u=this.ranges[a+o],l=this.ranges[a+i],c=s+u;if(t<=c){var p=s+r+((u?t==s?-1:t==c?1:e:e)<0?0:l);if(n)return p;var f=t==(e<0?s:c)?null:a/3+(t-s)*zt;return new Ht(p,e<0?t!=s:t!=c,f)}r+=l-u}return n?t+r:new Ht(t+r)},$t.prototype.touches=function(t,e){for(var n=0,r=jt(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>t)break;var u=this.ranges[a+o];if(t<=s+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1},$t.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),u=this.ranges[r+e],l=this.ranges[r+n];t(a,a+u,s,s+l),o+=l-u}},$t.prototype.invert=function(){return new $t(this.ranges,!this.inverted)},$t.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},$t.offset=function(t){return 0==t?$t.empty:new $t(t<0?[0,-t,0]:[0,0,t])},$t.empty=new $t([]);var qt=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function Vt(t){var e=Error.call(this,t);return e.__proto__=Vt.prototype,e}qt.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new qt(this.maps,this.mirror,t,e)},qt.prototype.copy=function(){return new qt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},qt.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},qt.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},qt.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},qt.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},qt.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},qt.prototype.invert=function(){var t=new qt;return t.appendMappingInverted(this),t},qt.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},qt.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},qt.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new Ht(t,r)},Vt.prototype=Object.create(Error.prototype),Vt.prototype.constructor=Vt,Vt.prototype.name="TransformError";var Ut=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new qt},Wt={before:{configurable:!0},docChanged:{configurable:!0}};function Jt(){throw new Error("Override me")}Wt.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Ut.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new Vt(e.failed);return this},Ut.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Wt.docChanged.get=function(){return this.steps.length>0},Ut.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(Ut.prototype,Wt);var Kt=Object.create(null),Zt=function(){};Zt.prototype.apply=function(t){return Jt()},Zt.prototype.getMap=function(){return $t.empty},Zt.prototype.invert=function(t){return Jt()},Zt.prototype.map=function(t){return Jt()},Zt.prototype.merge=function(t){return null},Zt.prototype.toJSON=function(){return Jt()},Zt.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Kt[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Zt.jsonID=function(t,e){if(t in Kt)throw new RangeError("Duplicate use of step JSON ID "+t);return Kt[t]=e,e.prototype.jsonID=t,e};var Gt=function(t,e){this.doc=t,this.failed=e};Gt.ok=function(t){return new Gt(t,null)},Gt.fail=function(t){return new Gt(null,t)},Gt.fromReplace=function(t,e,n,r){try{return Gt.ok(t.replace(e,n,r))}catch(o){if(o instanceof L)return Gt.fail(o.message);throw o}};var Xt=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Yt(t,this.from,this.to)?Gt.fail("Structure replace would overwrite content"):Gt.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new $t([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?I.empty:new I(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?I.empty:new I(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,I.fromJSON(t,n.slice),!!n.structure)},e}(Zt);Zt.jsonID("replace",Xt);var Qt=function(t){function e(e,n,r,o,i,a,s){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Yt(t,this.from,this.gapFrom)||Yt(t,this.gapTo,this.to)))return Gt.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Gt.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Gt.fromReplace(t,this.from,this.to,n):Gt.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new $t([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,I.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Zt);function Yt(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function te(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ee(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!te(r,o,i))break}}function ne(t){return{type:t,attrs:null}}function re(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,u=n-2;s>i;s--,u--){var l=o.node(s),c=o.index(s);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(c,l.childCount),f=r&&r[u]||l;if(f!=l&&(p=p.replaceChild(0,f.type.create(f.attrs))),!l.canReplace(c+1,l.childCount)||!f.type.validContent(p))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)}function oe(t,e){var n,r,o=t.resolve(e),i=o.index();return n=o.nodeBefore,r=o.nodeAfter,n&&r&&!n.isLeaf&&n.canAppend(r)&&o.parent.canReplace(i,i+1)}function ie(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(ie(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return T.fromArray(r)}Zt.jsonID("replaceAround",Qt),Ut.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),a=r.after(o+1),s=i,u=a,l=T.empty,c=0,p=o,f=!1;p>e;p--)f||n.index(p)>0?(f=!0,l=T.from(n.node(p).copy(l)),c++):s--;for(var h=T.empty,d=0,m=o,v=!1;m>e;m--)v||r.after(m+1)<r.end(m)?(v=!0,h=T.from(r.node(m).copy(h)),d++):u++;return this.step(new Qt(s,u,i,a,new I(l.append(h),c,d),l.size-c,!0))},Ut.prototype.wrap=function(t,e){for(var n=T.empty,r=e.length-1;r>=0;r--)n=T.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new Qt(o,i,o,i,new I(n,0,0),e.length,!0))},Ut.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var a=o.mapping.slice(i),s=a.map(e,1),u=a.map(e+t.nodeSize,1);return o.step(new Qt(s,u,s+1,u-1,new I(T.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},Ut.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Qt(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new I(T.from(i),0,0),1,!0))},Ut.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=T.empty,i=T.empty,a=r.depth,s=r.depth-e,u=e-1;a>s;a--,u--){o=T.from(r.node(a).copy(o));var l=n&&n[u];i=T.from(l?l.type.create(l.attrs,i):r.node(a).copy(i))}return this.step(new Xt(t,t,new I(o.append(i),e,e),!0))},Ut.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Xt(t-e,t+e,I.empty,!0);return this.step(n)};var ae=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new I(ie(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Gt.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new se(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Zt);Zt.jsonID("addMark",ae);var se=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new I(ie(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Gt.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new ae(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Zt);function ue(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Zt.jsonID("removeMark",se),Ut.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(t,e,(function(r,u,l){if(r.isInline){var c=r.marks;if(!n.isInSet(c)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(u,t),f=Math.min(u+r.nodeSize,e),h=n.addToSet(c),d=0;d<c.length;d++)c[d].isInSet(h)||(a&&a.to==p&&a.mark.eq(c[d])?a.to=f:o.push(a=new se(p,f,c[d])));s&&s.to==p?s.to=f:i.push(s=new ae(p,f,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},Ut.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,a){if(r.isInline){i++;var s=null;if(n instanceof xt)for(var u,l=r.marks;u=n.isInSet(l);)(s||(s=[])).push(u),l=u.removeFromSet(l);else n?n.isInSet(r.marks)&&(s=[n]):s=r.marks;if(s&&s.length)for(var c=Math.min(a+r.nodeSize,e),p=0;p<s.length;p++){for(var f=s[p],h=void 0,d=0;d<o.length;d++){var m=o[d];m.step==i-1&&f.eq(o[d].style)&&(h=m)}h?(h.to=c,h.step=i):o.push({style:f,from:Math.max(a,t),to:c,step:i})}}})),o.forEach((function(t){return r.step(new se(t.from,t.to,t.style))})),this},Ut.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,a=0;a<r.childCount;a++){var s=r.child(a),u=i+s.nodeSize,l=n.matchType(s.type,s.attrs);if(l){n=l;for(var c=0;c<s.marks.length;c++)e.allowsMarkType(s.marks[c].type)||this.step(new se(i,u,s.marks[c]))}else o.push(new Xt(i,u,I.empty));i=u}if(!n.validEnd){var p=n.fillBefore(T.empty,!0);this.replace(i,i,new I(p,0,0))}for(var f=o.length-1;f>=0;f--)this.step(o[f]);return this},Ut.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=I.empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=I.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return ue(o,i,r)?new Xt(e,n,r):new le(o,i,r).fit()}(this.doc,t,e,n);return r&&this.step(r),this},Ut.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new I(T.from(n),0,0))},Ut.prototype.delete=function(t,e){return this.replace(t,e,I.empty)},Ut.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var le=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=T.empty;for(var i=t.depth;i>0;i--)this.placed=T.from(t.node(i).copy(this.placed))},ce={depth:{configurable:!0}};function pe(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(pe(t.firstChild.content,e-1,n)))}function fe(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(fe(t.lastChild.content,e-1,n)))}function he(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function de(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,de(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(T.empty,!0)))),t.copy(r)}function me(t,e,n,r,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function ve(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(ve(i.content,e+1,n,r,i)))}if(e>r){var a=o.contentMatchAt(0),s=a.fillBefore(t).append(t);t=s.append(a.matchFragment(s).fillBefore(T.empty,!0))}return t}function ge(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}ce.depth.get=function(){return this.frontier.length-1},le.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var u=new I(i,a,s);return e>-1?new Qt(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Xt(r.pos,o.pos,u):void 0},le.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,r=(e?(n=he(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],a=i.type,s=i.match,u=void 0,l=void 0;if(1==t&&(r?s.matchType(r.type)||(l=s.fillBefore(T.from(r),!1)):a.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:l};if(2==t&&r&&(u=s.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:u};if(n&&s.matchType(n.type))break}},le.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=he(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new I(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},le.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=he(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new I(pe(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new I(pe(e,n,1),n,r)},le.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,u=r?r.content:s.content,l=s.openStart-e,c=0,p=[],f=this.frontier[n],h=f.match,d=f.type;if(o){for(var m=0;m<o.childCount;m++)p.push(o.child(m));h=h.matchFragment(o)}for(var v=u.size+e-(s.content.size-s.openEnd);c<u.childCount;){var g=u.child(c),y=h.matchType(g.type);if(!y)break;(++c>1||0==l||g.content.size)&&(h=y,p.push(de(g.mark(d.allowedMarks(g.marks)),1==c?l:0,c==u.childCount?v:-1)))}var b=c==u.childCount;b||(v=-1),this.placed=fe(this.placed,n,T.from(p)),this.frontier[n].match=h,b&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,k=u;w<v;w++){var x=k.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),k=x.content}this.unplaced=b?0==e?I.empty:new I(pe(s.content,e-1,1),e-1,v<0?s.openEnd:e-1):new I(pe(s.content,e,c),s.openStart,s.openEnd)},le.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!me(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},le.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=me(t,e,o,r,i);if(a){for(var s=e-1;s>=0;s--){var u=this.frontier[s],l=u.match,c=me(t,s,u.type,l,!0);if(!c||c.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}},le.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=fe(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},le.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=fe(this.placed,this.depth,T.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},le.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(T.empty,!0);t.childCount&&(this.placed=fe(this.placed,this.frontier.length,t))},Object.defineProperties(le.prototype,ce),Ut.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(ue(r,o,n))return this.step(new Xt(t,e,n));var i=ge(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var a=-(r.depth+1);i.unshift(a);for(var s=r.depth,u=r.pos-1;s>0;s--,u--){var l=r.node(s).type.spec;if(l.defining||l.isolating)break;i.indexOf(s)>-1?a=s:r.before(s)==u&&i.splice(1,0,-s)}for(var c=i.indexOf(a),p=[],f=n.openStart,h=n.content,d=0;;d++){var m=h.firstChild;if(p.push(m),d==n.openStart)break;h=m.content}f>0&&p[f-1].type.spec.defining&&r.node(c).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&r.node(c).type!=p[f-2].type&&(f-=2);for(var v=n.openStart;v>=0;v--){var g=(v+f+1)%(n.openStart+1),y=p[g];if(y)for(var b=0;b<i.length;b++){var w=i[(b+c)%i.length],k=!0;w<0&&(k=!1,w=-w);var x=r.node(w-1),C=r.index(w-1);if(x.canReplaceWith(C,C,y.type,y.marks))return this.replace(r.before(w),k?o.after(w):e,new I(ve(n.content,0,n.openStart,g),g,n.openEnd))}}for(var D=this.steps.length,E=i.length-1;E>=0&&(this.replace(t,e,n),!(this.steps.length>D));E--){var T=i[E];T<0||(t=r.before(T),e=o.after(T))}return this},Ut.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new I(T.from(n),0,0))},Ut.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=ge(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var u=1;u<=n.depth&&u<=r.depth;u++)if(t-n.start(u)==n.depth-u&&e>n.end(u)&&r.end(u)-e!=r.depth-u)return this.delete(n.before(u),e);return this.delete(t,e)};var ye=Object.create(null),be=function(t,e,n){this.ranges=n||[new ke(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},we={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};we.anchor.get=function(){return this.$anchor.pos},we.head.get=function(){return this.$head.pos},we.from.get=function(){return this.$from.pos},we.to.get=function(){return this.$to.pos},we.$from.get=function(){return this.ranges[0].$from},we.$to.get=function(){return this.ranges[0].$to},we.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},be.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},be.prototype.replace=function(t,e){void 0===e&&(e=I.empty);for(var n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,a=this.ranges,s=0;s<a.length;s++){var u=a[s],l=u.$from,c=u.$to,p=t.mapping.slice(i);t.replaceRange(p.map(l.pos),p.map(c.pos),s?I.empty:e),0==s&&Se(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},be.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,u=t.mapping.slice(n),l=u.map(a.pos),c=u.map(s.pos);o?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),Se(t,n,e.isInline?-1:1))}},be.findFrom=function(t,e,n){var r=t.parent.inlineContent?new xe(t):Ae(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?Ae(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):Ae(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},be.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new Te(t.node(0))},be.atStart=function(t){return Ae(t,t,0,0,1)||new Te(t)},be.atEnd=function(t){return Ae(t,t,t.content.size,t.childCount,-1)||new Te(t)},be.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=ye[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},be.jsonID=function(t,e){if(t in ye)throw new RangeError("Duplicate use of selection JSON ID "+t);return ye[t]=e,e.prototype.jsonID=t,e},be.prototype.getBookmark=function(){return xe.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(be.prototype,we),be.prototype.visible=!0;var ke=function(t,e){this.$from=t,this.$to=e},xe=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=I.empty),t.prototype.replace.call(this,e,n),n==I.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new Ce(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var a=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!a)return t.near(r,o);r=a.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(be);be.jsonID("text",xe);var Ce=function(t,e){this.anchor=t,this.head=e};Ce.prototype.map=function(t){return new Ce(t.map(this.anchor),t.map(this.head))},Ce.prototype.resolve=function(t){return xe.between(t.resolve(this.anchor),t.resolve(this.head))};var De=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,a=o.pos,s=n.resolve(a);return i?t.near(s):new e(s)},e.prototype.content=function(){return new I(T.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new Ee(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(be);De.prototype.visible=!1,be.jsonID("node",De);var Ee=function(t){this.anchor=t};Ee.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new Ce(r,r):new Ee(r)},Ee.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&De.isSelectable(n)?new De(e):be.near(e)};var Te=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=I.empty),n==I.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return Me},e}(be);be.jsonID("all",Te);var Me={map:function(){return this},resolve:function(t){return new Te(t)}};function Ae(t,e,n,r,o,i){if(e.inlineContent)return xe.create(t,n);for(var a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var s=e.child(a);if(s.isAtom){if(!i&&De.isSelectable(s))return De.create(t,n-(o<0?s.nodeSize:0))}else{var u=Ae(t,s,n+o,o<0?s.childCount:0,o,i);if(u)return u}n+=s.nodeSize*o}}function Se(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];if(i instanceof Xt||i instanceof Qt)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(be.near(t.doc.resolve(o),n))}}var Oe=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return N.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||N.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(be.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(Ut);function Ne(t,e){return e&&t?t.bind(e):t}var Le=function(t,e,n){this.name=t,this.init=Ne(e.init,n),this.apply=Ne(e.apply,n)},Ie=[new Le("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Le("selection",{init:function(t,e){return t.selection||be.atStart(e.doc)},apply:function(t){return t.selection}}),new Le("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Le("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],_e=function(t,e){var n=this;this.schema=t,this.fields=Ie.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Le(t.key,t.spec.state,t))}))},Fe=function(t){this.config=t},Be={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Be.schema.get=function(){return this.config.schema},Be.plugins.get=function(){return this.config.plugins},Fe.prototype.apply=function(t){return this.applyTransaction(t).state},Fe.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},Fe.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,u=r?r[i].state:this,l=s<e.length&&a.spec.appendTransaction.call(a,s?e.slice(s):e,u,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var c=0;c<this.config.plugins.length;c++)r.push(c<i?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},Fe.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new Fe(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<Re.length;i++)Re[i](this,t,e);return e},Be.tr.get=function(){return new Oe(this)},Fe.create=function(t){for(var e=new _e(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Fe(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},Fe.prototype.reconfigure=function(t){for(var e=new _e(this.schema,t.plugins),n=e.fields,r=new Fe(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},Fe.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},Fe.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new _e(t.schema,t.plugins),o=new Fe(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=tt.fromJSON(t.schema,e.doc);else if("selection"==r.name)o.selection=be.fromJSON(o.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var i in n){var a=n[i],s=a.spec.state;if(a.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(e,i))return void(o[r.name]=s.fromJSON.call(a,t,e[i],o))}o[r.name]=r.init(t,o)}})),o},Fe.addApplyListener=function(t){Re.push(t)},Fe.removeApplyListener=function(t){var e=Re.indexOf(t);e>-1&&Re.splice(e,1)},Object.defineProperties(Fe.prototype,Be);var Re=[];function Pe(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=Pe(o,e,{})),n[r]=o}return n}var ze=function(t){this.props={},t.props&&Pe(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:He("plugin")};ze.prototype.getState=function(t){return t[this.key]};var je=Object.create(null);function He(t){return t in je?t+"$"+ ++je[t]:(je[t]=0,t+"$")}var $e=function(t){void 0===t&&(t="key"),this.key=He(t)};$e.prototype.get=function(t){return t.config.pluginsByKey[this.key]},$e.prototype.getState=function(t){return t[this.key]};var qe={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var Ve=/Edge\/(\d+)/.exec(navigator.userAgent),Ue=/MSIE \d/.test(navigator.userAgent),We=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);qe.mac=/Mac/.test(navigator.platform);var Je=qe.ie=!!(Ue||We||Ve);qe.ie_version=Ue?document.documentMode||6:We?+We[1]:Ve?+Ve[1]:null,qe.gecko=!Je&&/gecko\/(\d+)/i.test(navigator.userAgent),qe.gecko_version=qe.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Ke=!Je&&/Chrome\/(\d+)/.exec(navigator.userAgent);qe.chrome=!!Ke,qe.chrome_version=Ke&&+Ke[1],qe.safari=!Je&&/Apple Computer/.test(navigator.vendor),qe.ios=qe.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),qe.android=/Android \d/.test(navigator.userAgent),qe.webkit="webkitFontSmoothing"in document.documentElement.style,qe.webkit_version=qe.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Ze=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},Ge=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},Xe=null,Qe=function(t,e,n){var r=Xe||(Xe=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},Ye=function(t,e,n,r){return n&&(en(t,e,n,r,-1)||en(t,e,n,r,1))},tn=/^(img|br|input|textarea|hr)$/i;function en(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:nn(t))){var i=t.parentNode;if(1!=i.nodeType||rn(t)||tn.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Ze(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?nn(t):0}}}function nn(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function rn(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var on=function(t){var e=t.isCollapsed;return e&&qe.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function an(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function sn(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function un(t,e){return"number"==typeof t?t:t[e]}function ln(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function cn(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,a=n||t.dom;a;a=Ge(a))if(1==a.nodeType){var s=a==i.body||1!=a.nodeType,u=s?sn(i):ln(a),l=0,c=0;if(e.top<u.top+un(r,"top")?c=-(u.top-e.top+un(o,"top")):e.bottom>u.bottom-un(r,"bottom")&&(c=e.bottom-u.bottom+un(o,"bottom")),e.left<u.left+un(r,"left")?l=-(u.left-e.left+un(o,"left")):e.right>u.right-un(r,"right")&&(l=e.right-u.right+un(o,"right")),l||c)if(s)i.defaultView.scrollBy(l,c);else{var p=a.scrollLeft,f=a.scrollTop;c&&(a.scrollTop+=c),l&&(a.scrollLeft+=l);var h=a.scrollLeft-p,d=a.scrollTop-f;e={left:e.left-h,top:e.top-d,right:e.right-h,bottom:e.bottom-d}}if(s)break}}function pn(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=Ge(t));return e}function fn(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=a&&(o.scrollLeft=a)}}var hn=null;function dn(t,e){for(var n,r,o=2e8,i=0,a=e.top,s=e.top,u=t.firstChild,l=0;u;u=u.nextSibling,l++){var c=void 0;if(1==u.nodeType)c=u.getClientRects();else{if(3!=u.nodeType)continue;c=Qe(u).getClientRects()}for(var p=0;p<c.length;p++){var f=c[p];if(f.top<=a&&f.bottom>=s){a=Math.max(f.bottom,a),s=Math.min(f.top,s);var h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<o){n=u,o=h,r=h&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==u.nodeType&&h&&(i=l+(e.left>=(f.left+f.right)/2?1:0));continue}}!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=yn(r,1);if(i.top!=i.bottom&&mn(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:dn(n,r)}function mn(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function vn(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=t.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),u=0;u<s.length;u++){var l=s[u];if(mn(e,l))return vn(a,e,l)}if((i=(i+1)%r)==o)break}return t}function gn(t,e){var n,r,o,i,a=t.root;if(a.caretPositionFromPoint)try{var s=a.caretPositionFromPoint(e.left,e.top);s&&(o=(n=s).offsetNode,i=n.offset)}catch(v){}if(!o&&a.caretRangeFromPoint){var u=a.caretRangeFromPoint(e.left,e.top);u&&(o=(r=u).startContainer,i=r.startOffset)}var l,c=a.elementFromPoint(e.left,e.top+1);if(!c||!t.dom.contains(1!=c.nodeType?c.parentNode:c)){var p=t.dom.getBoundingClientRect();if(!mn(e,p))return null;if(!(c=vn(t.dom,e,p)))return null}if(qe.safari)for(var f=c;o&&f;f=Ge(f))f.draggable&&(o=i=null);if(c=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(c,e),o){if(qe.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var h,d=o.childNodes[i];"IMG"==d.nodeName&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(l=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var a=t.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,o,i,e))}null==l&&(l=function(t,e,n){var r=dn(e,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(o,i,a)}(t,c,e));var m=t.docView.nearestDesc(c,!0);return{pos:l,inside:m?m.posAtStart-m.border:-1}}function yn(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}var bn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function wn(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),o=r.node,i=r.offset,a=qe.webkit||qe.gecko;if(3==o.nodeType){if(!a||!bn.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var s=i,u=i,l=n<0?1:-1;return n<0&&!i?(u++,l=-1):n>=0&&i==o.nodeValue.length?(s--,l=1):n<0?s--:u++,kn(yn(Qe(o,s,u),l),l<0)}var c=yn(Qe(o,i,i),n);if(qe.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var p=yn(Qe(o,i-1,i-1),-1);if(p.top==c.top){var f=yn(Qe(o,i,i+1),-1);if(f.top!=c.top)return kn(f,f.left<p.left)}}return c}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(n<0||i==nn(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return xn(h.getBoundingClientRect(),!1)}if(i<nn(o)){var d=o.childNodes[i];if(1==d.nodeType)return xn(d.getBoundingClientRect(),!0)}return xn(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==nn(o))){var m=o.childNodes[i-1],v=3==m.nodeType?Qe(m,nn(m)-(a?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(v)return kn(yn(v,1),!1)}if(i<nn(o)){var g=o.childNodes[i],y=3==g.nodeType?Qe(g,0,a?0:1):1==g.nodeType?g:null;if(y)return kn(yn(y,-1),!0)}return kn(yn(3==o.nodeType?Qe(o):o,-n),n>=0)}function kn(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function xn(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Cn(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var Dn=/[\u0590-\u08ac]/;var En=null,Tn=null,Mn=!1;function An(t,e,n){return En==e&&Tn==n?Mn:(En=e,Tn=n,Mn="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$from:r.$to;return Cn(t,e,(function(){for(var e=t.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=wn(t,o.pos,1),a=e.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=Qe(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<s.length;u++){var l=s[u];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=getSelection();return Dn.test(r.parent.textContent)&&s.modify?Cn(t,e,(function(){var e=s.getRangeAt(0),o=s.focusNode,i=s.focusOffset,a=s.caretBidiLevel;s.modify("move",n,"character");var u=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||o==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(e),null!=a&&(s.caretBidiLevel=a),u})):"left"==n||"backward"==n?i:a}(t,e,n))}var Sn=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},On={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};Sn.prototype.matchesWidget=function(){return!1},Sn.prototype.matchesMark=function(){return!1},Sn.prototype.matchesNode=function(){return!1},Sn.prototype.matchesHack=function(t){return!1},On.beforePosition.get=function(){return!1},Sn.prototype.parseRule=function(){return null},Sn.prototype.stopEvent=function(){return!1},On.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},On.border.get=function(){return 0},Sn.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},Sn.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},On.posBefore.get=function(){return this.parent.posBeforeChild(this)},On.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},On.posAfter.get=function(){return this.posBefore+this.size},On.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Sn.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(t==this.dom&&this.contentDOM)s=e>Ze(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var u=t;;u=u.parentNode){if(u==this.dom){s=!1;break}if(u.parentNode.firstChild!=u)break}if(null==s&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart},Sn.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},Sn.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},Sn.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},Sn.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},Sn.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==t&&(0==e||!i||!i.size||i.border||e<0&&o)||i&&i.domAtom&&t<n+i.size)return{node:this.contentDOM,offset:i?Ze(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+t);var a=n+i.size;if(!i.domAtom&&(e<0&&!i.border?a>=t:a>t)&&(a>t||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(t-n-i.border,e);n=a}},Sn.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],u=i+s.size;if(-1==r&&t<=u){var l=i+s.border;if(t>=l&&e<=u-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(t,e,l);t=i;for(var c=a;c>0;c--){var p=this.children[c-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=Ze(p.dom)+1;break}t-=p.size}-1==r&&(r=0)}if(r>-1&&(u>e||a==this.children.length-1)){e=u;for(var f=a+1;f<this.children.length;f++){var h=this.children[f];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=Ze(h.dom);break}e+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},Sn.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},Sn.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},Sn.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),a=0,s=0;a<this.children.length;a++){var u=this.children[a],l=s+u.size;if(o>s&&i<l)return u.setSelection(t-s-u.border,e-s-u.border,n,r);s=l}var c=this.domFromPos(t,t?-1:1),p=e==t?c:this.domFromPos(e,e?-1:1),f=n.getSelection(),h=!1;if((qe.gecko||qe.safari)&&t==e){var d=c.node,m=c.offset;if(3==d.nodeType){if((h=m&&"\n"==d.nodeValue[m-1])&&m==d.nodeValue.length)for(var v=d,g=void 0;v;v=v.parentNode){if(g=v.nextSibling){"BR"==g.nodeName&&(c=p={node:g.parentNode,offset:Ze(g)+1});break}var y=v.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var b=d.childNodes[m-1];h=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(qe.gecko&&f.focusNode&&f.focusNode!=p.node&&1==f.focusNode.nodeType){var w=f.focusNode.childNodes[f.focusOffset];w&&"false"==w.contentEditable&&(r=!0)}if(r||h&&qe.safari||!Ye(c.node,c.offset,f.anchorNode,f.anchorOffset)||!Ye(p.node,p.offset,f.focusNode,f.focusOffset)){var k=!1;if((f.extend||t==e)&&!h){f.collapse(c.node,c.offset);try{t!=e&&f.extend(p.node,p.offset),k=!0}catch(D){if(!(D instanceof DOMException))throw D}}if(!k){if(t>e){var x=c;c=p,p=x}var C=document.createRange();C.setEnd(p.node,p.offset),C.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(C)}}},Sn.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},On.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Sn.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var a=n+o.border,s=i-o.border;if(t>=a&&e<=s)return this.dirty=t==n||e==i?2:1,void(t!=a||e!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-a,e-a):o.dirty=3);o.dirty=3}n=i}this.dirty=2},Sn.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},On.domAtom.get=function(){return!1},Object.defineProperties(Sn.prototype,On);var Nn=[],Ln=function(t){function e(e,n,r,o){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}t.call(this,e,Nn,a,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(Sn),In=function(t){function e(e,n,r,o){t.call(this,e,Nn,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(Sn),_n=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=Bt.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=Xn(i,n,a,r)),t>0&&(i=Xn(i,0,t,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o},e}(Sn),Fn=function(t){function e(e,n,r,o,i,a,s,u,l){t.call(this,e,n.isLeaf?Nn:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=o,a&&this.updateChildren(u,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,n,r,o,i,a){var s,u,l=i.nodeViews[n.type.name],c=l&&l(n,i,(function(){return u?u.parent?u.parent.posBeforeChild(u):void 0:a}),r,o),p=c&&c.dom,f=c&&c.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(s=Bt.renderSpec(document,n.type.spec.toDOM(n))).dom,f=s.contentDOM);f||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var h=p;return p=Wn(p,r,n),c?u=new zn(t,n,r,o,p,f,h,c,i,a+1):n.isText?new Rn(t,n,r,o,p,h,i):new e(t,n,r,o,p,f,h,i,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?T.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&Jn(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,o=e,i=r&&t.composing&&this.localCompositionNode(t,e),a=new Zn(this,i&&i.node);!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var a=0;a<t.childCount;a++){var s=t.child(a);r(s,o,e.forChild(i,s),a),i+=s.nodeSize}return}for(var u=0,l=[],c=null,p=0;;){if(u<o.length&&o[u].to==i){for(var f=o[u++],h=void 0;u<o.length&&o[u].to==i;)(h||(h=[f])).push(o[u++]);if(h){h.sort(Gn);for(var d=0;d<h.length;d++)n(h[d],p,!!c)}else n(f,p,!!c)}var m=void 0,v=void 0;if(c)v=-1,m=c,c=null;else{if(!(p<t.childCount))break;v=p,m=t.child(p++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;u<o.length&&o[u].from<=i&&o[u].to>i;)l.push(o[u++]);var y=i+m.nodeSize;if(m.isText){var b=y;u<o.length&&o[u].from<b&&(b=o[u].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(c=m.cut(b-i),m=m.cut(0,b-i),y=b,v=-1)}r(m,l.length?m.isInline&&!m.isLeaf?l.filter((function(t){return!t.inline})):l.slice():Nn,e.forChild(i,m),v),i=y}}(this.node,this.innerDeco,(function(e,i,s){e.spec.marks?a.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!s&&a.syncToMarks(i==n.node.childCount?N.none:n.node.child(i).marks,r,t),a.placeWidget(e,t,o)}),(function(e,n,i,s){a.syncToMarks(e.marks,r,t),a.findNodeMatch(e,n,i,s)||a.updateNextNode(e,n,i,t,s)||a.addNode(e,n,i,t,o),o+=e.nodeSize})),a.syncToMarks(Nn,r,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(i&&this.protectLocalComposition(t,i),jn(this.contentDOM,this.children,t),qe.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,r=n.from,o=n.to;if(!(!(t.state.selection instanceof xe)||r<e||o>e+this.node.content.size)){var i=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=nn(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(i.focusNode,i.focusOffset);if(a&&this.dom.contains(a.parentNode)){var s=a.nodeValue,u=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var a=t.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var u=a.text;o<t.childCount;){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;u+=l.text}if(i>=n){var c=u.lastIndexOf(e,r-s);if(c>=0&&c+e.length+s>=n)return s+c}}}return-1}(this.node.content,s,r-e,o-e);return u<0?null:{node:a,pos:u,text:s}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var a=new In(this,i,n,o);t.compositionNodes.push(a),this.children=Xn(this.children,r,r+o.length,t,a)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!Jn(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Vn(this.dom,this.nodeDOM,qn(this.outerDeco,this.node,e),qn(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,n),e}(Sn);function Bn(t,e,n,r,o){return Wn(r,e,t),new Fn(null,t,e,n,r,r,r,o,0)}var Rn=function(t){function e(e,n,r,o,i,a,s){t.call(this,e,n,r,o,i,null,a,s)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e.prototype.markDirty=function(e,n){t.prototype.markDirty.call(this,e,n),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)},n.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,n),e}(Fn),Pn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(t){return 0==this.dirty&&this.dom.nodeName==t},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(Sn),zn=function(t){function e(e,n,r,o,i,a,s,u,l,c){t.call(this,e,n,r,o,i,a,s,l,c),this.spec=u}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(Fn);function jn(t,e,n){for(var r=t.firstChild,o=!1,i=0;i<e.length;i++){var a=e[i],s=a.dom;if(s.parentNode==t){for(;s!=r;)r=Kn(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(s,r);if(a instanceof _n){var u=r?r.previousSibling:t.lastChild;jn(a.contentDOM,a.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=Kn(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}function Hn(t){t&&(this.nodeName=t)}Hn.prototype=Object.create(null);var $n=[new Hn];function qn(t,e,n){if(0==t.length)return $n;for(var r=n?$n[0]:new Hn,o=[r],i=0;i<t.length;i++){var a=t[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new Hn(a.nodeName)),a){var u=a[s];null!=u&&(n&&1==o.length&&o.push(r=new Hn(e.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+u:"style"==s?r.style=(r.style?r.style+";":"")+u:"nodeName"!=s&&(r[s]=u))}}return o}function Vn(t,e,n,r){if(n==$n&&r==$n)return e;for(var o=e,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var u=void 0;s&&s.nodeName==a.nodeName&&o!=t&&(u=o.parentNode)&&u.tagName.toLowerCase()==a.nodeName||((u=document.createElement(a.nodeName)).pmIsDeco=!0,u.appendChild(o),s=$n[0]),o=u}Un(o,s||$n[0],a)}return o}function Un(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" ").filter(Boolean):Nn,a=n.class?n.class.split(" ").filter(Boolean):Nn,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&t.classList.remove(i[s]);for(var u=0;u<a.length;u++)-1==i.indexOf(a[u])&&t.classList.add(a[u])}if(e.style!=n.style){if(e.style)for(var l,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=c.exec(e.style);)t.style.removeProperty(l[1]);n.style&&(t.style.cssText+=n.style)}}function Wn(t,e,n){return Vn(t,t,$n,qn(e,n,1!=t.nodeType))}function Jn(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Kn(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Zn=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(t,e){for(var n=t.childCount,r=e.length,o=new Map;n>0&&r>0;r--){var i=e[r-1],a=i.node;if(a){if(a!=t.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}(t.node.content,t.children)};function Gn(t,e){return t.type.side-e.type.side}function Xn(t,e,n,r,o){for(var i=[],a=0,s=0;a<t.length;a++){var u=t[a],l=s,c=s+=u.size;l>=n||c<=e?i.push(u):(l<e&&i.push(u.slice(0,e-l,r)),o&&(i.push(o),o=null),c>n&&i.push(u.slice(n-l,u.size,r)))}return i}function Qn(t,e){var n=t.root.getSelection(),r=t.state.doc;if(!n.focusNode)return null;var o=t.docView.nearestDesc(n.focusNode),i=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var s,u,l=r.resolve(a);if(on(n)){for(s=l;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&De.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!function(t,e,n){for(var r=0==e,o=e==nn(t);r||o;){if(t==n)return!0;var i=Ze(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==nn(t)}}(n.focusNode,n.focusOffset,o.dom))){var c=o.posBefore;u=new De(a==c?l:r.resolve(c))}}else{var p=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(p<0)return null;s=r.resolve(p)}u||(u=sr(t,s,l,"pointer"==e||t.state.selection.head<l.pos&&!i?1:-1));return u}function Yn(t){return t.editable?t.hasFocus():ur(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function tr(t,e){var n=t.state.selection;if(ir(t,n),Yn(t)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,Ze(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&qe.ie&&qe.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var r,o,i=n.anchor,a=n.head;!er||n instanceof xe||(n.$from.parent.inlineContent||(r=nr(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=nr(t,n.to))),t.docView.setSelection(i,a,t.root,e),er&&(r&&or(r),o&&or(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){Yn(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}Zn.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},Zn.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Zn.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(t[o])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var u=_n.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}},Zn.prototype.findNodeMatch=function(t,e,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var a=this.index;a<o.length;a++)if(o[a].matchesNode(t,e,n)){i=a;break}}else for(var s=this.index,u=Math.min(o.length,s+1);s<u;s++){var l=o[s];if(l.matchesNode(t,e,n)&&!this.preMatch.matched.has(l)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Zn.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof Fn){var s=this.preMatch.matched.get(a);if(null!=s&&s!=o)return!1;var u=a.dom;if(!(this.lock&&(u==this.lock||1==u.nodeType&&u.contains(this.lock.parentNode))&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&3!=a.dirty&&Jn(e,a.outerDeco)))&&a.update(t,e,n,r))return this.destroyBetween(this.index,i),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1},Zn.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,Fn.create(this.top,t,e,n,r,o)),this.changed=!0},Zn.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Ln(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},Zn.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof _n;)t=t.children[t.children.length-1];t&&t instanceof Rn&&!/\n$/.test(t.node.text)||(qe.safari&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Zn.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);this.top.children.splice(this.index++,0,new Pn(this.top,Nn,e,null)),this.changed=!0}};var er=qe.safari||qe.chrome&&qe.chrome_version<63;function nr(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(qe.safari&&i&&"false"==i.contentEditable)return rr(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return rr(i);if(a)return rr(a)}}function rr(t){return t.contentEditable="true",qe.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function or(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ir(t,e){if(e instanceof De){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ar(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ar(t)}function ar(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function sr(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||xe.between(e,n,r)}function ur(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function lr(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=e>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return a&&be.findFrom(a,e)}function cr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function pr(t,e,n){var r=t.state.selection;if(!(r instanceof xe)){if(r instanceof De&&r.node.isInline)return cr(t,new xe(e>0?r.$to:r.$from));var o=lr(t.state,e);return!!o&&cr(t,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var i=lr(t.state,e);return!!(i&&i instanceof De)&&cr(t,i)}if(!(qe.mac&&n.indexOf("m")>-1)){var a,s=r.$head,u=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!u||u.isText)return!1;var l=e<0?s.pos-u.nodeSize:s.pos;return!!(u.isAtom||(a=t.docView.descAt(l))&&!a.contentDOM)&&(De.isSelectable(u)?cr(t,new De(e<0?t.state.doc.resolve(s.pos-u.nodeSize):s)):!!qe.webkit&&cr(t,new xe(t.state.doc.resolve(e<0?l:l+u.nodeSize))))}}function fr(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function hr(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function dr(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(qe.gecko&&1==n.nodeType&&r<fr(n)&&hr(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(hr(s))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(vr(n))break;for(var u=n.previousSibling;u&&hr(u);)o=n.parentNode,i=Ze(u),u=u.previousSibling;if(u)r=fr(n=u);else{if((n=n.parentNode)==t.dom)break;r=0}}a?gr(t,e,n,r):o&&gr(t,e,o,i)}}function mr(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,a=fr(n);;)if(r<a){if(1!=n.nodeType)break;if(!hr(n.childNodes[r]))break;o=n,i=++r}else{if(vr(n))break;for(var s=n.nextSibling;s&&hr(s);)o=s.parentNode,i=Ze(s)+1,s=s.nextSibling;if(s)r=0,a=fr(n=s);else{if((n=n.parentNode)==t.dom)break;r=a=0}}o&&gr(t,e,o,i)}}function vr(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function gr(t,e,n,r){if(on(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&tr(t)}),50)}function yr(t,e,n){var r=t.state.selection;if(r instanceof xe&&!r.empty||n.indexOf("s")>-1)return!1;if(qe.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var a=lr(t.state,e);if(a&&a instanceof De)return cr(t,a)}if(!o.parent.inlineContent){var s=e<0?o:i,u=r instanceof Te?be.near(s,e):be.findFrom(s,e);return!!u&&cr(t,u)}return!1}function br(t,e){if(!(t.state.selection instanceof xe))return!0;var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=t.state.tr;return e<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),t.dispatch(s),!0}return!1}function wr(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function kr(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||qe.mac&&72==n&&"c"==r?br(t,-1)||dr(t):46==n||qe.mac&&68==n&&"c"==r?br(t,1)||mr(t):13==n||27==n||(37==n?pr(t,-1,r)||dr(t):39==n?pr(t,1,r)||mr(t):38==n?yr(t,-1,r)||dr(t):40==n?function(t){if(qe.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;wr(t,o,!0),setTimeout((function(){return wr(t,o,!1)}),20)}}}(t)||yr(t,1,r)||mr(t):r==(qe.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function xr(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(qe.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||qe.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function Cr(t,e,n,r,o){if(e<0){var i=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,a=Qn(t,i);if(a&&!t.state.selection.eq(a)){var s=t.state.tr.setSelection(a);"pointer"==i?s.setMeta("pointer",!0):"key"==i&&s.scrollIntoView(),t.dispatch(s)}}else{var u=t.state.doc.resolve(e),l=u.sharedDepth(n);e=u.before(l+1),n=t.state.doc.resolve(n).after(l+1);var c=t.state.selection,p=function(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,i=r.fromOffset,a=r.toOffset,s=r.from,u=r.to,l=t.root.getSelection(),c=null,p=l.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(c=[{node:p,offset:l.anchorOffset}],on(l)||c.push({node:l.focusNode,offset:l.focusOffset})),qe.chrome&&8===t.lastKeyCode)for(var f=a;f>i;f--){var h=o.childNodes[f-1],d=h.pmViewDesc;if("BR"==h.nodeName&&!d){a=f;break}if(!d||d.size)break}var m=t.state.doc,v=t.someProp("domParser")||Et.fromSchema(t.state.schema),g=m.resolve(s),y=null,b=v.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:a,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:c,ruleFromNode:xr,context:g});if(c&&null!=c[0].pos){var w=c[0].pos,k=c[1]&&c[1].pos;null==k&&(k=w),y={anchor:w+s,head:k+s}}return{doc:b,sel:y,from:s,to:u}}(t,e,n);if(qe.chrome&&t.cursorWrapper&&p.sel&&p.sel.anchor==t.cursorWrapper.deco.from){var f=t.cursorWrapper.deco.type.toDOM.nextSibling,h=f&&f.nodeValue?f.nodeValue.length:1;p.sel={anchor:p.sel.anchor+h,head:p.sel.anchor+h}}var d,m,v=t.state.doc,g=v.slice(p.from,p.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(d=t.state.selection.to,m="end"):(d=t.state.selection.from,m="start"),t.lastKeyCode=null;var y=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var a=t.findDiffEnd(e,n+t.size,n+e.size),s=a.a,u=a.b;if("end"==o){r-=s+Math.max(0,i-Math.min(s,u))-i}if(s<i&&t.size<e.size){u=(i-=r<=i&&r>=s?i-r:0)+(u-s),s=i}else if(u<i){s=(i-=r<=i&&r>=u?i-r:0)+(s-u),u=i}return{start:i,endA:s,endB:u}}(g.content,p.doc.content,p.from,d,m);if(!y){if(!(r&&c instanceof xe&&!c.empty&&c.$head.sameParent(c.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if((qe.ios&&t.lastIOSEnter>Date.now()-225||qe.android)&&o.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,an(13,"Enter"))})))return void(t.lastIOSEnter=0);if(p.sel){var b=Dr(t,t.state.doc,p.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}y={start:c.from,endA:c.to,endB:c.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof xe&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),qe.ie&&qe.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>p.from&&"  "==p.doc.textBetween(y.start-p.from-1,y.start-p.from+1)&&(y.start--,y.endA--,y.endB--);var w,k=p.doc.resolveNoCache(y.start-p.from),x=p.doc.resolveNoCache(y.endB-p.from),C=k.sameParent(x)&&k.parent.inlineContent;if((qe.ios&&t.lastIOSEnter>Date.now()-225&&(!C||o.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!C&&k.pos<p.doc.content.size&&(w=be.findFrom(p.doc.resolve(k.pos+1),1,!0))&&w.head==x.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,an(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Er(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=t.resolve(Er(i,!0,!0));if(!a.parent.isTextblock||a.pos>n||Er(a,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(v,y.start,y.endA,k,x)&&t.someProp("handleKeyDown",(function(e){return e(t,an(8,"Backspace"))})))qe.android&&qe.chrome&&t.domObserver.suppressSelectionUpdates();else{qe.chrome&&qe.android&&y.toB==y.from&&(t.lastAndroidDelete=Date.now()),qe.android&&!C&&k.start()!=x.start()&&0==x.parentOffset&&k.depth==x.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==y.endA&&(y.endB-=2,x=p.doc.resolveNoCache(y.endB-p.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,an(13,"Enter"))}))}),20));var D,E,M,A,S=y.start,O=y.endA;if(C)if(k.pos==x.pos)qe.ie&&qe.ie_version<=11&&0==k.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return tr(t)}),20)),D=t.state.tr.delete(S,O),E=v.resolve(y.start).marksAcross(v.resolve(y.endA));else if(y.endA==y.endB&&(A=v.resolve(y.start))&&(M=function(t,e){for(var n,r,o,i=t.firstChild.marks,a=e.firstChild.marks,s=i,u=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var c=0;c<i.length;c++)u=i[c].removeFromSet(u);if(1==s.length&&0==u.length)r=s[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=s.length||1!=u.length)return null;r=u[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var p=[],f=0;f<e.childCount;f++)p.push(o(e.child(f)));if(T.from(p).eq(t))return{mark:r,type:n}}(k.parent.content.cut(k.parentOffset,x.parentOffset),A.parent.content.cut(A.parentOffset,y.endA-A.start()))))D=t.state.tr,"add"==M.type?D.addMark(S,O,M.mark):D.removeMark(S,O,M.mark);else if(k.parent.child(k.index()).isText&&k.index()==x.index()-(x.textOffset?0:1)){var N=k.parent.textBetween(k.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,S,O,N)})))return;D=t.state.tr.insertText(N,S,O)}if(D||(D=t.state.tr.replace(S,O,p.doc.slice(y.start-p.from,y.endB-p.from))),p.sel){var L=Dr(t,D.doc,p.sel);L&&!(qe.chrome&&qe.android&&t.composing&&L.empty&&(y.start!=y.endB||t.lastAndroidDelete<Date.now()-100)&&(L.head==S||L.head==D.mapping.map(O)-1)||qe.ie&&L.empty&&L.head==S)&&D.setSelection(L)}E&&D.ensureMarks(E),t.dispatch(D.scrollIntoView())}}}function Dr(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:sr(t,e.resolve(n.anchor),e.resolve(n.head))}function Er(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Tr(t,e){for(var n=[],r=e.content,o=e.openStart,i=e.openEnd;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var s=t.someProp("clipboardSerializer")||Bt.fromSchema(t.state.schema),u=_r(),l=u.createElement("div");l.appendChild(s.serializeFragment(r,{document:u}));for(var c,p=l.firstChild;p&&1==p.nodeType&&(c=Lr[p.nodeName.toLowerCase()]);){for(var f=c.length-1;f>=0;f--){for(var h=u.createElement(c[f]);l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h)}p=l.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function Mr(t,e,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(r||s||!n);if(u){if(t.someProp("transformPastedText",(function(t){e=t(e,s||r)})),s)return new I(T.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0);var l=t.someProp("clipboardTextParser",(function(t){return t(e,o,r)}));l?a=l:(i=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){i.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),i=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=_r().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);(n=o&&Lr[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""));if(r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n);var c=i&&i.querySelector("[data-pm-slice]"),p=c&&/^(\d+) (\d+) (.*)/.exec(c.getAttribute("data-pm-slice"));if(!a){var f=t.someProp("clipboardParser")||t.someProp("domParser")||Et.fromSchema(t.state.schema);a=f.parseSlice(i,{preserveWhitespace:!(!u&&!p),context:o})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(l){return t}for(var o=t.content,i=t.openStart,a=t.openEnd,s=n.length-2;s>=0;s-=2){var u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;o=T.from(u.create(n[s+1],o)),i++,a++}return new I(o,i,a)}(function(t,e,n){e<t.openStart&&(t=new I(Nr(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new I(Nr(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(a,+p[1],+p[2]),p[3]):I.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),o=void 0,i=[];if(t.forEach((function(t){if(i){var e,n=r.findWrapping(t.type);if(!n)return i=null;if(e=i.length&&o.length&&Sr(n,o,t,i[i.length-1],0))i[i.length-1]=e;else{i.length&&(i[i.length-1]=Or(i[i.length-1],o.length));var a=Ar(t,n);i.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),i)return{v:T.from(i)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}(a.content,o),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function Ar(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,T.from(t));return t}function Sr(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=Sr(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(T.from(Ar(n,t,o+1))))}}function Or(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Or(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(T.empty,!0);return t.copy(n.append(r))}function Nr(t,e,n,r,o,i){var a=e<0?t.firstChild:t.lastChild,s=a.content;return o<r-1&&(s=Nr(s,e,n,r,o+1,i)),o>=n&&(s=e<0?a.contentMatchAt(0).fillBefore(s,t.childCount>1||i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(T.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(s))}var Lr={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ir=null;function _r(){return Ir||(Ir=document.implementation.createHTMLDocument("title"))}var Fr={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Br=qe.ie&&qe.ie_version<=11,Rr=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Rr.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Rr.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Pr=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);qe.ie&&qe.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Rr,Br&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Pr.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Pr.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Pr.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Fr),Br&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Pr.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Br&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Pr.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Pr.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Pr.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Pr.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&ur(t)){var t;if(this.suppressingSelectionUpdates)return tr(this.view);if(qe.ie&&qe.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&Ye(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Pr.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Pr.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Pr.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&ur(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var s=0;s<t.length;s++){var u=this.registerMutation(t[s],a);u&&(r=r<0?u.from:Math.min(u.from,r),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(i=!0))}if(qe.gecko&&a.length>1){var l=a.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var c=l[0],p=l[1];c.parentNode&&c.parentNode.parentNode==p.parentNode?p.remove():c.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(t){if(zr)return;zr=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||tr(this.view),this.currentSelection.set(e))}},Pr.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var o=t.previousSibling,i=t.nextSibling;if(qe.ie&&qe.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var s=t.addedNodes[a],u=s.previousSibling,l=s.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(o=u),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(i=l)}var c=o&&o.parentNode==t.target?Ze(o)+1:0,p=n.localPosFromDOM(t.target,c,-1),f=i&&i.parentNode==t.target?Ze(i):t.target.childNodes.length;return{from:p,to:n.localPosFromDOM(t.target,f,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var zr=!1;var jr={},Hr={};function $r(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function qr(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Vr(t,e)})}))}function Vr(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Ur(t){return{left:t.clientX,top:t.clientY}}function Wr(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),a=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},s=i.depth+1;s>0;s--){var u=a(s);if(u)return u.v}return!1}function Jr(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Kr(t,e,n,r,o){return Wr(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?function(t,e){if(-1==e)return!1;var n,r,o=t.state.selection;o instanceof De&&(n=o.node);for(var i=t.state.doc.resolve(e),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(De.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(Jr(t,De.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&De.isSelectable(r))&&(Jr(t,new De(n),"pointer"),!0)}(t,n))}function Zr(t,e,n,r){return Wr(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function Gr(t,e,n,r){return Wr(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||function(t,e,n){if(0!=n.button)return!1;var r=t.state.doc;if(-1==e)return!!r.inlineContent&&(Jr(t,xe.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(e),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)Jr(t,xe.create(r,s+1,s+1+a.content.size),"pointer");else{if(!De.isSelectable(a))continue;Jr(t,De.create(r,s),"pointer")}return!0}}(t,n,r)}function Xr(t){return oo(t)}Hr.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!to(t,e))if(229!=e.keyCode&&t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!qe.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||kr(t,e)?e.preventDefault():$r(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,an(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Hr.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Hr.keypress=function(t,e){if(!(to(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||qe.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof xe&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,r)}))||t.dispatch(t.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}}};var Qr=qe.mac?"metaKey":"ctrlKey";jr.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=Xr(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[Qr]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(Ur(e));i&&("singleClick"==o?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new Yr(t,i,e,n)):("doubleClick"==o?Zr:Gr)(t,i.pos,i.inside,e)?e.preventDefault():$r(t,"pointer"))};var Yr=function(t,e,n,r){var o,i,a=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=r,this.selectNode=n[Qr],this.allowDefault=n.shiftKey||0!=n.button,e.inside>-1)o=t.state.doc.nodeAt(e.inside),i=e.inside;else{var s=t.state.doc.resolve(e.pos);o=s.parent,i=s.depth?s.before():0}this.mightDrag=null;var u=r?null:n.target,l=u?t.docView.nearestDesc(u,!0):null;this.target=l?l.dom:null;var c=t.state.selection;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof De&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&qe.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){a.view.mouseDown==a&&a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),$r(t,"pointer")};function to(t,e){return!!t.composing||!!(qe.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}Yr.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Yr.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Ur(t))),this.allowDefault||!e?$r(this.view,"pointer"):Kr(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||qe.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||qe.chrome&&!(this.view.state.selection instanceof xe)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2?(Jr(this.view,be.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):$r(this.view,"pointer")}},Yr.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),$r(this.view,"pointer"),0==t.buttons&&this.done()},jr.touchdown=function(t){Xr(t),$r(t,"pointer")},jr.contextmenu=function(t){return Xr(t)};var eo=qe.android?5e3:-1;function no(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return oo(t)}),e))}function ro(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function oo(t,e){if(t.domObserver.forceFlush(),ro(t),e||t.docView.dirty){var n=Qn(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}Hr.compositionstart=Hr.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),oo(t,!0),t.markCursor=null;else if(oo(t),qe.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}t.composing=!0}no(t,eo)},Hr.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,no(t,20))};var io=qe.ie&&qe.ie_version<15||qe.ios&&qe.webkit_version<604;function ao(t,e,n,r){var o=Mr(t,e,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,o||I.empty)})))return!0;if(!o)return!1;var i=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(o),a=i?t.state.tr.replaceSelectionWith(i,t.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}jr.copy=Hr.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=io?null:e.clipboardData,i=Tr(t,n.content()),a=i.dom,s=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Hr.paste=function(t,e){var n=io?null:e.clipboardData;n&&ao(t,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ao(t,r.value,null,e):ao(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var so=function(t,e){this.slice=t,this.move=e},uo=qe.mac?"altKey":"ctrlKey";for(var lo in jr.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var r=t.state.selection,o=r.empty?null:t.posAtCoords(Ur(e));if(o&&o.pos>=r.from&&o.pos<=(r instanceof De?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(De.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var i=t.docView.nearestDesc(e.target,!0);if(!i||!i.node.type.spec.draggable||i==t.docView)return;t.dispatch(t.state.tr.setSelection(De.create(t.state.doc,i.posBefore)))}var a=t.state.selection.content(),s=Tr(t,a),u=s.dom,l=s.text;e.dataTransfer.clearData(),e.dataTransfer.setData(io?"Text":"text/html",u.innerHTML),e.dataTransfer.effectAllowed="copyMove",io||e.dataTransfer.setData("text/plain",l),t.dragging=new so(a,!e[uo])}},jr.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},Hr.dragover=Hr.dragenter=function(t,e){return e.preventDefault()},Hr.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var r=t.posAtCoords(Ur(e));if(r){var o=t.state.doc.resolve(r.pos);if(o){var i=n&&n.slice;i?t.someProp("transformPasted",(function(t){i=t(i)})):i=Mr(t,e.dataTransfer.getData(io?"Text":"text/plain"),io?null:e.dataTransfer.getData("text/html"),!1,o);var a=n&&!e[uo];if(t.someProp("handleDrop",(function(n){return n(t,e,i||I.empty,a)})))e.preventDefault();else if(i){e.preventDefault();var s=i?function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var u=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(u>0?1:0),c=r.node(s),p=!1;if(1==a)p=c.canReplace(l,l,o);else{var f=c.contentMatchAt(l).findWrapping(o.firstChild.type);p=f&&c.canReplaceWith(l,l,f[0])}if(p)return 0==u?r.pos:u<0?r.before(s+1):r.after(s+1)}return null}(t.state.doc,o.pos,i):o.pos;null==s&&(s=o.pos);var u=t.state.tr;a&&u.deleteSelection();var l=u.mapping.map(s),c=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,p=u.doc;if(c?u.replaceRangeWith(l,l,i.content.firstChild):u.replaceRange(l,l,i),!u.doc.eq(p)){var f=u.doc.resolve(l);if(c&&De.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))u.setSelection(new De(f));else{var h=u.mapping.map(s);u.mapping.maps[u.mapping.maps.length-1].forEach((function(t,e,n,r){return h=r})),u.setSelection(sr(t,f,u.doc.resolve(h)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}}}}}},jr.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&tr(t)}),20))},jr.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},jr.beforeinput=function(t,e){if(qe.chrome&&qe.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,an(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Hr)jr[lo]=Hr[lo];function co(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var po=function(t,e){this.spec=e||yo,this.side=this.spec.side||0,this.toDOM=t};po.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new mo(i-n,i-n,this)},po.prototype.valid=function(){return!0},po.prototype.eq=function(t){return this==t||t instanceof po&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&co(this.spec,t.spec))};var fo=function(t,e){this.spec=e||yo,this.attrs=t};fo.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new mo(o,i,this)},fo.prototype.valid=function(t,e){return e.from<e.to},fo.prototype.eq=function(t){return this==t||t instanceof fo&&co(this.attrs,t.attrs)&&co(this.spec,t.spec)},fo.is=function(t){return t.type instanceof fo};var ho=function(t,e){this.spec=e||yo,this.attrs=t};ho.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new mo(o.pos-n,i.pos-n,this)},ho.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},ho.prototype.eq=function(t){return this==t||t instanceof ho&&co(this.attrs,t.attrs)&&co(this.spec,t.spec)};var mo=function(t,e,n){this.from=t,this.to=e,this.type=n},vo={spec:{configurable:!0},inline:{configurable:!0}};mo.prototype.copy=function(t,e){return new mo(t,e,this.type)},mo.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},mo.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},mo.widget=function(t,e,n){return new mo(t,t,new po(e,n))},mo.inline=function(t,e,n,r){return new mo(t,e,new fo(n,r))},mo.node=function(t,e,n,r){return new mo(t,e,new ho(n,r))},vo.spec.get=function(){return this.type.spec},vo.inline.get=function(){return this.type instanceof fo},Object.defineProperties(mo.prototype,vo);var go=[],yo={},bo=function(t,e){this.local=t&&t.length?t:go,this.children=e&&e.length?e:go};bo.create=function(t,e){return e.length?Eo(e,t,0,yo):wo},bo.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},bo.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=e&&a.to>=t&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){var u=this.children[s]+1;this.children[s+2].findInner(t-u,e-u,n,r+u,o)}},bo.prototype.map=function(t,e,n){return this==wo||0==t.maps.length?this:this.mapInner(t,e,0,0,n||yo)},bo.prototype.mapInner=function(t,e,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(t,n,r);s&&s.type.valid(e,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(t,e,n,r,o,i,a){for(var s=t.slice(),u=function(t,e,n,r){for(var a=0;a<s.length;a+=3){var u=s[a+1],l=void 0;-1==u||t>u+i||(e>=s[a]+i?s[a+1]=-1:n>=o&&(l=r-n-(e-t))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(u);for(var c=!1,p=0;p<s.length;p+=3)if(-1==s[p+1]){var f=n.map(t[p]+i),h=f-o;if(h<0||h>=r.content.size){c=!0;continue}var d=n.map(t[p+1]+i,-1)-o,m=r.content.findIndex(h),v=m.index,g=m.offset,y=r.maybeChild(v);if(y&&g==h&&g+y.nodeSize==d){var b=s[p+2].mapInner(n,y,f+1,t[p]+i+1,a);b!=wo?(s[p]=h,s[p+1]=d,s[p+2]=b):(s[p+1]=-2,c=!0)}else c=!0}if(c){var w=Eo(function(t,e,n,r,o,i,a){function s(t,e){for(var i=0;i<t.local.length;i++){var u=t.local[i].map(r,o,e);u?n.push(u):a.onRemove&&a.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)s(t.children[l+2],t.children[l]+e+1)}for(var u=0;u<t.length;u+=3)-1==t[u+1]&&s(t[u+2],e[u]+i+1);return n}(s,t,e||[],n,o,i,a),r,0,a);e=w.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var x=0,C=0;x<w.children.length;x+=3){for(var D=w.children[x];C<s.length&&s[C]<D;)C+=3;s.splice(C,0,w.children[x],w.children[x+1],w.children[x+2])}}return new bo(e&&e.sort(To),s)}(this.children,i,t,e,n,r,o):i?new bo(i.sort(To)):wo},bo.prototype.add=function(t,e){return e.length?this==wo?bo.create(t,e):this.addInner(t,e,0):this},bo.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,a){var s,u=a+n;if(s=Co(e,t,u)){for(r||(r=o.children.slice());i<r.length&&r[i]<a;)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(t,s,u+1):r.splice(i,0,a,a+t.nodeSize,Eo(s,t,u+1,yo)),i+=3}}));for(var a=xo(i?Do(e):e,-n),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||a.splice(s--,1);return new bo(a.length?this.local.concat(a).sort(To):this.local,r||this.children)},bo.prototype.remove=function(t){return 0==t.length||this==wo?this:this.removeInner(t,0)},bo.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+e,s=n[o+1]+e,u=0,l=void 0;u<t.length;u++)(l=t[u])&&l.from>a&&l.to<s&&(t[u]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var c=n[o+2].removeInner(i,a+1);c!=wo?n[o+2]=c:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,f=void 0;p<t.length;p++)if(f=t[p])for(var h=0;h<r.length;h++)r[h].eq(f,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new bo(r,n):wo},bo.prototype.forChild=function(t,e){if(this==wo)return this;if(e.isLeaf)return bo.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,a=i+e.content.size,s=0;s<this.local.length;s++){var u=this.local[s];if(u.from<a&&u.to>i&&u.type instanceof fo){var l=Math.max(i,u.from)-i,c=Math.min(a,u.to)-i;l<c&&(r||(r=[])).push(u.copy(l,c))}}if(r){var p=new bo(r.sort(To));return n?new ko([p,n]):p}return n||wo},bo.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof bo)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},bo.prototype.locals=function(t){return Mo(this.localsInner(t))},bo.prototype.localsInner=function(t){if(this==wo)return go;if(t.inlineContent||!this.local.some(fo.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof fo||e.push(this.local[n]);return e};var wo=new bo;bo.empty=wo,bo.removeOverlap=Mo;var ko=function(t){this.members=t};function xo(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new mo(o.from+e,o.to+e,o.type))}return n}function Co(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,a=void 0;i<t.length;i++)(a=t[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),t[i]=null);return o}function Do(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Eo(t,e,n,r){var o=[],i=!1;e.forEach((function(e,a){var s=Co(t,e,a+n);if(s){i=!0;var u=Eo(s,e,n+a+1,r);u!=wo&&o.push(a,a+e.nodeSize,u)}}));for(var a=xo(i?Do(t):t,-n).sort(To),s=0;s<a.length;s++)a[s].type.valid(e,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new bo(a,o):wo}function To(t,e){return t.from-e.from||t.to-e.to}function Mo(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Ao(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Ao(e,o+1,i.copy(r.to,i.to)))}}return e}function Ao(t,e,n){for(;e<t.length&&To(n,t[e])>0;)e++;t.splice(e,0,n)}function So(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=wo&&e.push(r)})),t.cursorWrapper&&e.push(bo.create(t.state.doc,[t.cursorWrapper.deco])),ko.from(e)}ko.prototype.forChild=function(t,e){if(e.isLeaf)return bo.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=wo&&(o instanceof ko?n=n.concat(o.members):n.push(o))}return ko.from(n)},ko.prototype.eq=function(t){if(!(t instanceof ko)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},ko.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Mo(n?e:e.sort(To)):go},ko.from=function(t){switch(t.length){case 0:return wo;case 1:return t[0];default:return new ko(t)}};var Oo=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=_o(this),this.markCursor=null,this.cursorWrapper=null,Io(this),this.nodeViews=Fo(this),this.docView=Bn(this.state.doc,Lo(this),So(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Pr(t,(function(e,n,r,o){return Cr(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=jr[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||Vr(t,e)||!t.editable&&e.type in Hr||n(t,e)})};for(var n in jr)e(n);qe.safari&&t.dom.addEventListener("input",(function(){return null})),qr(t)}(this),this.pluginViews=[],this.updatePluginViews()},No={props:{configurable:!0},root:{configurable:!0}};function Lo(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[mo.node(0,t.state.doc.content.size,e)]}function Io(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:mo.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _o(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Fo(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}No.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Oo.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qr(this),this._props=t,this.updateStateInner(t.state,!0)},Oo.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Oo.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Oo.prototype.updateStateInner=function(t,e){var n=this,r=this.state,o=!1,i=!1;if(t.storedMarks&&this.composing&&(ro(this),i=!0),this.state=t,e){var a=Fo(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(a,this.nodeViews)&&(this.nodeViews=a,o=!0),qr(this)}this.editable=_o(this),Io(this);var s=So(this),u=Lo(this),l=e?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",c=o||!this.docView.matchesNode(t.doc,u,s);!c&&t.selection.eq(r.selection)||(i=!0);var p,f,h,d,m,v,g,y,b,w,k,x="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=t.root.elementFromPoint(i,a);if(s!=t.dom&&t.dom.contains(s)){var u=s.getBoundingClientRect();if(u.top>=o-20){e=s,n=u.top;break}}}return{refDOM:e,refTop:n,stack:pn(t.dom)}}(this);if(i){this.domObserver.stop();var C=c&&(qe.ie||qe.chrome)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&(d=r.selection,m=t.selection,v=Math.min(d.$anchor.sharedDepth(d.head),m.$anchor.sharedDepth(m.head)),d.$anchor.start(v)!=m.$anchor.start(v));if(c){var D=qe.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(t.doc,u,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Bn(t.doc,u,s,this.dom,this)),D&&!this.trackWrites&&(C=!0)}C||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(p=this,f=p.docView.domFromPos(p.state.selection.anchor,0),h=p.root.getSelection(),Ye(f.node,f.offset,h.anchorNode,h.anchorOffset)))?tr(this,C):(ir(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var E=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof De?cn(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),E):cn(this,this.coordsAtPos(t.selection.head,1),E))}else x&&(y=(g=x).refDOM,b=g.refTop,w=g.stack,k=y?y.getBoundingClientRect().top:0,fn(w,0==k?0:k-b))},Oo.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},Oo.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Oo.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[t];if(null!=a&&(n=e?e(a):a))return n}},Oo.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Oo.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(hn)return t.focus(hn);var e=pn(t);t.focus(null==hn?{get preventScroll(){return hn={preventScroll:!0},!0}}:void 0),hn||(hn=!1,fn(e,0))}(this.dom),tr(this),this.domObserver.start()},No.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Oo.prototype.posAtCoords=function(t){return gn(this,t)},Oo.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),wn(this,t,e)},Oo.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},Oo.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Oo.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Oo.prototype.endOfTextblock=function(t,e){return An(this,e||this.state,t)},Oo.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],So(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Oo.prototype.dispatchEvent=function(t){return function(t,e){Vr(t,e)||!jr[e.type]||!t.editable&&e.type in Hr||jr[e.type](t,e)}(this,t)},Oo.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Oo.prototype,No);for(var Bo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Ro={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Po="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),zo="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),jo="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Ho="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),$o="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),qo=Po&&(Ho||+Po[1]<57)||jo&&Ho,Vo=0;Vo<10;Vo++)Bo[48+Vo]=Bo[96+Vo]=String(Vo);for(Vo=1;Vo<=24;Vo++)Bo[Vo+111]="F"+Vo;for(Vo=65;Vo<=90;Vo++)Bo[Vo]=String.fromCharCode(Vo+32),Ro[Vo]=String.fromCharCode(Vo);for(var Uo in Bo)Ro.hasOwnProperty(Uo)||(Ro[Uo]=Bo[Uo]);var Wo="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Jo(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);Wo?o=!0:n=!0}}return e&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function Ko(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function Zo(t){return new ze({props:{handleKeyDown:Go(t)}})}function Go(t){var e=function(t){var e=Object.create(null);for(var n in t)e[Jo(n)]=t[n];return e}(t);return function(t,n){var r,o=function(t){var e=!(qo&&(t.ctrlKey||t.altKey||t.metaKey)||(zo||$o)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?Ro:Bo)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),i=1==o.length&&" "!=o,a=e[Ko(o,n,!i)];if(a&&a(t.state,t.dispatch,t))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=Bo[n.keyCode])&&r!=o){var s=e[Ko(r,n,!0)];if(s&&s(t.state,t.dispatch,t))return!0}else if(i&&n.shiftKey){var u=e[Ko(o,n,!0)];if(u&&u(t.state,t.dispatch,t))return!0}return!1}}function Xo(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function Qo(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function Yo(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ti(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=ei(r);if(!o)return!1;var i=o.nodeAfter;if(ai(t,o,e))return!0;if(0==r.parent.content.size&&(Qo(i,"start")||De.isSelectable(i))){if(e){var a=t.tr.deleteRange(r.before(),r.after());a.setSelection(Qo(i,"start")?be.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):De.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}function ei(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function ni(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function ri(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function oi(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=ri(i.contentMatchAt(a));if(!i.canReplaceWith(a,a,s))return!1;if(e){var u=r.after(),l=t.tr.replaceWith(u,u,s.createAndFill());l.setSelection(be.near(l.doc.resolve(u),1)),e(l.scrollIntoView())}return!0}function ii(t,e){return e&&e(t.tr.setSelection(new Te(t.doc))),!0}function ai(t,e,n){var r,o,i=e.nodeBefore,a=e.nodeAfter;if(i.type.spec.isolating||a.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(i,i+1)||!o.isTextblock&&!oe(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;var s=e.parent.canReplace(e.index(),e.index()+1);if(s&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var u=e.pos+a.nodeSize,l=T.empty,c=r.length-1;c>=0;c--)l=T.from(r[c].create(null,l));l=T.from(i.copy(l));var p=t.tr.step(new Qt(e.pos-1,u,e.pos,u,new I(l,1,0),r.length,!0)),f=u+2*r.length;oe(p.doc,f)&&p.join(f),n(p.scrollIntoView())}return!0}var h=be.findFrom(e,1),d=h&&h.$from.blockRange(h.$to),m=d&&ee(d);if(null!=m&&m>=e.depth)return n&&n(t.tr.lift(d,m).scrollIntoView()),!0;if(s&&a.isTextblock&&Qo(i,"end")){for(var v=i,g=[];g.push(v),!v.isTextblock;)v=v.lastChild;if(v.canReplace(v.childCount,v.childCount,a.content)){if(n){for(var y=T.empty,b=g.length-1;b>=0;b--)y=T.from(g[b].copy(y));n(t.tr.step(new Qt(e.pos-g.length,e.pos+a.nodeSize,e.pos+1,e.pos+a.nodeSize-1,new I(y,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function si(t,e){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),u=s&&function(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:e).contentMatch,u=r;s&&u<o;u++)s=s.matchType(n.child(u).type);return s&&s.validEnd?a:null}(r,e);return i?o.map(ne).concat({type:e,attrs:n}).concat(i.map(ne)):null}(s,t,e);return!!u&&(r&&r(n.tr.wrap(s,u).scrollIntoView()),!0)}}function ui(t,e){return function(n,r){var o=n.selection,i=o.from,a=o.to,s=!1;return n.doc.nodesBetween(i,a,(function(r,o){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)s=!0;else{var i=n.doc.resolve(o),a=i.index();s=i.parent.canReplaceWith(a,a+1,t)}})),!!s&&(r&&r(n.tr.setBlockType(i,a,t,e).scrollIntoView()),!0)}}function li(t,e){return function(n,r){var o=n.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!function(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,a=o.$to,s=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,a.pos,(function(t){if(s)return!1;s=t.inlineContent&&t.type.allowsMarkType(n)})),s)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,s,t))return!1;if(r)if(a)t.isInSet(n.storedMarks||a.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var u=!1,l=n.tr,c=0;!u&&c<s.length;c++){var p=s[c],f=p.$from,h=p.$to;u=n.doc.rangeHasMark(f.pos,h.pos,t)}for(var d=0;d<s.length;d++){var m=s[d],v=m.$from,g=m.$to;if(u)l.removeMark(v.pos,g.pos,t);else{var y=v.pos,b=g.pos,w=v.nodeAfter,k=g.nodeBefore,x=w&&w.isText?/^\s*/.exec(w.text)[0].length:0,C=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;y+x<b&&(y+=x,b-=C),l.addMark(y,b,t.create(e))}}r(l.scrollIntoView())}return!0}}function ci(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var pi=ci(Xo,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;var o=Yo(r);if(!o){var i=r.blockRange(),a=i&&ee(i);return null!=a&&(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(!s.type.spec.isolating&&ai(t,o,e))return!0;if(0==r.parent.content.size&&(Qo(s,"end")||De.isSelectable(s))){if(e){var u=t.tr.deleteRange(r.before(),r.after());u.setSelection(Qo(s,"end")?be.findFrom(u.doc.resolve(u.mapping.map(o.pos,-1)),-1):De.create(u.doc,o.pos-s.nodeSize)),e(u.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;i=Yo(o)}var a=i&&i.nodeBefore;return!(!a||!De.isSelectable(a))&&(e&&e(t.tr.setSelection(De.create(t.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)})),fi=ci(Xo,ti,(function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;i=ei(o)}var a=i&&i.nodeAfter;return!(!a||!De.isSelectable(a))&&(e&&e(t.tr.setSelection(De.create(t.doc,i.pos)).scrollIntoView()),!0)})),hi={Enter:ci(ni,(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(n instanceof Te||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=ri(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=t.tr.insert(a,i.createAndFill());s.setSelection(xe.create(s.doc,a+1)),e(s.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(re(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&ee(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(t.selection instanceof De&&t.selection.node.isBlock)return!(!r.parentOffset||!re(t.doc,r.pos))&&(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(e){var i=o.parentOffset==o.parent.content.size,a=t.tr;(t.selection instanceof xe||t.selection instanceof Te)&&a.deleteSelection();var s=0==r.depth?null:ri(r.node(-1).contentMatchAt(r.indexAfter(-1))),u=i&&s?[{type:s}]:null,l=re(a.doc,a.mapping.map(r.pos),1,u);if(u||l||!re(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])||(u=[{type:s}],l=!0),l&&(a.split(a.mapping.map(r.pos),1,u),!i&&!r.parentOffset&&r.parent.type!=s)){var c=a.mapping.map(r.before()),p=a.doc.resolve(c);r.node(-1).canReplaceWith(p.index(),p.index()+1,s)&&a.setNodeMarkup(a.mapping.map(r.before()),s)}e(a.scrollIntoView())}return!0})),"Mod-Enter":oi,Backspace:pi,"Mod-Backspace":pi,Delete:fi,"Mod-Delete":fi,"Mod-a":ii},di={"Ctrl-h":hi.Backspace,"Alt-Backspace":hi["Mod-Backspace"],"Ctrl-d":hi.Delete,"Ctrl-Alt-Backspace":hi["Mod-Delete"],"Alt-Delete":hi["Mod-Delete"],"Alt-d":hi["Mod-Delete"]};for(var mi in hi)di[mi]=hi[mi];var vi=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?di:hi,gi=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,o){var i=n;if(e[1]){var a=e[0].lastIndexOf(e[1]);i+=e[0].slice(a+e[1].length);var s=(r+=a)-o;s>0&&(i=e[0].slice(a-s,a)+i,r=o)}return t.tr.insertText(i,r,o)}):e};function yi(t,e,n,r,o,i){if(t.composing)return!1;var a=t.state,s=a.doc.resolve(e);if(s.parent.type.spec.code)return!1;for(var u=s.parent.textBetween(Math.max(0,s.parentOffset-500),s.parentOffset,null,"￼")+r,l=0;l<o.length;l++){var c=o[l].match.exec(u),p=c&&o[l].handler(a,c,e-(c[0].length-r.length),n);if(p)return t.dispatch(p.setMeta(i,{transform:p,from:e,to:n,text:r})),!0}return!1}new gi(/--$/,"—"),new gi(/\.\.\.$/,"…"),new gi(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new gi(/"$/,"”"),new gi(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new gi(/'$/,"’");var bi=function(){};bi.prototype.append=function(t){return t.length?(t=bi.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},bi.prototype.prepend=function(t){return t.length?bi.from(t).append(this):this},bi.prototype.appendInner=function(t){return new ki(this,t)},bi.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?bi.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},bi.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},bi.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},bi.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},bi.from=function(t){return t instanceof bi?t:t&&t.length?new wi(t):bi.empty};var wi=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=200)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=200)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(bi);bi.empty=new wi([]);var ki=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(bi),xi=bi,Ci=function(t,e){this.items=t,this.eventCount=e};Ci.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var a,s,u=t.tr,l=[],c=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void c.push(t);if(r){c.push(new Di(t.map));var p,f=t.step.map(r.slice(o));f&&u.maybeStep(f).doc&&(p=u.mapping.maps[u.mapping.maps.length-1],l.push(new Di(p,null,null,l.length+c.length))),o--,p&&r.appendMap(p,o)}else u.maybeStep(t.step);return t.selection?(a=r?t.selection.map(r.slice(o)):t.selection,s=new Ci(n.items.slice(0,i).append(c.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:u,selection:a}},Ci.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,a=this.items,s=!r&&a.length?a.get(a.length-1):null,u=0;u<t.steps.length;u++){var l,c=t.steps[u].invert(t.docs[u]),p=new Di(t.mapping.maps[u],c,e);(l=s&&s.merge(p))&&(p=l,u?o.pop():a=a.slice(0,a.length-1)),o.push(p),e&&(i++,e=null),r||(s=p)}var f,h,d,m=i-n.depth;return m>Ti&&(h=m,(f=a).forEach((function(t,e){if(t.selection&&0==h--)return d=e,!1})),a=f.slice(d),i-=m),new Ci(a.append(o),i)},Ci.prototype.remapping=function(t,e){var n=new qt;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},Ci.prototype.addMaps=function(t){return 0==this.eventCount?this:new Ci(this.items.append(t.map((function(t){return new Di(t)}))),this.eventCount)},Ci.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach((function(t){t.selection&&a--}),r);var s=e;this.items.forEach((function(e){var r=o.getMirror(--s);if(null!=r){i=Math.min(i,r);var u=o.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(o.slice(s+1,r));c&&a++,n.push(new Di(u,l,c))}else n.push(new Di(u))}}),r);for(var u=[],l=e;l<i;l++)u.push(new Di(o.maps[l]));var c=this.items.slice(0,r).append(u).append(n),p=new Ci(c,a);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-n.length)),p},Ci.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},Ci.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,a){if(a>=t)r.push(i),i.selection&&o++;else if(i.step){var s=i.step.map(e.slice(n)),u=s&&s.getMap();if(n--,u&&e.appendMap(u,n),s){var l=i.selection&&i.selection.map(e.slice(n));l&&o++;var c,p=new Di(u.invert(),s,l),f=r.length-1;(c=r.length&&r[f].merge(p))?r[f]=c:r.push(p)}}else i.map&&n--}),this.items.length,0),new Ci(xi.from(r.reverse()),o)},Ci.empty=new Ci(xi.empty,0);var Di=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};Di.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new Di(e.getMap().invert(),e,this.selection)}};var Ei=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},Ti=20;function Mi(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function Ai(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function Si(t,e,n,r){var o=Li(e),i=Ii.get(e).spec.config,a=(r?t.undone:t.done).popEvent(e,o);if(a){var s=a.selection.resolve(a.transform.doc),u=(r?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,o),l=new Ei(r?u:a.remaining,r?a.remaining:u,null,0);n(a.transform.setSelection(s).setMeta(Ii,{redo:r,historyState:l}).scrollIntoView())}}var Oi=!1,Ni=null;function Li(t){var e=t.plugins;if(Ni!=e){Oi=!1,Ni=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Oi=!0;break}}return Oi}var Ii=new $e("history"),_i=new $e("closeHistory");function Fi(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new ze({key:Ii,state:{init:function(){return new Ei(Ci.empty,Ci.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(Ii);if(i)return i.historyState;n.getMeta(_i)&&(t=new Ei(t.done,t.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(a&&a.getMeta(Ii))return a.getMeta(Ii).redo?new Ei(t.done.addTransform(n,null,r,Li(e)),t.undone,Mi(n.mapping.maps[n.steps.length-1]),t.prevTime):new Ei(t.done,t.undone.addTransform(n,null,r,Li(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Ei(t.done.rebased(n,o),t.undone.rebased(n,o),Ai(t.prevRanges,n.mapping),t.prevTime):new Ei(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ai(t.prevRanges,n.mapping),t.prevTime);var s=0==t.prevTime||!a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),u=a?Ai(t.prevRanges,n.mapping):Mi(n.mapping.maps[n.steps.length-1]);return new Ei(t.done.addTransform(n,s?e.selection.getBookmark():null,r,Li(e)),Ci.empty,u,n.time)}(n,r,e,t)}},config:t})}function Bi(t,e){var n=Ii.getState(t);return!(!n||0==n.done.eventCount)&&(e&&Si(n,t,e,!1),!0)}function Ri(t,e){var n=Ii.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&Si(n,t,e,!0),!0)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Pi=function(t,e){return(Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function zi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Pi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ji=function(){return(ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Hi(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}function $i(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var qi=function(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break};var Vi=function(t,e){var n,r,o,i,a=Object.prototype.hasOwnProperty;for(o=1,i=arguments.length;o<i;o+=1)for(r in n=arguments[o])a.call(n,r)&&(t[r]=n[r]);return t};var Ui=function(t){return"string"==typeof t||t instanceof String};var Wi=function(t){return t instanceof Array};var Ji=function(t,e,n){var r=0,o=t.length;for(n=n||null;r<o&&!1!==e.call(n,t[r],r,t);r+=1);};var Ki=function(t,e,n){Wi(t)?Ji(t,e,n):qi(t,e,n)};var Zi=function(t,e,n){var r=t.style;Ui(e)?r[e]=n:Ki(e,(function(t,e){r[e]=t}))};var Gi=function(t,e,n){var r,o;if(n=n||0,!Wi(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,r=n;n>=0&&r<o;r+=1)if(e[r]===t)return r;return-1};var Xi=function(t){return void 0===t};var Qi=function(t){return t&&t.className?Xi(t.className.baseVal)?t.className:t.className.baseVal:""};var Yi=function(t,e){e=(e=Wi(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),Xi(t.className.baseVal)?t.className=e:t.className.baseVal=e};var ta=function(t){var e,n=Array.prototype.slice.call(arguments,1),r=t.classList,o=[];r?Ki(n,(function(e){t.classList.add(e)})):((e=Qi(t))&&(n=[].concat(e.split(/\s+/),n)),Ki(n,(function(t){Gi(t,o)<0&&o.push(t)})),Yi(t,o))};var ea=function(t){var e,n,r=Array.prototype.slice.call(arguments,1),o=t.classList;o?Ji(r,(function(t){o.remove(t)})):(e=Qi(t).split(/\s+/),n=[],Ji(e,(function(t){Gi(t,r)<0&&n.push(t)})),Yi(t,n))};var na=function(t){return"number"==typeof t||t instanceof Number};var ra=function(t){return null===t};var oa=function(t,e){var n=document.createElement("img"),r="";return qi(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n};var ia=function(t,e){var n=location.hostname,r="TOAST UI "+t+" for "+n+": Statistics",o=window.localStorage.getItem(r);(Xi(window.tui)||!1!==window.tui.usageStatistics)&&(o&&!function(t){return(new Date).getTime()-t>6048e5}(o)||(window.localStorage.setItem(r,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||oa("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})}),1e3)))};function aa(t,e){return-1!==t.indexOf(e)}/Mac/.test(navigator.platform);var sa=["rel","target","hreflang","type"];function ua(t){if(!t)return null;var e={};return sa.forEach((function(n){Xi(t[n])||(e[n]=t[n])})),e}function la(t,e){for(var n="",r=0;r<e;r+=1)n+=t;return n}function ca(t,e){var n=t.replace(/[`*\\~[\]]/g,"\\$&");return e?n.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\."):n}function pa(t){return ra(t)||Xi(t)}function fa(t,e){if(null===t&&t===e)return!0;if("object"!=typeof t||"object"!=typeof e||pa(t)||pa(e))return t===e;for(var n in t)if(t[n]!==e[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function ha(t){return t[t.length-1]}function da(t){return"object"==typeof t&&null!==t}function ma(t,e){var n=ji({},t);return t&&e&&Object.keys(e).forEach((function(t){da(n[t])?Array.isArray(e[t])?n[t]=va(e[t]):n.hasOwnProperty(t)?n[t]=ma(n[t],e[t]):n[t]=ga(e[t]):n[t]=e[t]})),n}function va(t){return t.map((function(t){return da(t)?Array.isArray(t)?va(t):ga(t):t}))}function ga(t){var e=Object.keys(t);return e.length?e.reduce((function(e,n){return da(t[n])?e[n]=Array.isArray(t[n])?va(t[n]):ga(t[n]):e[n]=t[n],e}),{}):t}function ya(t,e){return void 0===e&&(e={}),Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&"object"==typeof t[n]?Array.isArray(e[n])?t[n]=e[n]:ya(t[n],e[n]):t[n]=e[n]})),t}function ba(t,e){return t>e?[e,t]:[t,e]}function wa(t,e){var n=t.nodes.paragraph;return e?n.create(null,Ui(e)?t.text(e):e):n.createAndFill()}function ka(t,e,n){return t.text(e,n)}function xa(t,e,n){void 0===n&&(n=e);var r=t.doc.content.size,o=r>0?r-1:1;return xe.create(t.doc,Math.min(e,o),Math.min(n,o))}function Ca(t,e,n){var r=e.pos;return t.replaceWith(r,r,wa(n)),t.setSelection(xa(t,r+1))}function Da(t){for(var e=t.state,n=t.from,r=t.startIndex,o=t.endIndex,i=t.createText,a=e.tr,s=e.doc,u=e.schema,l=r;l<=o;l+=1){var c=s.child(l),p=c.nodeSize,f=c.textContent,h=c.content,d=i(f),m=d?ka(u,d):T.empty,v=a.mapping.map(n),g=v+h.size;a.replaceWith(v,g,m),n+=p}return a}function Ea(t,e,n,r){var o=n.length;t.split(e).delete(e-o,e).insert(t.mapping.map(e),r).setSelection(xa(t,t.mapping.map(e)-o))}function Ta(t){return t.sourcepos[0][0]}function Ma(t){return t.sourcepos[1][0]}function Aa(t){return t.sourcepos[0][1]}function Sa(t){return t.sourcepos[1][1]}function Oa(t){var e=t.type;return"strike"===e||"strong"===e||"emph"===e||"code"===e||"link"===e||"image"===e}function Na(t){return t&&("item"===t.type||"list"===t.type)}function La(t){return Na(t)&&"ordered"===t.listData.type}function Ia(t){return Na(t)&&"ordered"!==t.listData.type}function _a(t){return t&&("tableCell"===t.type||"tableDelimCell"===t.type)}function Fa(t,e,n){for(void 0===n&&(n=!0),t=n?t:t.parent;t&&"document"!==t.type;){if(e(t))return t;t=t.parent}return null}function Ba(t,e){return[t[0],t[1]+e]}function Ra(t,e){return[t[0],e]}function Pa(t){var e=t.firstChild.literal;switch(t.type){case"emph":return"*"+e+"*";case"strong":return"**"+e+"**";case"strike":return"~~"+e+"~~";case"code":return"`"+e+"`";case"link":case"image":var n=t,r=n.destination,o=n.title;return("link"===t.type?"":"!")+"["+e+"]("+r+(o?' "'+o+'"':"")+")";default:return null}}function za(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function ja(t){for(var e=[],n=t.walker(),r=null;r=n.next();){var o=r.node;"text"===o.type&&e.push(o.literal)}return e.join("")}var Ha=[],$a={},qa=/\$\$widget\d+\s/;function Va(t){var e=t.search(qa);if(-1!==e){var n=t.substring(e).replace(qa,"").replace("$$","");t=t.substring(0,e),t+=Va(n)}return t}function Ua(t,e){return"$$"+t+" "+e+"$$"}function Wa(t,e){var n=$a[t],r=n.rule;return(0,n.toDOM)(e=Va(e).match(r)[0])}function Ja(t,e,n,r){return t.concat(Ka(e,n,r))}function Ka(t,e,n){void 0===n&&(n=0);var r=[],o=(Ha[n]||{}).rule,i=n+1;if(t=Va(t),o&&o.test(t)){for(var a=void 0;-1!==(a=t.search(o));){var s=t.substring(0,a);s&&(r=Ja(r,s,e,i));var u=(t=t.substring(a)).match(o)[0],l="widget"+n;r.push(e.nodes.widget.create({info:l},e.text(Ua(l,u)))),t=t.substring(u.length)}t&&(r=Ja(r,t,e,i))}else t&&(r=n<Ha.length-1?Ja(r,t,e,i):[e.text(t)]);return r}function Za(t){for(var e,n="",r=t.walker();e=r.next();){var o=e.node;e.entering&&(o!==t&&"text"!==o.type?(n+=Pa(o),r.resumeAt(t,!1),r.next()):"text"===o.type&&(n+=o.literal))}return n}function Ga(){return{deleteSelection:function(){return Xo},selectAll:function(){return ii},undo:function(){return Bi},redo:function(){return Ri}}}var Xa=new $e("widget"),Qa=function(){function t(t){var e=this;this.popup=null,this.removeWidget=function(){e.popup&&(document.body.removeChild(e.popup),e.popup=null)},this.eventEmitter=t,this.eventEmitter.listen("blur",this.removeWidget)}return t.prototype.update=function(t){var e=Xa.getState(t.state);if(this.removeWidget(),e){var n=e.node,r=e.style,o=t.coordsAtPos(e.pos),i=o.top,a=o.left,s=o.bottom-i;Zi(n,{position:"absolute",left:a+"px",opacity:"0"}),document.body.appendChild(n),Zi(n,{top:("bottom"===r?i+s:i-n.clientHeight-s)+"px",opacity:"1"}),this.popup=n,t.focus()}},t.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},t}();var Ya=function(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],Ji(t,(function(t){e.push(t)}))}return e};function ts(t,e,n){t.emit("addImageBlobHook",e,(function(n,r){t.emit("command","addImage",{imageUrl:n,altText:r||e.name||"image"})}),n)}function es(t){var e=Ya(t).filter((function(t){return-1!==t.type.indexOf("image")}));if(1===e.length){var n=e[0];if(n)return n.getAsFile()}return null}function ns(t){var e=t.eventEmitter;return new ze({props:{handleDOMEvents:{drop:function(t,n){var r,o=null===(r=n.dataTransfer)||void 0===r?void 0:r.files;return o&&Ji(o,(function(t){return-1===t.type.indexOf("image")||(n.preventDefault(),n.stopPropagation(),ts(e,t,n.type),!1)})),!0}}}})}var rs=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function is(t){var e=document.createElement("span"),n=Wa(t.attrs.info,t.textContent);return e.className="tui-widget",e.appendChild(n),{dom:e}}function as(t){return"widget"===t.type.name}var ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(t){return{info:t.textContent.match(/\$\$(widget\d+)/)[1]}}}]}},enumerable:!1,configurable:!0}),e}(rs),us=function(){function t(t){this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=t,this.placeholder={text:""}}return t.prototype.createState=function(){return Fe.create({schema:this.schema,plugins:this.createPlugins()})},t.prototype.initEvent=function(){var t=this,e=t.eventEmitter,n=t.view,r=t.editorType;n.dom.addEventListener("focus",(function(){return e.emit("focus",r)})),n.dom.addEventListener("blur",(function(){return e.emit("blur",r)}))},t.prototype.emitChangeEvent=function(t){this.eventEmitter.emit("caretChange",this.editorType),t.docChanged&&this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(t.prototype,"defaultPlugins",{get:function(){var t,e,n=Ga(),r=n.undo,o=n.redo,i=this.createInputRules(),a=Hi(Hi([],this.keymaps),[Zo(ji({"Mod-z":r(),"Shift-Mod-z":o()},vi)),Fi(),(e=this.placeholder,new ze({props:{decorations:function(t){var n=t.doc;if(e.text&&1===n.childCount&&n.firstChild.isTextblock&&0===n.firstChild.content.size){var r=document.createElement("span");return ta(r,"placeholder"),e.className&&ta(r,e.className),r.textContent=e.text,bo.create(n,[mo.widget(1,r)])}return null}}})),(t=this.eventEmitter,new ze({key:Xa,state:{init:function(){return null},apply:function(t){return t.getMeta("widget")}},view:function(){return new Qa(t)}})),ns(this.context)]);return i?a.concat(i):a},enumerable:!1,configurable:!0}),t.prototype.createInputRules=function(){var t=Ha.map((function(t){var e=t.rule;return new gi(e,(function(t,n,r,o){var i=t.schema,a=t.tr,s=t.doc,u=n.input.match(new RegExp(e,"g")),l=s.resolve(r),c=l.parent,p=0;if(as(c)&&(c=l.node(l.depth-1)),c.forEach((function(t){return as(t)&&(p+=1)})),u.length>p){var f=ha(u),h=Ka(f,i);return a.replaceWith(o-f.length+1,o,h)}return null}))}));return t.length?function(t){var e=t.rules,n=new ze({state:{init:function(){return null},apply:function(t,e){return t.getMeta(this)||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return yi(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&yi(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}({rules:t}):null},t.prototype.createSchema=function(){return new Ct({nodes:this.specs.nodes,marks:this.specs.marks})},t.prototype.createKeymaps=function(t){return t?this.specs.keymaps():[]},t.prototype.createCommands=function(){return this.specs.commands(this.view)},t.prototype.createPluginProps=function(){var t=this;return this.extraPlugins.map((function(e){return e(t.eventEmitter)}))},t.prototype.focus=function(){var t=this;setTimeout((function(){t.view.focus(),t.view.dispatch(t.view.state.tr.scrollIntoView())}))},t.prototype.blur=function(){this.view.dom.blur()},t.prototype.destroy=function(){var t=this;this.view.destroy(),Object.keys(this).forEach((function(e){delete t[e]}))},t.prototype.moveCursorToStart=function(){var t=this.view.state.tr;this.view.dispatch(t.setSelection(xa(t,1)).scrollIntoView()),this.focus()},t.prototype.moveCursorToEnd=function(){var t=this.view.state.tr;this.view.dispatch(t.setSelection(xa(t,t.doc.content.size-1)).scrollIntoView()),this.focus()},t.prototype.setScrollTop=function(t){this.view.dom.scrollTop=t},t.prototype.getScrollTop=function(){return this.view.dom.scrollTop},t.prototype.setPlaceholder=function(t){this.placeholder.text=t,this.view.dispatch(this.view.state.tr.scrollIntoView())},t.prototype.setHeight=function(t){Zi(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){Zi(this.el,{minHeight:t+"px"})},t.prototype.getElement=function(){return this.el},t}();var ls=function(t){return t instanceof Function};function cs(t,e,n){return t.focus(),e(n)(t.state,t.dispatch,t)}var ps=function(){function t(t){this.specs=t}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this.specs.filter((function(t){return"node"===t.type})).reduce((function(t,e){var n,r=e.name,o=e.schema;return ji(ji({},t),((n={})[r]=o,n))}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marks",{get:function(){return this.specs.filter((function(t){return"mark"===t.type})).reduce((function(t,e){var n,r=e.name,o=e.schema;return ji(ji({},t),((n={})[r]=o,n))}),{})},enumerable:!1,configurable:!0}),t.prototype.commands=function(t,e){var n=this.specs.filter((function(t){return t.commands})).reduce((function(e,n){var r={},o=n.commands();return ls(o)?r[n.name]=function(e){return cs(t,o,e)}:Object.keys(o).forEach((function(e){r[e]=function(n){return cs(t,o[e],n)}})),ji(ji({},e),r)}),{}),r=Ga();return Object.keys(r).forEach((function(e){n[e]=function(n){return cs(t,r[e],n)}})),e&&Object.keys(e).forEach((function(r){n[r]=function(n){return cs(t,e[r],n)}})),n},t.prototype.keymaps=function(){return this.specs.filter((function(t){return t.keymaps})).map((function(t){return t.keymaps()})).map((function(t){return Zo(t)}))},t.prototype.setContext=function(t){this.specs.forEach((function(e){e.setContext(t)}))},t}();var fs=function(t,e){var n;return t.classList?t.classList.contains(e):(n=Qi(t).split(/\s+/),Gi(e,n)>-1)},hs=Element.prototype,ds=hs.matches||hs.webkitMatchesSelector||hs.mozMatchesSelector||hs.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return Gi(this,Ya(e.querySelectorAll(t)))>-1};var ms=function(t,e){return ds.call(t,e)};function vs(t,e,n){var r=parseInt(t.left,10),o=parseInt(t.top,10),i=parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10),a=parseInt(t.height,10)+parseInt(t.paddingTop,10)+parseInt(t.paddingBottom,10);return e>=r&&e<=r+i&&n>=o&&n<=o+a}function gs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return"toastui-editor-"+t})).join(" ")}function ys(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return"toastui-editor-md-"+t})).join(" ")}function bs(t){return t&&t.nodeType===Node.ELEMENT_NODE}function ws(t,e){var n=Ya(t.querySelectorAll(e));return n.length?n:[]}function ks(t){t.parentNode&&t.parentNode.removeChild(t)}function xs(t,e,n){Xi(n)&&(n=!fs(t,e)),(n?ta:ea)(t,e)}function Cs(t,e){var n=document.createElement("div");Ui(t)?n.innerHTML=t:n.appendChild(t);var r=n.firstChild;return e&&e.appendChild(r),r}function Ds(t){var e=window.getComputedStyle(t);return["margin-left","margin-right"].reduce((function(t,n){return t+parseInt(e.getPropertyValue(n),10)}),0)+t.offsetWidth}function Es(t,e){var n;for(n=Ui(e)?function(t){return ms(t,e)}:function(t){return t===e};t&&t!==document;){if(bs(t)&&n(t))return t;t=t.parentNode}return null}function Ts(t,e){for(var n=0,r=0;t&&t!==e;){if(n+=t.offsetTop,r+=t.offsetLeft,t.offsetParent===e.offsetParent)break;t=t.offsetParent}return{offsetTop:n,offsetLeft:r}}function Ms(t,e){Object.keys(t).forEach((function(n){t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)}))}function As(t){var e=t.from,n=t.to;return t instanceof Te?[e+1,n-1]:[e,n]}function Ss(t,e,n){void 0===n&&(n=1);var r=0;return t.forEach((function(t,o){as(t)&&o+2<e&&(r+=2*n)})),r}function Os(t,e,n){void 0===n&&(n=e);var r=e===n,o=t.resolve(e),i=function(t,e,n){var r=n.content,o=r.childCount,i=Math.min(r.findIndex(t).index+1,o);return[i,t===e?i:Math.min(r.findIndex(e).index+1,o)]}(e,n,t),a=o.start(1),s=a;if(!r){var u=t.resolve(n===t.content.size?n-1:n);s=u.start(),u.pos===t.content.size&&(n=t.content.size-2)}var l=Math.max(e-a+1,1),c=Math.max(n-s+1,1);return[[i[0],l+Ss(t.child(i[0]-1),l,-1)],[i[1],c+Ss(t.child(i[1]-1),c,-1)]]}function Ns(t,e){for(var n=[],r=0,o=0;r<e;r+=1){var i=t.child(r);n[r]=o,o+=i.nodeSize}return n}function Ls(t,e,n){var r=Ns(t,n[0]),o=e[0]-1,i=n[0]-1,a=t.child(o),s=t.child(i),u=r[o],l=r[i];return u+=e[1]+Ss(a,e[1]-1),l+=n[1]+Ss(s,n[1]-1),[u,Math.min(l,t.content.size)]}function Is(t){var e=t.$from,n=t.$to,r=t.from,o=t.to,i=e.doc;return t instanceof Te&&(e=i.resolve(r+1),n=i.resolve(o-1)),0===e.depth&&(n=e=i.resolve(r-1)),{startFromOffset:e.start(1),endFromOffset:n.start(1),startToOffset:e.end(1),endToOffset:n.end(1),startIndex:e.index(0),endIndex:n.index(0),from:e.pos,to:n.pos}}function _s(t,e){for(var n=1,r=1,o=0,i=0;o<t.childCount;o+=1){var a=t.child(o).nodeSize;if(n=i+1,r=i+a-1,o===e)break;i+=a}return{startOffset:n,endOffset:r}}var Fs="delimiter",Bs="markedText",Rs={strong:2,emph:1,strike:2};function Ps(t,e,n,r){return{start:t,end:e,spec:{type:n,attrs:r}}}function zs(t,e,n){var r=t.type,o=Ba(e,Rs[r]),i=Ba(n,-Rs[r]);return[Ps(o,i,r),Ps(e,o,Fs),Ps(i,n,Fs)]}function js(t,e,n,r){return[Ps(t,e,"link"),Ps(Ra(t,n[1]+1),Ra(e,r),"link",{desc:!0}),Ps(Ra(e,r+2),Ba(e,-1),"link",{url:!0})]}function Hs(t,e,n,r){var o={start:e,end:n,spec:{attrs:{className:r+"-line-background",codeStart:e[0],codeEnd:n[0]}},lineBackground:!0};return"item"!==t.type&&"blockQuote"!==t.type?[ji(ji({},o),{end:e,spec:{attrs:{className:r+"-line-background start"}}}),ji(ji({},o),{start:[Math.min(e[0]+1,n[0]),e[1]]})]:null}function $s(t,e){for(var n=[];t;){var r=t.type;"paragraph"!==r&&"codeBlock"!==r||n.push(Ps([Ta(t),Aa(t)-1],[Ma(t),Sa(t)+1],e)),t=t.next}return n}var qs={heading:function(t,e,n){var r=t.level,o=t.headingType,i=[Ps(e,n,"heading",{level:r})];return"atx"===o?i.push(Ps(e,Ba(e,r),Fs)):i.push(Ps(Ra(n,0),n,"heading",{seText:!0})),i},strong:zs,emph:zs,strike:zs,link:function(t,e,n){var r=t.lastChild,o=t.extendedAutolink,i=r?Sa(r)+1:2;return o?[Ps(e,n,"link",{desc:!0})]:js(e,n,e,i)},image:function(t,e,n){var r=t.lastChild,o=r?Sa(r)+1:3,i=Ba(e,1);return Hi([Ps(e,i,"meta")],js(e,n,i,o))},code:function(t,e,n){var r=t.tickCount,o=Ba(e,r),i=Ba(n,-r);return[Ps(e,n,"code"),Ps(e,o,"code",{start:!0}),Ps(o,i,"code",{marked:!0}),Ps(i,n,"code",{end:!0})]},codeBlock:function(t,e,n,r){var o=t.fenceOffset,i=t.fenceLength,a=t.fenceChar,s=t.info,u=t.infoPadding,l=t.parent,c=o+i,p=[Ps(Ra(e,1),n,"codeBlock")];a&&p.push(Ps(e,Ba(e,c),Fs)),s&&p.push(Ps(Ba(e,i),Ba(e,i+u+s.length),"meta")),new RegExp("^(\\s{0,4})("+a+"{"+i+",})").test(r)&&p.push(Ps(Ra(n,1),n,Fs));var f=Hs(l,e,n,"code-block");return f?p.concat(f):p},blockQuote:function(t,e,n){var r=t.parent&&"blockQuote"!==t.parent.type?[Ps(e,n,"blockQuote")]:[];if(t.firstChild){var o=[];"paragraph"===t.firstChild.type?o=function(t){for(var e=[];t;)e.push(Ps([Ta(t),Aa(t)],[Ma(t),Sa(t)+1],Bs)),t=t.next;return e}(t.firstChild.firstChild):"list"===t.firstChild.type&&(o=$s(t.firstChild,Bs)),r=Hi(Hi([],r),o)}return r},item:function(t,e){var n=t.listData,r=n.padding,o=n.task,i=function(t){for(var e=0;t.parent.parent&&"item"===t.parent.parent.type;)t=t.parent.parent,e+=1;return["listItem",ji(ji({},[{odd:!0},{even:!0}][e%2]),{listStyle:!0})]}(t),a=[Ps.apply(void 0,Hi([e,Ba(e,r)],i))];return o&&(a.push(Ps(Ba(e,r),Ba(e,r+3),"taskDelimiter")),a.push(Ps(Ba(e,r+1),Ba(e,r+2),"meta"))),a.concat($s(t.firstChild,Bs))},customBlock:function(t,e,n){var r=t,o=r.offset,i=r.syntaxLength,a=r.info,s=r.parent,u=o+i,l=[Ps(Ra(e,1),n,"customBlock")];l.push(Ps(e,Ba(e,u),Fs)),a&&l.push(Ps(Ba(e,2),Ba(e,i+a.length),"meta")),l.push(Ps(Ra(n,1),n,Fs));var c=Hs(s,e,n,"custom-block");return c?l.concat(c):l}},Vs={thematicBreak:"thematicBreak",table:"table",tableCell:"tableCell",htmlInline:"html"};var Us={};function Ws(t){var e=t.schema,n=t.toastMark;return new ze({appendTransaction:function(t,r,o){var i=t[0],a=o.tr;if(i.docChanged){var s=[];i.getMeta("editResult").forEach((function(t){var e=t.nodes,r=t.removedNodeRange;if(e.length){s=s.concat(function(t,e){var n=t.doc,r=e[0].sourcepos[0],o=ha(e).sourcepos[1],i=[r[0],r[1]],a=[o[0],o[1]+1],s=[];return function(t,e,n){var r=[];Us={};for(var o=e[0]-1;o<n[0];o+=1){var i=t.child(o),a=i.attrs.codeEnd,s=i.attrs.codeStart;if(s&&a&&!aa(r,s)){r.push(s),a=Math.min(a,t.childCount);for(var u=s-1,l=n[0],c=u;c<l;c+=1)Us[c]=!0}}}(n,r,o),s.push({start:i,end:a}),s}(a,e));for(var o=0,i=e;o<i.length;o++)for(var u=i[o].walker(),l=u.next();l;){var c=l.node;l.entering&&(s=s.concat(Ks(c,n))),l=u.next()}}else if(r)for(var p=a.doc.childCount-1,f=r.line,h=f[0],d=f[1],m=Math.min(h,p),v=Math.min(d,p),g=m;g<=v;g+=1)Us[g]=!0})),function(t,e,n){var r=t.doc,o=e.nodes.paragraph,i=Ns(r,r.childCount);n.forEach((function(n){var a=n.start,s=n.end,u=n.spec,l=n.lineBackground,c=Math.min(a[0],r.childCount)-1,p=Math.min(s[0],r.childCount)-1,f=r.child(c),h=r.child(p),d=i[c],m=i[p];(d+=a[1]+Ss(f,a[1]-1),m+=s[1]+Ss(h,s[1]-1),u)?l?function(t,e,n,r,o){void 0===o&&(o={});for(var i=r.startIndex,a=r.endIndex,s=r.from,u=r.to,l=!1,c=i;c<=a;c+=1)delete Us[c],l=Js(e,c,o);l&&t.setBlockType(s,u,n,o)}(t,r,o,{from:d,to:m,startIndex:c,endIndex:p},u.attrs):t.addMark(d,m,e.mark(u.type,u.attrs)):t.removeMark(d,m)})),function(t,e,n){Object.keys(Us).forEach((function(r){var o=Number(r),i=Math.min(Number(r)+1,t.doc.childCount-1),a=e[o],s=e[i]-1;o===i&&(s+=2),t.setBlockType(a,s,n)}))}(t,i,o)}(a,e,s)}return a.setMeta("widget",i.getMeta("widget"))}})}function Js(t,e,n){return Object.keys(n).some((function(r){return n[r]!==t.child(e).attrs[r]}))}function Ks(t,e){var n=e.getLineTexts(),r=[Ta(t),Aa(t)],o=[Ma(t),Sa(t)+1],i=function(t,e,n,r){var o=t.type;return ls(qs[o])?qs[o](t,e,n,r):Vs[o]?[Ps(e,n,Vs[o])]:null}(t,r,o,n[o[0]-1]);return null!=i?i:[]}function Zs(t){var e={},n=!0;return function(t,e,n){for(void 0===n&&(n=!0),t=n?t:t.parent;t&&"document"!==t.type;)e(t),t=t.parent}(t,(function(t){var r=function(t){return Na(t)?t.listData.task?"taskList":"ordered"===t.listData.type?"orderedList":"bulletList":-1!==t.type.indexOf("table")?"table":t.type}(t);"customBlock"!==r&&"image"!==r&&"link"!==r&&("bulletList"===r||"orderedList"===r?n&&(e[r]=!0,n=!1):e[r]=!0)})),e}var Gs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(rs),Xs=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function Qs(t,e){return Ys(t,e-1)}function Ys(t,e){return t.child(e).textContent}var tu=/^\s*> ?/,eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("block-quote")},0]}}},enumerable:!1,configurable:!0}),e.prototype.createBlockQuoteText=function(t,e){return e?t.replace(tu,"").trim():"> "+t.trim()},e.prototype.extendBlockQuote=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.tr,a=e.schema,s=Is(r),u=s.endFromOffset,l=s.endToOffset,c=s.endIndex,p=s.to,f=Ys(o,c);if(tu.test(f)&&p>u&&r.empty){if(!f.replace(tu,"").trim())i.deleteRange(u,l).split(i.mapping.map(l));else{var h=f.slice(p-u).trim();Ea(i,l,h,ka(a,t.createBlockQuoteText(h)))}return n(i),!0}return!1}},e.prototype.commands=function(){var t=this;return function(){return function(e,n){var r=e.selection,o=e.doc,i=Is(r),a=i.startFromOffset,s=i.endToOffset,u=i.startIndex,l=i.endIndex,c=tu.test(Ys(o,u)),p=Da({state:e,startIndex:u,endIndex:l,from:a,createText:function(e){return t.createBlockQuoteText(e,c)}});return n(p.setSelection(xa(p,p.mapping.map(s)))),!0}}},e.prototype.keymaps=function(){var t=this.commands()();return{"alt-q":t,"alt-Q":t,Enter:this.extendBlockQuote()}},e}(Xs),nu=/(^\s*)([-*+] |[\d]+\. )/,ru=/(^\s*)([\d])+\.( \[[ xX]])? /,ou=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,iu=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,au=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,su=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,uu=/(^\s*)([-*+])( \[[ xX]]) /;function lu(t){return ru.test(t)?"ordered":"bullet"}function cu(t){for(var e=0;t&&"document"!==t.type;)"list"===t.type&&(e+=1),t=t.parent;return e}function pu(t,e,n,r){for(var o=t.getLineTexts().length,i=[],a=e;r?a<o:a>1;){a=r?a+1:a-1;var s=t.findFirstNodeAtLine(a),u=cu(s);if(u===n)i.push({line:a,depth:n,mdNode:s});else if(u<n)break}return i}function fu(t,e,n,r){void 0===r&&(r=0);var o=Number.MAX_VALUE,i=0;return{changedResults:e.map((function(e,a){var s=e.line;o=Math.min(s-1,o),i=Math.max(s-1,i);var u=Qs(t,s);return{text:u="bullet"===n?function(t){if(!nu.test(t))return"* "+t;var e=lu(t);return"bullet"===e&&iu.test(t)?t=t.replace(uu,"$1$2 "):"ordered"===e&&(t=t.replace(ru,"$1* ")),t}(u):function(t,e){if(!nu.test(t))return e+". "+t;var n=lu(t);if("bullet"===n||"ordered"===n&&iu.test(t))t=t.replace(iu,"$1"+e+". ");else if("ordered"===n){var r=ou.exec(t)[3];Number(r)!==e&&(t=t.replace(ru,"$1"+e+". "))}return t}(u,a+1+r),line:s}})),firstIndex:o,lastIndex:i}}function hu(t,e){var n,r,o,i,a,s,u,l=(r=(n=e).toastMark,o=n.mdNode,i=n.line,a=cu(o),s=pu(r,i,a,!1).reverse(),u=pu(r,i,a,!0),s.concat([{line:i,depth:a,mdNode:o}]).concat(u));return fu(e.doc,l,t)}var du={bullet:function(t){return hu("bullet",t)},ordered:function(t){return hu("ordered",t)},task:function(t){var e=t.mdNode,n=t.doc,r=t.line,o=Qs(n,r);return e.listData.task?o=o.replace(su,"$1$2"):Na(e)&&(o=o.replace(nu,"$1$2[ ] ")),{changedResults:[{text:o,line:r}]}}},mu={bullet:function(t){var e=t.doc,n=t.line;return{changedResults:[{text:"* "+Qs(e,n),line:n}]}},ordered:function(t){for(var e=t.toastMark,n=t.doc,r=t.line,o=t.startLine,i=Qs(n,r),a=1,s=o,u=0,l=o-1;l>0;l-=1){var c=e.findFirstNodeAtLine(l),p=Qs(n,l)&&!!Fa(c,(function(t){return Na(t)})),f=ou.exec(Qs(n,l));if(!f&&!p)break;if(f||!p){var h=f,d=h[1],m=h[3];if(!d){a=Number(m),s=l;break}}else u+=1}return{changedResults:[{text:a+r-s-u+". "+i,line:r}]}},task:function(t){var e=t.doc,n=t.line;return{changedResults:[{text:"* [ ] "+Qs(e,n),line:n}]}}},vu={bullet:function(t){var e=t.line,n=Qs(t.doc,e),r=au.exec(n);return{listSyntax:""+r[1]+r[2]}},ordered:function(t){var e=t.toastMark,n=t.line,r=t.mdNode,o=t.doc,i=cu(r),a=Qs(o,n),s=ou.exec(a),u=s[1],l=s[3],c=s[4],p=Number(l)+1,f=""+u+p+c,h=pu(e,n,i,!0).filter((function(t){var e=ou.exec(Qs(o,t.line));return e&&e[1].length===u.length&&!!Fa(t.mdNode,(function(t){return La(t)}))}));return ji({listSyntax:f},fu(o,h,"ordered",p))}};function gu(t,e,n,r,o){for(var i=[],a=Qs(t,n),s=ou.exec(a);s;){var u=s[1],l=s[4],c=s[5],p=u.length;if(p===o)i.push(ka(e,""+u+r+l+c)),r+=1,n+=1;else if(p>o){var f=gu(t,e,n,1,p);n=f.line,i=i.concat(f.nodes)}if(p<o||n>t.childCount)break;a=Qs(t,n),s=ou.exec(a)}return{nodes:i,line:n}}var yu=/(^\s{1,4})(.*)/;function bu(t,e,n){return t<e||nu.test(n)||tu.test(n)}function wu(t,e,n){var r=n.$from;0===r.depth&&(r=t.resolve(r.pos-1));var o=r.node(1),i=r.start(1),a=o.content.size;return o.rangeHasMark(0,a,e.marks.table)&&r.pos-i!==a&&r.pos!==i}function ku(t,e){var n=e.from,r=e.to;if("indent"===e.type){n+=4,r+=4*(e.lineLen+1)}else{var o=e.spaceLenList;n-=o[0];for(var i=0;i<o.length;i+=1)r-=o[i]}return xa(t,n,r)}var xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(t){var e=t.attrs;return e.className?["div",{class:ys(e.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),e.prototype.reorderList=function(t,e){for(var n=this.context,r=n.view,o=n.toastMark,i=n.schema,a=r.state,s=a.tr,u=a.selection,l=a.doc,c=o.findFirstNodeAtLine(t),p=c;c&&!Ia(c)&&"document"!==c.parent.type;)if(La(c=c.parent)){p=c;break}p&&(t=p.sourcepos[0][0]);var f=ou.exec(Qs(l,t)),h=f[1],d=f[3],m=h.length,v=gu(l,i,t,Number(d),m),g=v.line,y=v.nodes;e=Math.max(e,g-1);for(var b=_s(l,t-1).startOffset,w=t-1;w<=e-1;w+=1){var k=l.child(w),x=k.nodeSize,C=k.content,D=s.mapping.map(b),E=D+C.size;s.replaceWith(D,E,y[w-t+1]),b+=x}var T=xa(s,u.from,u.to);r.dispatch(s.setSelection(T))},e.prototype.indent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var o=n.schema,i=n.selection,a=n.doc,s=Is(i),u=s.from,l=s.to,c=s.startFromOffset,p=s.startIndex,f=s.endIndex;if(t&&wu(a,o,i))return!1;var h=Ys(a,p);if(t&&bu(u,l,h)||!t&&nu.test(h)){var d=Da({state:n,from:c,startIndex:p,endIndex:f,createText:function(t){return"    "+t}}),m={type:"indent",from:u,to:l,lineLen:f-p};r(d.setSelection(ku(d,m))),ou.test(h)&&e.reorderList(p+1,f+1)}else t&&r(n.tr.insert(l,ka(o,"    ")));return!0}}},e.prototype.outdent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var o=n.selection,i=n.doc,a=n.schema,s=Is(o),u=s.from,l=s.to,c=s.startFromOffset,p=s.startIndex,f=s.endIndex;if(t&&wu(i,a,o))return!1;var h=Ys(i,p);if(t&&bu(u,l,h)||!t&&nu.test(h)){var d=[],m=Da({state:n,from:c,startIndex:p,endIndex:f,createText:function(t){var e=yu.exec(t);return d.push(e?e[1].length:0),t.replace(yu,"$2")}}),v={type:"outdent",from:u,to:l,spaceLenList:d};r(m.setSelection(ku(m,v))),ou.test(h)&&e.reorderList(p+1,f+1)}else if(t){var g=h.slice(0,l-c),y=g.replace(/\s{1,4}$/,""),b=l-(g.length-y.length);r(n.tr.delete(b,l))}return!0}}},e.prototype.deleteLines=function(){var t=this;return function(e,n){var r=t.context.view,o=Is(e.selection),i=o.startFromOffset,a=o.endToOffset;return ci((function(){return n(e.tr.deleteRange(i,a)),!0}),ti)(e,n,r)}},e.prototype.moveDown=function(){return function(t,e){var n=t.doc,r=t.tr,o=t.selection,i=t.schema,a=Is(o),s=a.startFromOffset,u=a.endToOffset,l=a.endIndex;if(l<n.content.childCount-1){var c=n.child(l+1),p=c.nodeSize,f=c.textContent;return r.delete(u,u+p).split(s).insert(r.mapping.map(s)-2,ka(i,f)),e(r),!0}return!1}},e.prototype.moveUp=function(){return function(t,e){var n=t.tr,r=t.doc,o=t.selection,i=t.schema,a=Is(o),s=a.startFromOffset,u=a.endToOffset,l=a.startIndex;if(l>0){var c=r.child(l-1),p=c.nodeSize,f=c.textContent;return n.delete(s-p,s).split(n.mapping.map(u)).insert(n.mapping.map(u),ka(i,f)),e(n),!0}return!1}},e.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},e.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},e}(rs),Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e}(rs),Du=/^#{1,6}\s/,Eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(t){var e=t.attrs,n="heading|heading"+e.level;return e.seText&&(n+="|delimiter|setext"),["span",{class:ys.apply(void 0,n.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.createHeadingText=function(t,e,n){for(var r=e.replace(n,"").trim(),o="";t>0;)o+="#",t-=1;return o+" "+r},e.prototype.commands=function(){var t=this;return function(e){return function(n,r){var o=e.level,i=Is(n.selection),a=i.startFromOffset,s=i.endToOffset,u=Da({state:n,from:a,startIndex:i.startIndex,endIndex:i.endIndex,createText:function(e){var n=e.match(Du),r=n?n[0]:"";return t.createHeadingText(o,e,r)}});return r(u.setSelection(xa(u,u.mapping.map(s)))),!0}}},e}(Xs),Tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("code-block")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=t.tr,i=Is(n),a=i.startFromOffset,s=i.endToOffset,u=ka(r,"```");return o.insert(a,u).split(a+"```".length),o.split(o.mapping.map(s)).insert(o.mapping.map(s),u),e(o.setSelection(xa(o,o.mapping.map(s)-("```".length+2)))),!0}}},e.prototype.keepIndentation=function(){var t=this;return function(e,n){var r=e.selection,o=e.tr,i=e.doc,a=e.schema,s=t.context.toastMark,u=Is(r),l=u.startFromOffset,c=u.endToOffset,p=u.endIndex,f=u.from,h=u.to,d=Ys(i,p);if(f===h&&d.trim()){var m=d.match(/^\s+/);if(function(t){return t&&"codeBlock"===t.type}(s.findFirstNodeAtLine(p+1))&&m){var v=m[0],g=d.slice(h-l);return Ea(o,c,g,ka(a,v+g)),n(o),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,Enter:this.keepIndentation()}},e}(Xs),Mu=/\||\s/g;function Au(t,e){for(var n="|",r=0;r<t;r+=1)n+=e?" --- |":"  |";return n}var Su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("table")},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendTable=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.tr,a=e.schema;if(!r.empty)return!1;var s=Is(r),u=s.endFromOffset,l=s.endToOffset,c=s.endIndex,p=s.to,f=Ys(o,c),h=[c+1,p-u+1],d=Fa(t.context.toastMark.findNodeAtPosition(h),(function(t){return _a(t)&&("tableDelimRow"===t.parent.type||"tableBody"===t.parent.parent.type)}));if(d){var m=!f.replace(Mu,"").trim(),v=Au(d.parent.parent.parent.columns.length);return m?i.deleteRange(u,l).split(i.mapping.map(l)):i.split(l).insert(i.mapping.map(l),ka(a,v)).setSelection(xa(i,i.mapping.map(l)-2)),n(i),!0}return!1}},e.prototype.moveTableCell=function(t){var e=this;return function(n,r){var o=n.selection,i=n.tr,a=Is(o),s=a.endFromOffset,u=[a.endIndex+1,a.to-s],l=Fa(e.context.toastMark.findNodeAtPosition(u),(function(t){return _a(t)}));if(l){var c=l.parent,p=function(t){return t?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}(t),f=p.type,h=p.parentType,d=p.childType,m=Sa(l);if(l[f])m=Sa(l[f])-1;else{var v=c[f]||c.parent.type!==h?c[f]:c.parent[f][d];if("next"===f)m+=(v?Sa(v[d]):0)+2;else"prev"===f&&(m=v?-4:0)}return r(i.setSelection(xa(i,s+m))),!0}return!1}},e.prototype.addTable=function(){return function(t){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=t,s=a.columnCount,u=a.rowCount,l=Is(r).endToOffset,c=function(t){return[Au(t),Au(t,!0)]}(s),p=function(t,e){for(var n=[],r=0;r<e;r+=1)n.push(Au(t));return n}(s,u-1);return Hi(Hi([],c),p).forEach((function(t){o.split(o.mapping.map(l)).insert(o.mapping.map(l),ka(i,t))})),n(o.setSelection(xa(o,l+4))),!0}}},e.prototype.commands=function(){return{addTable:this.addTable()}},e.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},e}(Xs),Ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("thematic-break")},0]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=t.tr,i=Is(n),a=i.from,s=i.to,u=i.endToOffset,l=ka(r,"***");return o.split(a).replaceWith(o.mapping.map(a),o.mapping.map(s),l).split(o.mapping.map(s)).setSelection(xa(o,o.mapping.map(u))),e(o),!0}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(Xs);function Nu(t){var e=t.type;return"codeBlock"===e||"heading"===e||-1!==e.indexOf("table")}var Lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.odd,r=e.even,o="list-item";return e.listStyle&&(o+="|list-item-style"),n&&(o+="|list-item-odd"),r&&(o+="|list-item-even"),["span",{class:ys.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendList=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.schema,a=e.tr,s=t.context.toastMark,u=Is(r),l=u.to,c=u.startFromOffset,p=u.endFromOffset,f=u.endIndex,h=u.endToOffset,d=Ys(o,f);if(!nu.test(d)||r.from===c||!r.empty)return!1;if(!d.replace(iu,"").trim())a.deleteRange(p,h).split(a.mapping.map(h));else{var m=lu(d),v=s.findFirstNodeAtLine(f+1),g=d.slice(l-p),y={toastMark:s,mdNode:v,doc:o,line:f+1},b=vu[m](y),w=b.listSyntax,k=b.changedResults;if(null==k?void 0:k.length){a.split(l),k.unshift({text:w+g,line:f+1}),t.changeToListPerLine(a,k,{from:l,startLine:k[0].line,endLine:ha(k).line});var x=a.mapping.map(h)-g.length;a.setSelection(xa(a,x))}else{Ea(a,h,g,ka(i,w+g))}}return n(a),!0}},e.prototype.toList=function(t){var e=this;return function(){return function(n,r){for(var o=n.doc,i=n.tr,a=n.selection,s=e.context.toastMark,u=Is(a),l=u.startIndex+1,c=u.endIndex+1,p=u.endToOffset,f=[],h=l;h<=c;h+=1){var d=s.findFirstNodeAtLine(h);if(d&&Nu(d))break;if(-1===f.indexOf(h)){var m={toastMark:s,mdNode:d,doc:o,line:h,startLine:l},v=(Na(d)?du[t](m):mu[t](m)).changedResults,g=e.changeToListPerLine(i,v,{from:_s(o,v[0].line-1).startOffset,startLine:v[0].line,endLine:ha(v).line,indexDiff:1});p=Math.max(g,p),v&&(f=f.concat(v.map((function(t){return t.line}))))}}return r(i.setSelection(xa(i,i.mapping.map(p)))),!0}}},e.prototype.changeToListPerLine=function(t,e,n){for(var r=n.from,o=n.startLine,i=n.endLine,a=n.indexDiff,s=void 0===a?0:a,u=0,l=function(n){var o=t.doc.child(n),i=o.nodeSize,a=o.content,l=t.mapping.map(r),p=l+a.size,f=e.filter((function(t){return t.line-s===n}))[0];f&&(t.replaceWith(l,p,ka(c.context.schema,f.text)),u=Math.max(u,r+a.size)),r+=i},c=this,p=o-s;p<=i-s;p+=1)l(p);return u},e.prototype.toggleTask=function(){var t=this;return function(e,n){for(var r=e.selection,o=e.tr,i=e.doc,a=e.schema,s=t.context.toastMark,u=Is(r),l=u.startIndex,c=u.endIndex,p=null,f=l;f<=c;f+=1){var h=s.findFirstNodeAtLine(f+1);if(Na(h)&&h.listData.task){var d=h.listData,m=d.checked,v=d.padding,g=m?" ":"x",y=h.sourcepos[0],b=_s(i,y[0]-1).startOffset;b+=y[1]+v,p=o.replaceWith(b,b+1,a.text(g))}}return!!p&&(n(p),!0)}},e.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},e.prototype.keymaps=function(){var t=this.toList("bullet")(),e=this.toList("ordered")(),n=this.toList("task")(),r=this.toggleTask();return{"Mod-u":t,"Mod-U":t,"Mod-o":e,"Mod-O":e,"alt-t":n,"alt-T":n,"Shift-Ctrl-x":r,"Shift-Ctrl-X":r,Enter:this.extendList()}},e}(Xs);function Iu(t,e){return function(){return function(n,r){var o=n.tr,i=n.selection,a=ls(t)?t:function(e){return t.test(e)},s=e.length,u=o.doc,l=As(i),c=l[0],p=l[1],f=Math.max(c-s,1),h=Math.min(p+s,u.content.size-1),d=i.content(),m=d.content.textBetween(0,d.content.size,"\n"),v=u.textBetween(f,c,"\n"),g=u.textBetween(p,h,"\n");if(m=""+v+m+g,v&&g&&a(m))o.delete(h-s,h).delete(f,f+s);else{o.insertText(e,p).insertText(e,c);var y=i.empty?xa(o,c+s):xa(o,c+s,p+s);o.setSelection(y)}return r(o),!0}}}var _u=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,Fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("strong")},0]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return Iu(_u,"**")},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Xs),Bu=/^(~{2}).*([\s\S]*)\1$/m,Ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("strike")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return Iu(Bu,"~~")},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Xs),Pu=/^(\*|_).*([\s\S]*)\1$/m,zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("emph")},0]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return Iu(Pu,"*")},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Xs),ju=/^(`).*([\s\S]*)\1$/m,Hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(t){var e=t.attrs,n="code";return e.start&&(n+="|delimiter|start"),e.end&&(n+="|delimiter|end"),e.marked&&(n+="|marked-text"),["span",{class:ys.apply(void 0,n.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return Iu(ju,"`")},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Xs),$u=[/\(/g,/\)/g,/\[/g,/\]/g,/</g,/>/g],qu=["%28","%29","%5B","%5D","%3C","%3E"],Vu=["\\(","\\)","\\[","\\]","\\<","\\>"];function Uu(t){return t.split(" ").reduce((function(t,e){var n="";try{n=decodeURIComponent(e)}catch(r){n=e}return t.concat(n)}),[]).join("%20")}function Wu(t,e){var n=e?qu:Vu;return $u.reduce((function(t,e,r){return t.replace(e,n[r])}),t)}var Ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(t){var e=t.attrs,n="link";return e.url&&(n+="|link-url|marked-text"),e.desc&&(n+="|link-desc|marked-text"),["span",{class:ys.apply(void 0,n.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.addLinkOrImage=function(t){return function(e){return function(n,r){var o=n.selection,i=n.tr,a=n.schema,s=As(o),u=s[0],l=s[1],c=e,p=c.linkText,f=c.altText,h=c.linkUrl,d=c.imageUrl,m=p,v=h,g="";return"image"===t&&(m=f,v=d,g="!"),g+="["+(m=Wu(m,!1))+"]("+(v=Wu(Uu(v),!0))+")",r(i.replaceWith(u,l,ka(a,g))),!0}}},e.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},e}(Xs),Ku=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("delimiter")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),Gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("meta")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),Xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("marked-text")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),Qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("table-cell")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("html")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:ys("custom-block")},0]}}},enumerable:!1,configurable:!0}),e}(Xs),el=/x|backspace/i,nl=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function rl(t){var e=t.schema,n=t.toastMark;return new ze({props:{handleDOMEvents:{keyup:function(t,r){var o=t.state,i=o.doc,a=o.tr,s=o.selection;if(s.empty&&el.test(r.key)){var u=Is(s),l=u.startIndex,c=u.startFromOffset,p=[l+1,u.from-c+1],f=Fa(n.findNodeAtPosition(p),(function(t){var e;return"paragraph"===t.type&&"item"===(null===(e=t.parent)||void 0===e?void 0:e.type)}));if(f&&f.firstChild){var h=f.firstChild,d=h.literal.match(nl);if(d){var m=h.sourcepos[0],v=d[1],g=d[2],y=d[3],b=v.length+y.length,w=_s(i,m[0]-1).startOffset,k=m[1]+w;if(g){var x=b?b+1:0;a.replaceWith(k,x+k,e.text(g)),t.dispatch(a)}else b||(a.insertText(" ",k),t.dispatch(a))}}}return!1}}}})}var ol=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.toastMark,i=n.useCommandShortcut,a=void 0===i||i,s=n.mdPlugins,u=void 0===s?[]:s;return r.editorType="markdown",r.el.classList.add("md-mode"),r.toastMark=o,r.extraPlugins=u,r.specs=r.createSpecs(),r.schema=r.createSchema(),r.context=r.createContext(),r.keymaps=r.createKeymaps(a),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(ji(ji({},r.context),{view:r.view})),r.createClipboard(),r.eventEmitter.listen("changePreviewTabWrite",(function(){return r.toggleActive(!0)})),r.eventEmitter.listen("changePreviewTabPreview",(function(){return r.toggleActive(!1)})),r.initEvent(),r}return zi(e,t),e.prototype.toggleActive=function(t){xs(this.el,"active",t),t?this.focus():this.blur()},e.prototype.createClipboard=function(){var t=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=gs("pseudo-clipboard"),this.clipboard.addEventListener("paste",(function(e){var n=e.clipboardData||window.clipboardData,r=n&&n.items;if(r){var o=es(r);o&&(e.preventDefault(),ts(t.eventEmitter,o,e.type))}})),this.clipboard.addEventListener("input",(function(e){var n=e.target.value;t.replaceSelection(n),e.preventDefault(),e.target.value=""})),this.el.insertBefore(this.clipboard,this.view.dom)},e.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSpecs=function(){return new ps([new Gs,new xu,new ss,new Cu,new Eu,new eu,new Tu,new tl,new Su,new Qu,new Ou,new Lu,new Fu,new Ru,new zu,new Hu,new Ju,new Zu,new Ku,new Xu,new Gu,new Yu])},e.prototype.createPlugins=function(){return this.defaultPlugins.concat(Hi([Ws(this.context),(t=this.context,e=t.toastMark,n=t.eventEmitter,new ze({view:function(){return{update:function(t,r){var o=t.state,i=o.doc,a=o.selection;if(!(r&&r.doc.eq(i)&&r.selection.eq(a))){var s=a.from,u=o.doc.resolve(s).start(),l=s-u;s===u&&(l+=1);var c=[o.doc.content.findIndex(s).index+1,l],p=e.findNodeAtPosition(c),f=Zs(p);n.emit("changeToolbarState",{cursorPos:c,mdNode:p,toolbarState:f}),n.emit("setFocusedNode",p)}}}}})),rl(this.context)],this.createPluginProps()));var t,e,n},e.prototype.createView=function(){var t=this;return new Oo(this.el,{state:this.createState(),dispatchTransaction:function(e){t.updateMarkdown(e);var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e)},handleKeyDown:function(e,n){return(n.metaKey||n.ctrlKey)&&"V"===n.key.toUpperCase()&&t.clipboard.focus(),t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{copy:function(e,n){return t.captureCopy(n)},cut:function(e,n){return t.captureCopy(n,"cut")},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1}},nodeViews:{widget:is}})},e.prototype.createCommands=function(){return this.specs.commands(this.view)},e.prototype.captureCopy=function(t,e){t.preventDefault();var n=this.view.state,r=n.selection,o=n.tr;if(r.empty)return!0;var i=this.getChanged(r.content());return t.clipboardData?t.clipboardData.setData("text/plain",i):window.clipboardData.setData("Text",i),"cut"===e&&this.view.dispatch(o.deleteSelection().scrollIntoView().setMeta("uiEvent","cut")),!0},e.prototype.updateMarkdown=function(t){var e=this;t.docChanged&&t.steps.forEach((function(n,r){if(n.slice&&!(n instanceof Qt)){var o=t.docs[r],i=[n.from,n.to],a=Os(o,i[0],i[1]),s=a[0],u=a[1],l=e.getChanged(n.slice);s[0]===u[0]&&s[1]===u[1]&&""===l&&(l="\n");var c=e.toastMark.editMarkdown(s,u,l);e.eventEmitter.emit("updatePreview",c),t.setMeta("editResult",c).scrollIntoView()}}))},e.prototype.getChanged=function(t){var e="",n=t.content.size;return t.content.nodesBetween(0,n,(function(t,r){t.isText?e+=t.text.slice(Math.max(0,r)-r,n-r):t.isBlock&&r>0&&(e+="\n")})),e},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=Ls(n.doc,t,e),o=r[0],i=r[1];this.view.dispatch(n.setSelection(xa(n,o,i)).scrollIntoView())},e.prototype.replaceSelection=function(t,e,n){var r,o=this.view.state,i=o.tr,a=o.schema,s=o.doc,u=t.split("\n").map((function(t){return wa(a,Ka(t,a))})),l=new I(T.from(u),1,1);if(this.focus(),e&&n){var c=Ls(s,e,n),p=c[0],f=c[1];r=i.replaceRange(p,f,l)}else r=i.replaceSelection(l);this.view.dispatch(r.scrollIntoView())},e.prototype.deleteSelection=function(t,e){var n,r=this.view.state,o=r.tr,i=r.doc;if(t&&e){var a=Ls(i,t,e),s=a[0],u=a[1];n=o.deleteRange(s,u)}else n=o.deleteSelection();this.view.dispatch(n.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,o=n.selection,i=o.from,a=o.to;if(t&&e){var s=Ls(r,t,e);i=s[0],a=s[1]}return r.textBetween(i,a,"\n")},e.prototype.getSelection=function(){var t=this.view.state.selection,e=t.from,n=t.to;return Os(this.view.state.tr.doc,e,n)},e.prototype.setMarkdown=function(t,e){void 0===e&&(e=!0);var n=t.split("\n"),r=this.view.state,o=r.tr,i=r.doc,a=r.schema,s=n.map((function(t){return wa(a,Ka(t,a))}));this.view.dispatch(o.replaceWith(0,i.content.size,s)),e&&this.moveCursorToEnd()},e.prototype.addWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.doc,a=r.selection,s=n?Ls(i,n,n)[0]:a.to;this.view.dispatch(o.setMeta("widget",{pos:s,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.schema,a=Ls(r.doc,t,e),s=Ka(n,i);this.view.dispatch(o.replaceWith(a[0],a[1],s))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,o=t||Os(n,r.from)[0],i=this.toastMark.findNodeAtPosition(o);return"text"===i.type&&"paragraph"!==i.parent.type&&(i=i.parent),i.sourcepos[1][1]+=1,{range:i.sourcepos,type:i.type}},e.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map((function(t){return Va(t)})).join("\n")},e.prototype.getToastMark=function(){return this.toastMark},e}(us);var il=function(t,e){var n,r=t._feEventKey;return r||(r=t._feEventKey={}),(n=r[e])||(n=r[e]=[]),n};function al(t,e,n){var r,o=il(t,e);n?(Ki(o,(function(o,i){return n!==o.handler||(sl(t,e,o.wrappedHandler),r=i,!1)})),o.splice(r,1)):(Ki(o,(function(n){sl(t,e,n.wrappedHandler)})),o.splice(0,o.length))}function sl(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}var ul=function(t,e,n){Ui(e)?Ki(e.split(/\s+/g),(function(e){al(t,e,n)})):Ki(e,(function(e,n){al(t,n,e)}))};function ll(t,e,n,r){function o(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),function(t,e,n,r){var o=il(t,e),i=!1;Ki(o,(function(t){return t.handler!==n||(i=!0,!1)})),i||o.push({handler:n,wrappedHandler:r})}(t,e,n,o)}var cl=function(t,e,n,r){Ui(e)?Ki(e.split(/\s+/g),(function(e){ll(t,e,n,r)})):Ki(e,(function(e,r){ll(t,r,e,n)}))},pl=function(t,e){return(pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}pl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var hl=function(){return(hl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function dl(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var ml={};function vl(t,e,n){var r,o,i,a,s,u="";for("string"!=typeof e&&(n=e,e=vl.defaultChars),void 0===n&&(n=!0),s=function(t){var e,n,r=ml[t];if(r)return r;for(r=ml[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}(e),r=0,o=t.length;r<o;r++)if(i=t.charCodeAt(r),n&&37===i&&r+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3)))u+=t.slice(r,r+3),r+=2;else if(i<128)u+=s[i];else if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&r+1<o&&(a=t.charCodeAt(r+1))>=56320&&a<=57343){u+=encodeURIComponent(t[r]+t[r+1]),r++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(t[r]);return u}vl.defaultChars=";/?:@&=+$,-_.!~*'()#",vl.componentChars="-_.!~*'()";var gl=vl,yl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function bl(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var wl={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"},kl={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"},xl={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'},Cl={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},Dl=bl((function(t,e){var n=yl&&yl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(Cl),o=String.fromCodePoint||function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)};e.default=function(t){return t>=55296&&t<=57343||t>1114111?"�":(t in r.default&&(t=r.default[t]),o(t))}})),El=bl((function(t,e){var n=yl&&yl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHTML=e.decodeHTMLStrict=e.decodeXML=void 0;var r=n(wl),o=n(kl),i=n(xl),a=n(Dl),s=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function u(t){var e=c(t);return function(t){return String(t).replace(s,e)}}e.decodeXML=u(i.default),e.decodeHTMLStrict=u(r.default);var l=function(t,e){return t<e?1:-1};function c(t){return function(e){if("#"===e.charAt(1)){var n=e.charAt(2);return"X"===n||"x"===n?a.default(parseInt(e.substr(3),16)):a.default(parseInt(e.substr(2),10))}return t[e.slice(1,-1)]||e}}e.decodeHTML=function(){for(var t=Object.keys(o.default).sort(l),e=Object.keys(r.default).sort(l),n=0,i=0;n<e.length;n++)t[i]===e[n]?(e[n]+=";?",i++):e[n]+=";";var a=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=c(r.default);function u(t){return";"!==t.substr(-1)&&(t+=";"),s(t)}return function(t){return String(t).replace(a,u)}}()})),Tl=bl((function(t,e){var n=yl&&yl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=void 0;var r=l(n(xl).default),o=c(r);e.encodeXML=m(r);var i,a,s=l(n(wl).default),u=c(s);function l(t){return Object.keys(t).sort().reduce((function(e,n){return e[t[n]]="&"+n+";",e}),{})}function c(t){for(var e=[],n=[],r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];1===i.length?e.push("\\"+i):n.push(i)}e.sort();for(var a=0;a<e.length-1;a++){for(var s=a;s<e.length-1&&e[s].charCodeAt(1)+1===e[s+1].charCodeAt(1);)s+=1;var u=1+s-a;u<3||e.splice(a,u,e[a]+"-"+e[s])}return n.unshift("["+e.join("")+"]"),new RegExp(n.join("|"),"g")}e.encodeHTML=(i=s,a=u,function(t){return t.replace(a,(function(t){return i[t]})).replace(p,h)}),e.encodeNonAsciiHTML=m(s);var p=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,f=null!=String.prototype.codePointAt?function(t){return t.codePointAt(0)}:function(t){return 1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536};function h(t){return"&#x"+(t.length>1?f(t):t.charCodeAt(0)).toString(16).toUpperCase()+";"}var d=new RegExp(o.source+"|"+p.source,"g");function m(t){return function(e){return e.replace(d,(function(e){return t[e]||h(e)}))}}e.escape=function(t){return t.replace(d,h)},e.escapeUTF8=function(t){return t.replace(o,h)}})),Ml=bl((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=e.encode=e.decodeStrict=e.decode=void 0,e.decode=function(t,e){return(!e||e<=0?El.decodeXML:El.decodeHTML)(t)},e.decodeStrict=function(t,e){return(!e||e<=0?El.decodeXML:El.decodeHTMLStrict)(t)},e.encode=function(t,e){return(!e||e<=0?Tl.encodeXML:Tl.encodeHTML)(t)};var n=Tl;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return n.encodeXML}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return n.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return n.encodeNonAsciiHTML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return n.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return n.escapeUTF8}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return n.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return n.encodeHTML}});var r=El;Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return r.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return r.decodeXML}})})),Al="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Sl=/[\\&]/,Ol="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",Nl=new RegExp("\\\\"+Ol+"|"+Al,"gi"),Ll=new RegExp('[&<>"]',"g"),Il=function(t){return 92===t.charCodeAt(0)?t.charAt(1):Ml.decodeHTML(t)};function _l(t){return Sl.test(t)?t.replace(Nl,Il):t}function Fl(t){try{return gl(t)}catch(e){return t}}function Bl(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}}function Rl(t){return Ll.test(t)?t.replace(Ll,Bl):t}function Pl(t,e){for(var n=[],r=0;r<e;r++)n.push(t);return n.join("")}function zl(t){return!t||!/[^ \t]+/.test(t)}var jl=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.next=function(){var t=this.current,e=this.entering;if(null===t)return null;var n=Hl(t);return e&&n?t.firstChild?(this.current=t.firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:null===t.next?(this.current=t.parent,this.entering=!1):(this.current=t.next,this.entering=!0),{entering:e,node:t}},t.prototype.resumeAt=function(t,e){this.current=t,this.entering=!0===e},t}();function Hl(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var $l=1,ql={};function Vl(t){delete ql[t]}var Ul=function(){function t(t,e){this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,this.id="document"===t?-1:$l++,this.type=t,this.sourcepos=e,ql[this.id]=this}return t.prototype.isContainer=function(){return Hl(this)},t.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next),this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev),this.parent=null,this.next=null,this.prev=null},t.prototype.replaceWith=function(t){this.insertBefore(t),this.unlink()},t.prototype.insertAfter=function(t){t.unlink(),t.next=this.next,t.next&&(t.next.prev=t),t.prev=this,this.next=t,this.parent&&(t.parent=this.parent,t.next||(t.parent.lastChild=t))},t.prototype.insertBefore=function(t){t.unlink(),t.prev=this.prev,t.prev&&(t.prev.next=t),t.next=this,this.prev=t,t.parent=this.parent,t.prev||(t.parent.firstChild=t)},t.prototype.appendChild=function(t){t.unlink(),t.parent=this,this.lastChild?(this.lastChild.next=t,t.prev=this.lastChild,this.lastChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.prependChild=function(t){t.unlink(),t.parent=this,this.firstChild?(this.firstChild.prev=t,t.next=this.firstChild,this.firstChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.walker=function(){return new jl(this)},t}(),Wl=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.open=!0,r.lineOffsets=null,r.stringContent=null,r.lastLineBlank=!1,r.lastLineChecked=!1,r.type=e,r}return fl(e,t),e}(Ul),Jl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listData=null,e}return fl(e,t),e}(Wl),Kl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.headingType="atx",e}return fl(e,t),e}(Wl),Zl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFenced=!1,e.fenceChar=null,e.fenceLength=0,e.fenceOffset=-1,e.info=null,e.infoPadding=0,e}return fl(e,t),e}(Wl),Gl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columns=[],e}return fl(e,t),e}(Wl),Xl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startIdx=0,e.endIdx=0,e.paddingLeft=0,e.paddingRight=0,e.ignored=!1,e}return fl(e,t),e}(Wl),Ql=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="",e.dest="",e.label="",e}return fl(e,t),e}(Wl),Yl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syntaxLength=0,e.offset=-1,e.info="",e}return fl(e,t),e}(Wl),tc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.htmlBlockType=-1,e}return fl(e,t),e}(Wl),ec=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destination=null,e.title=null,e.extendedAutolink=!1,e}return fl(e,t),e}(Ul),nc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tickCount=0,e}return fl(e,t),e}(Ul),rc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info="",e}return fl(e,t),e}(Ul);function oc(t,e){switch(t){case"heading":return new Kl(t,e);case"list":case"item":return new Jl(t,e);case"link":case"image":return new ec(t,e);case"codeBlock":return new Zl(t,e);case"htmlBlock":return new tc(t,e);case"table":return new Gl(t,e);case"tableCell":return new Xl(t,e);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new Wl(t,e);case"code":return new nc(t,e);case"refDef":return new Ql(t,e);case"customBlock":return new Yl(t,e);case"customInline":return new rc(t,e);default:return new Ul(t,e)}}function ic(t){return"codeBlock"===t.type}function ac(t){return"list"===t.type}function sc(t){return"refDef"===t.type}function uc(t){return"customBlock"===t.type}function lc(t,e){var n=oc("text",e);return n.literal=t,n}var cc,pc="<[A-Za-z][A-Za-z0-9-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*/?>",fc="</[A-Za-z][A-Za-z0-9-]*\\s*[>]",hc=new RegExp("^(?:<[A-Za-z][A-Za-z0-9-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*/?>|</[A-Za-z][A-Za-z0-9-]*\\s*[>]|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|[<][?].*?[?][>]|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)","i");if(String.fromCodePoint)cc=function(t){try{return String.fromCodePoint(t)}catch(e){if(e instanceof RangeError)return String.fromCharCode(65533);throw e}};else{var dc=String.fromCharCode,mc=Math.floor;cc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,o=16384,i=[],a=-1,s=t.length;if(!s)return"";for(var u="";++a<s;){var l=Number(t[a]);if(!isFinite(l)||l<0||l>1114111||mc(l)!==l)return String.fromCharCode(65533);l<=65535?i.push(l):(n=55296+((l-=65536)>>10),r=l%1024+56320,i.push(n,r)),(a+1===s||i.length>o)&&(u+=dc.apply(void 0,i),i.length=0)}return u}}var vc=cc;function gc(t){var e=/\)+$/.exec(t);if(e){for(var n=0,r=0,o=t;r<o.length;r++){var i=o[r];"("===i?n<0?n=1:n+=1:")"===i&&(n-=1)}if(n<0){var a=Math.min(-n,e[0].length);return t.substring(0,t.length-a)}}return t}function yc(t){return t.replace(/&[A-Za-z0-9]+;$/,"")}function bc(t){return dl(dl([],function(t){for(var e,n=new RegExp("(www|https?://).(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+[^<\\s]*[^<?!.,:*_?~\\s]","g"),r=[];e=n.exec(t);){var o=yc(gc(e[0])),i="www"===e[1]?"http://":"";r.push({text:o,range:[e.index,e.index+o.length-1],url:""+i+o})}return r}(t)),function(t){for(var e,n=new RegExp("[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+","g"),r=[];e=n.exec(t);){var o=e[0];/[_-]+$/.test(o)||r.push({text:o,range:[e.index,e.index+o.length-1],url:"mailto:"+o})}return r}(t)).sort((function(t,e){return t.range[0]-e.range[0]}))}function wc(t){return t[t.length-1]}function kc(t){return t.slice(1,t.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function xc(t,e){Object.keys(t).forEach((function(n){e(n,t[n])}))}function Cc(t){return!Object.keys(t).length}var Dc="\\\\"+Ol,Ec=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),Tc=new RegExp('^(?:"('+Dc+'|[^"\\x00])*"|\'('+Dc+"|[^'\\x00])*'|\\(("+Dc+"|[^()\\x00])*\\))"),Mc=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,Ac=new RegExp("^"+Ol),Sc=new RegExp("^"+Al,"i"),Oc=/`+/,Nc=/^`+/,Lc=/\.\.\./g,Ic=/--+/g,_c=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Fc=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,Bc=/^ *(?:\n *)?/,Rc=/^[ \t\n\x0b\x0c\x0d]/,Pc=/^\s/,zc=/ *$/,jc=/^ */,Hc=/^ *(?:\n|$)/,$c=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,qc=/^[^\n`\[\]\\!<&*_'"~$]+/m,Vc=function(){function t(t){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=t}return t.prototype.sourcepos=function(t,e){var n=this.linePosOffset+this.lineOffsets[this.lineIdx],r=this.lineStartNum+this.lineIdx,o=[r,t+n];return"number"==typeof e?[o,[r,e+n]]:o},t.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},t.prototype.match=function(t){var e=t.exec(this.subject.slice(this.pos));return null===e?null:(this.pos+=e.index+e[0].length,e[0])},t.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},t.prototype.spnl=function(){return this.match(Bc),!0},t.prototype.parseBackticks=function(t){var e=this.pos+1,n=this.match(Nc);if(null===n)return!1;for(var r,o=this.pos;null!==(r=this.match(Oc));)if(r===n){var i=this.subject.slice(o,this.pos-n.length),a=this.sourcepos(e,this.pos),s=i.split("\n");if(s.length>1){var u=wc(s);this.lineIdx+=s.length-1,this.linePosOffset=-(this.pos-u.length-n.length),a[1]=this.sourcepos(this.pos),i=s.join(" ")}var l=oc("code",a);return i.length>0&&null!==i.match(/[^ ]/)&&" "==i[0]&&" "==i[i.length-1]?l.literal=i.slice(1,i.length-1):l.literal=i,l.tickCount=n.length,t.appendChild(l),!0}return this.pos=o,t.appendChild(lc(n,this.sourcepos(e,this.pos-1))),!0},t.prototype.parseBackslash=function(t){var e,n=this.subject;this.pos+=1;var r=this.pos;return 10===this.peek()?(this.pos+=1,e=oc("linebreak",this.sourcepos(this.pos-1,this.pos)),t.appendChild(e),this.nextLine()):Ac.test(n.charAt(this.pos))?(t.appendChild(lc(n.charAt(this.pos),this.sourcepos(r,this.pos))),this.pos+=1):t.appendChild(lc("\\",this.sourcepos(r,r))),!0},t.prototype.parseAutolink=function(t){var e,n,r,o=this.pos+1;return(e=this.match(_c))?(n=e.slice(1,e.length-1),(r=oc("link",this.sourcepos(o,this.pos))).destination=Fl("mailto:"+n),r.title="",r.appendChild(lc(n,this.sourcepos(o+1,this.pos-1))),t.appendChild(r),!0):!!(e=this.match(Fc))&&(n=e.slice(1,e.length-1),(r=oc("link",this.sourcepos(o,this.pos))).destination=Fl(n),r.title="",r.appendChild(lc(n,this.sourcepos(o+1,this.pos-1))),t.appendChild(r),!0)},t.prototype.parseHtmlTag=function(t){var e=this.pos+1,n=this.match(hc);if(null===n)return!1;var r=oc("htmlInline",this.sourcepos(e,this.pos));return r.literal=n,t.appendChild(r),!0},t.prototype.scanDelims=function(t){var e=0,n=this.pos;if(39===t||34===t)e++,this.pos++;else for(;this.peek()===t;)e++,this.pos++;if(0===e||e<2&&(126===t||36===t))return this.pos=n,null;var r,o=0===n?"\n":this.subject.charAt(n-1),i=this.peek();r=-1===i?"\n":vc(i);var a,s,u=Pc.test(r),l=Ec.test(r),c=Pc.test(o),p=Ec.test(o),f=!u&&(!l||c||p),h=!c&&(!p||u||l);return 95===t?(a=f&&(!h||p),s=h&&(!f||l)):39===t||34===t?(a=f&&!h,s=h):36===t?(a=!u,s=!c):(a=f,s=h),this.pos=n,{numdelims:e,canOpen:a,canClose:s}},t.prototype.handleDelim=function(t,e){var n=this.scanDelims(t);if(!n)return!1;var r=n.numdelims,o=this.pos+1;this.pos+=r;var i=lc(39===t?"’":34===t?"“":this.subject.slice(o-1,this.pos),this.sourcepos(o,this.pos));return e.appendChild(i),(n.canOpen||n.canClose)&&(this.options.smart||39!==t&&34!==t)&&(this.delimiters={cc:t,numdelims:r,origdelims:r,node:i,previous:this.delimiters,next:null,canOpen:n.canOpen,canClose:n.canClose},this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)),!0},t.prototype.removeDelimiter=function(t){null!==t.previous&&(t.previous.next=t.next),null===t.next?this.delimiters=t.previous:t.next.previous=t.previous},t.prototype.removeDelimitersBetween=function(t,e){t.next!==e&&(t.next=e,e.previous=t)},t.prototype.processEmphasis=function(t){var e,n,r,o,i,a,s,u=!1,l=((e={})[95]=[t,t,t],e[42]=[t,t,t],e[39]=[t],e[34]=[t],e[126]=[t],e[36]=[t],e);for(r=this.delimiters;null!==r&&r.previous!==t;)r=r.previous;for(;null!==r;){var c=r.cc,p=95===c||42===c;if(r.canClose){for(n=r.previous,s=!1;null!==n&&n!==t&&n!==l[c][p?r.origdelims%3:0];){if(u=p&&(r.canOpen||n.canClose)&&r.origdelims%3!=0&&(n.origdelims+r.origdelims)%3==0,n.cc===r.cc&&n.canOpen&&!u){s=!0;break}n=n.previous}if(o=r,p||126===c||36===c)if(s){if(n){var f=r.numdelims>=2&&n.numdelims>=2?2:1,h=p?0:1;i=n.node,a=r.node;var d=p?1===f?"emph":"strong":"strike";36===c&&(d="customInline");var m=oc(d),v=i.sourcepos[1],g=a.sourcepos[0];m.sourcepos=[[v[0],v[1]-f+1],[g[0],g[1]+f-1]],i.sourcepos[1][1]-=f,a.sourcepos[0][1]+=f,i.literal=i.literal.slice(f),a.literal=a.literal.slice(f),n.numdelims-=f,r.numdelims-=f;for(var y=i.next,b=void 0;y&&y!==a;)b=y.next,y.unlink(),m.appendChild(y),y=b;if(36===c){var w=m.firstChild,k=w.literal||"",x=k.split(/\s/)[0];m.info=x,k.length===x.length+1?w.unlink():(w.sourcepos[0][1]+=x.length,w.literal=k.replace(x+" ",""))}if(i.insertAfter(m),this.removeDelimitersBetween(n,r),n.numdelims<=h&&(0===n.numdelims&&i.unlink(),this.removeDelimiter(n)),r.numdelims<=h){0===r.numdelims&&a.unlink();var C=r.next;this.removeDelimiter(r),r=C}}}else r=r.next;else 39===c?(r.node.literal="’",s&&(n.node.literal="‘"),r=r.next):34===c&&(r.node.literal="”",s&&(n.node.literal="“"),r=r.next);s||(l[c][p?o.origdelims%3:0]=o.previous,o.canOpen||this.removeDelimiter(o))}else r=r.next}for(;null!==this.delimiters&&this.delimiters!==t;)this.removeDelimiter(this.delimiters)},t.prototype.parseLinkTitle=function(){var t=this.match(Tc);return null===t?null:_l(t.substr(1,t.length-2))},t.prototype.parseLinkDestination=function(){var t=this.match(Mc);if(null===t){if(60===this.peek())return null;for(var e=this.pos,n=0,r=void 0;-1!==(r=this.peek());)if(92===r&&Ac.test(this.subject.charAt(this.pos+1)))this.pos+=1,-1!==this.peek()&&(this.pos+=1);else if(40===r)this.pos+=1,n+=1;else if(41===r){if(n<1)break;this.pos+=1,n-=1}else{if(null!==Rc.exec(vc(r)))break;this.pos+=1}return this.pos===e&&41!==r||0!==n?null:Fl(_l(t=this.subject.substr(e,this.pos-e)))}return Fl(_l(t.substr(1,t.length-2)))},t.prototype.parseLinkLabel=function(){var t=this.match($c);return null===t||t.length>1001?0:t.length},t.prototype.parseOpenBracket=function(t){var e=this.pos;this.pos+=1;var n=lc("[",this.sourcepos(this.pos,this.pos));return t.appendChild(n),this.addBracket(n,e,!1),!0},t.prototype.parseBang=function(t){var e=this.pos;if(this.pos+=1,91===this.peek()){this.pos+=1;var n=lc("![",this.sourcepos(this.pos-1,this.pos));t.appendChild(n),this.addBracket(n,e+1,!0)}else{n=lc("!",this.sourcepos(this.pos,this.pos));t.appendChild(n)}return!0},t.prototype.parseCloseBracket=function(t){var e=null,n=null,r=!1;this.pos+=1;var o=this.pos,i=this.brackets;if(null===i)return t.appendChild(lc("]",this.sourcepos(o,o))),!0;if(!i.active)return t.appendChild(lc("]",this.sourcepos(o,o))),this.removeBracket(),!0;var a=i.image,s=this.pos;40===this.peek()&&(this.pos++,this.spnl()&&null!==(e=this.parseLinkDestination())&&this.spnl()&&(Rc.test(this.subject.charAt(this.pos-1))&&(n=this.parseLinkTitle()),1)&&this.spnl()&&41===this.peek()?(this.pos+=1,r=!0):this.pos=s);var u="";if(!r){var l=this.pos,c=this.parseLinkLabel();if(c>2?u=this.subject.slice(l,l+c):i.bracketAfter||(u=this.subject.slice(i.index,o)),0===c&&(this.pos=s),u){u=kc(u);var p=this.refMap[u];p&&(e=p.destination,n=p.title,r=!0)}}if(r){var f=oc(a?"image":"link");f.destination=e,f.title=n||"",f.sourcepos=[i.startpos,this.sourcepos(this.pos)];for(var h=i.node.next,d=void 0;h;)d=h.next,h.unlink(),f.appendChild(h),h=d;if(t.appendChild(f),this.processEmphasis(i.previousDelimiter),this.removeBracket(),i.node.unlink(),!a)for(i=this.brackets;null!==i;)i.image||(i.active=!1),i=i.previous;return this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:u}),!0}return this.removeBracket(),this.pos=o,t.appendChild(lc("]",this.sourcepos(o,o))),this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:u}),!0},t.prototype.addBracket=function(t,e,n){null!==this.brackets&&(this.brackets.bracketAfter=!0),this.brackets={node:t,startpos:this.sourcepos(e+(n?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:e,image:n,active:!0}},t.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)},t.prototype.parseEntity=function(t){var e,n=this.pos+1;return!!(e=this.match(Sc))&&(t.appendChild(lc(Ml.decodeHTML(e),this.sourcepos(n,this.pos))),!0)},t.prototype.parseString=function(t){var e,n=this.pos+1;if(e=this.match(qc)){if(this.options.smart){var r=e.replace(Lc,"…").replace(Ic,(function(t){var e=0,n=0;return t.length%3==0?n=t.length/3:t.length%2==0?e=t.length/2:t.length%3==2?(e=1,n=(t.length-2)/3):(e=2,n=(t.length-4)/3),Pl("—",n)+Pl("–",e)}));t.appendChild(lc(r,this.sourcepos(n,this.pos)))}else{var o=lc(e,this.sourcepos(n,this.pos));t.appendChild(o)}return!0}return!1},t.prototype.parseNewline=function(t){this.pos+=1;var e=t.lastChild;if(e&&"text"===e.type&&" "===e.literal[e.literal.length-1]){var n=" "===e.literal[e.literal.length-2],r=e.literal.length;e.literal=e.literal.replace(zc,"");var o=r-e.literal.length;e.sourcepos[1][1]-=o,t.appendChild(oc(n?"linebreak":"softbreak",this.sourcepos(this.pos-o,this.pos)))}else t.appendChild(oc("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(jc),!0},t.prototype.parseReference=function(t,e){if(!this.options.referenceDefinition)return 0;this.subject=t.stringContent,this.pos=0;var n=null,r=this.pos,o=this.parseLinkLabel();if(0===o)return 0;var i=this.subject.substr(0,o);if(58!==this.peek())return this.pos=r,0;this.pos++,this.spnl();var a=this.parseLinkDestination();if(null===a)return this.pos=r,0;var s=this.pos;this.spnl(),this.pos!==s&&(n=this.parseLinkTitle()),null===n&&(n="",this.pos=s);var u=!0;if(null===this.match(Hc)&&(""===n?u=!1:(n="",this.pos=s,u=null!==this.match(Hc))),!u)return this.pos=r,0;var l=kc(i);if(""===l)return this.pos=r,0;var c=this.getReferenceDefSourcepos(t);t.sourcepos[0][0]=c[1][0]+1;var p=oc("refDef",c);return p.title=n,p.dest=a,p.label=l,t.insertBefore(p),e[l]?this.refDefCandidateMap[p.id]=p:e[l]=Lp(p),this.pos-r},t.prototype.mergeTextNodes=function(t){for(var e,n=[];e=t.next();){var r=e.entering,o=e.node;if(r&&"text"===o.type)n.push(o);else if(1===n.length)n=[];else if(n.length>1){var i=n[0],a=n[n.length-1];i.sourcepos&&a.sourcepos&&(i.sourcepos[1]=a.sourcepos[1]),i.next=a.next,i.next&&(i.next.prev=i);for(var s=1;s<n.length;s+=1)i.literal+=n[s].literal,n[s].unlink();n=[]}}},t.prototype.getReferenceDefSourcepos=function(t){for(var e=t.stringContent.split(/\n|\r\n/),n=!1,r=0,o={line:0,ch:0},i=0;i<e.length;i+=1){var a=e[i];if(Rc.test(a))break;if(/\:/.test(a)&&0===r){if(n)break;var s=a.indexOf(":")===a.length-1?i+1:i;o={line:s,ch:e[s].length},n=!0}var u=a.match(/'|"/g);if(u&&(r+=u.length),2===r){o={line:i,ch:a.length};break}}return[[t.sourcepos[0][0],t.sourcepos[0][1]],[t.sourcepos[0][0]+o.line,o.ch]]},t.prototype.parseInline=function(t){var e,n=!1,r=this.peek();if(-1===r)return!1;switch(r){case 10:n=this.parseNewline(t);break;case 92:n=this.parseBackslash(t);break;case 96:n=this.parseBackticks(t);break;case 42:case 95:case 126:case 36:n=this.handleDelim(r,t);break;case 39:case 34:n=!!(null===(e=this.options)||void 0===e?void 0:e.smart)&&this.handleDelim(r,t);break;case 91:n=this.parseOpenBracket(t);break;case 33:n=this.parseBang(t);break;case 93:n=this.parseCloseBracket(t);break;case 60:n=this.parseAutolink(t)||this.parseHtmlTag(t);break;case 38:n=this.parseEntity(t);break;default:n=this.parseString(t)}return n||(this.pos+=1,t.appendChild(lc(vc(r),this.sourcepos(this.pos,this.pos+1)))),!0},t.prototype.parse=function(t){for(this.subject=t.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=t.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=t.sourcepos[0][0],function(t){return"heading"===t.type}(t)&&(this.lineOffsets[0]+=t.level+1);this.parseInline(t););t.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(t.walker());var e=this.options,n=e.extendedAutolinks,r=e.customParser;if(n&&function(t,e){var n;"boolean"==typeof e&&(e=bc);for(var r=function(){var t=n.entering,r=n.node;if(t&&"text"===r.type&&"link"!==r.parent.type){var o=r.literal,i=e(o);if(!i||!i.length)return"continue";for(var a=0,s=r.sourcepos[0],u=s[0],l=s[1],c=function(t,e){return[[u,l+t],[u,l+e]]},p=[],f=0,h=i;f<h.length;f++){var d=h[f],m=d.range,v=d.url,g=d.text;m[0]>a&&p.push(lc(o.substring(a,m[0]),c(a,m[0]-1)));var y=oc("link",c.apply(void 0,m));y.appendChild(lc(g,c.apply(void 0,m))),y.destination=v,y.extendedAutolink=!0,p.push(y),a=m[1]+1}a<o.length&&p.push(lc(o.substring(a),c(a,o.length-1)));for(var b=0,w=p;b<w.length;b++){var k=w[b];r.insertBefore(k)}r.unlink()}};n=t.next();)r()}(t.walker(),n),r&&t.firstChild)for(var o,i=t.firstChild.walker();o=i.next();){var a=o.node,s=o.entering;r[a.type]&&r[a.type](a,{entering:s,options:this.options})}},t}(),Uc=/^\[([ \txX])\][ \t]+/;var Wc=/[^ \t\f\v\r\n]/,Jc=/^(?:`{3,}|~{3,})(?= *$)/;function Kc(t){for(var e=t;e;){if(e.lastLineBlank)return!0;var n=e.type;if(e.lastLineChecked||"list"!==n&&"item"!==n){e.lastLineChecked=!0;break}e.lastLineChecked=!0,e=e.lastChild}return!1}function Zc(t,e){return e<t.length?t.charCodeAt(e):-1}function Gc(t){return!Wc.test(t)}function Xc(t){return 32===t||9===t}var Qc=/^\$\$$/,Yc={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},tp={document:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(t,e){for(var n=e.firstChild;n;){if(Kc(n)&&n.next){e.listData.tight=!1;break}for(var r=n.firstChild;r;){if(Kc(r)&&(n.next||r.next)){e.listData.tight=!1;break}r=r.next}n=n.next}},canContain:function(t){return"item"===t},acceptsLines:!1},blockQuote:{continue:function(t){var e=t.currentLine;return t.indented||62!==Zc(e,t.nextNonspace)?1:(t.advanceNextNonspace(),t.advanceOffset(1,!1),Xc(Zc(e,t.offset))&&t.advanceOffset(1,!0),0)},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},item:{continue:function(t,e){if(t.blank){if(null===e.firstChild)return 1;t.advanceNextNonspace()}else{if(!(t.indent>=e.listData.markerOffset+e.listData.padding))return 1;t.advanceOffset(e.listData.markerOffset+e.listData.padding,!0)}return 0},finalize:function(t,e){if(e.firstChild&&"paragraph"===e.firstChild.type){var n=e.firstChild,r=n.stringContent.match(Uc);if(r){var o=r[0].length;n.stringContent=n.stringContent.substring(o-1),n.sourcepos[0][1]+=o,n.lineOffsets[0]+=o,e.listData.task=!0,e.listData.checked=/[xX]/.test(r[1])}}},canContain:function(t){return"item"!==t},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematicBreak:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},codeBlock:{continue:function(t,e){var n=t.currentLine,r=t.indent;if(e.isFenced){var o=r<=3&&n.charAt(t.nextNonspace)===e.fenceChar&&n.slice(t.nextNonspace).match(Jc);if(o&&o[0].length>=e.fenceLength)return t.lastLineLength=t.offset+r+o[0].length,t.finalize(e,t.lineNumber),2;for(var i=e.fenceOffset;i>0&&Xc(Zc(n,t.offset));)t.advanceOffset(1,!0),i--}else if(r>=4)t.advanceOffset(4,!0);else{if(!t.blank)return 1;t.advanceNextNonspace()}return 0},finalize:function(t,e){var n;if(null!==e.stringContent){if(e.isFenced){var r=e.stringContent,o=r.indexOf("\n"),i=r.slice(0,o),a=r.slice(o+1),s=i.match(/^(\s*)(.*)/);e.infoPadding=s[1].length,e.info=_l(s[2].trim()),e.literal=a}else e.literal=null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,"\n");e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},htmlBlock:{continue:function(t,e){return!t.blank||6!==e.htmlBlockType&&7!==e.htmlBlockType?0:1},finalize:function(t,e){var n;e.literal=(null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,""))||null,e.stringContent=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(t){return t.blank?1:0},finalize:function(t,e){if(null!==e.stringContent){for(var n,r=!1;91===Zc(e.stringContent,0)&&(n=t.inlineParser.parseReference(e,t.refMap));)e.stringContent=e.stringContent.slice(n),r=!0;r&&Gc(e.stringContent)&&e.unlink()}},canContain:function(){return!1},acceptsLines:!0},table:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableHead"===t||"tableBody"===t},acceptsLines:!1},tableBody:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableRow"===t},acceptsLines:!1},tableHead:{continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableRow"===t||"tableDelimRow"===t},acceptsLines:!1},tableRow:{continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableCell"===t},acceptsLines:!1},tableCell:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},tableDelimRow:{continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableDelimCell"===t},acceptsLines:!1},tableDelimCell:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},refDef:Yc,customBlock:{continue:function(t,e){var n=t.currentLine,r=n.match(Qc);if(r)return t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2;for(var o=e.offset;o>0&&Xc(Zc(n,t.offset));)t.advanceOffset(1,!0),o--;return 0},finalize:function(t,e){if(null!==e.stringContent){var n=e.stringContent,r=n.indexOf("\n"),o=n.slice(0,r),i=n.slice(r+1),a=o.match(/^(\s*)(.*)/);e.info=_l(a[2].trim()),e.literal=i,e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},frontMatter:Yc};function ep(t){for(var e=0,n=0,r=[],o=0;o<t.length;o+=1)if("|"===t[o]&&"\\"!==t[o-1]){var i=t.substring(e,o);0===e&&zl(i)?n=o+1:r.push(i),e=o+1}e<t.length&&(zl(i=t.substring(e,t.length))||r.push(i));return[n,r]}function np(t,e,n,r){for(var o=[],i=0,a=e;i<a.length;i++){var s=a[i],u=s.match(/^[ \t]+/),l=u?u[0].length:0,c=void 0,p=void 0;if(l===s.length)l=0,c=0,p="";else{var f=s.match(/[ \t]+$/);c=f?f[0].length:0,p=s.slice(l,s.length-c)}var h=r+l,d=oc(t,[[n,r],[n,r+s.length-1]]);d.stringContent=p.replace(/\\\|/g,"|"),d.startIdx=o.length,d.endIdx=o.length,d.lineOffsets=[h-1],d.paddingLeft=l,d.paddingRight=c,o.push(d),r+=s.length+1}return o}function rp(t){var e=null,n=t.stringContent,r=n[0];return":"===n[n.length-1]?e=":"===r?"center":"right":":"===r&&(e="left"),{align:e}}var op=/^(\$\$)(\s*[a-zA-Z])+/,ip=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,ap=/^`{3,}(?!.*`)|^~{3,}/,sp=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+pc+"|"+fc+")\\s*$","i")],up=/^(?:=+|-+)[ \t]*$/,lp=/^#{1,6}(?:[ \t]+|$)/,cp=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,pp=/^[*+-]/,fp=/^(\d{1,9})([.)])/;function hp(t,e){return t.options.disallowDeepHeading&&("blockQuote"===e.type||"item"===e.type)}var dp=[function(t){return t.indented||62!==Zc(t.currentLine,t.nextNonspace)?0:(t.advanceNextNonspace(),t.advanceOffset(1,!1),Xc(Zc(t.currentLine,t.offset))&&t.advanceOffset(1,!0),t.closeUnmatchedBlocks(),t.addChild("blockQuote",t.nextNonspace),1)},function(t,e){var n;if(!t.indented&&!hp(t,e)&&(n=t.currentLine.slice(t.nextNonspace).match(lp))){t.advanceNextNonspace(),t.advanceOffset(n[0].length,!1),t.closeUnmatchedBlocks();var r=t.addChild("heading",t.nextNonspace);return r.level=n[0].trim().length,r.headingType="atx",r.stringContent=t.currentLine.slice(t.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),t.advanceOffset(t.currentLine.length-t.offset),2}return 0},function(t){var e;if(!t.indented&&(e=t.currentLine.slice(t.nextNonspace).match(ap))){var n=e[0].length;t.closeUnmatchedBlocks();var r=t.addChild("codeBlock",t.nextNonspace);return r.isFenced=!0,r.fenceLength=n,r.fenceChar=e[0][0],r.fenceOffset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},function(t,e){if(!t.indented&&60===Zc(t.currentLine,t.nextNonspace)){var n=t.currentLine.slice(t.nextNonspace),r=t.options.disallowedHtmlBlockTags,o=void 0;for(o=1;o<=7;o++){var i=n.match(sp[o]);if(i){if(7===o){if("paragraph"===e.type)return 0;if(r.length>0)if(new RegExp("</?(?:"+r.join("|")+")","i").test(i[0]))return 0}return t.closeUnmatchedBlocks(),t.addChild("htmlBlock",t.offset).htmlBlockType=o,2}}}return 0},function(t,e){var n;if(null!==e.stringContent&&!t.indented&&"paragraph"===e.type&&!hp(t,e.parent)&&(n=t.currentLine.slice(t.nextNonspace).match(up))){t.closeUnmatchedBlocks();for(var r=void 0;91===Zc(e.stringContent,0)&&(r=t.inlineParser.parseReference(e,t.refMap));)e.stringContent=e.stringContent.slice(r);if(e.stringContent.length>0){var o=oc("heading",e.sourcepos);return o.level="="===n[0][0]?1:2,o.headingType="setext",o.stringContent=e.stringContent,e.insertAfter(o),e.unlink(),t.tip=o,t.advanceOffset(t.currentLine.length-t.offset,!1),2}return 0}return 0},function(t){return!t.indented&&cp.test(t.currentLine.slice(t.nextNonspace))?(t.closeUnmatchedBlocks(),t.addChild("thematicBreak",t.nextNonspace),t.advanceOffset(t.currentLine.length-t.offset,!1),2):0},function(t,e){var n,r,o,i=e;return t.indented&&"list"!==e.type||!(n=function(t,e){var n,r,o=t.currentLine.slice(t.nextNonspace),i={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:t.indent,task:!1,checked:!1};if(t.indent>=4)return null;if(n=o.match(pp))i.type="bullet",i.bulletChar=n[0][0];else{if(!(n=o.match(fp))||"paragraph"===e.type&&"1"!==n[1])return null;i.type="ordered",i.start=parseInt(n[1],10),i.delimiter=n[2]}if(-1!==(r=Zc(t.currentLine,t.nextNonspace+n[0].length))&&9!==r&&32!==r)return null;if("paragraph"===e.type&&!t.currentLine.slice(t.nextNonspace+n[0].length).match(Wc))return null;t.advanceNextNonspace(),t.advanceOffset(n[0].length,!0);var a=t.column,s=t.offset;do{t.advanceOffset(1,!0),r=Zc(t.currentLine,t.offset)}while(t.column-a<5&&Xc(r));var u=-1===Zc(t.currentLine,t.offset),l=t.column-a;return l>=5||l<1||u?(i.padding=n[0].length+1,t.column=a,t.offset=s,Xc(Zc(t.currentLine,t.offset))&&t.advanceOffset(1,!0)):i.padding=n[0].length+l,i}(t,i))?0:(t.closeUnmatchedBlocks(),"list"===t.tip.type&&(r=i.listData,o=n,r.type===o.type&&r.delimiter===o.delimiter&&r.bulletChar===o.bulletChar)||((i=t.addChild("list",t.nextNonspace)).listData=n),(i=t.addChild("item",t.nextNonspace)).listData=n,1)},function(t){return t.indented&&"paragraph"!==t.tip.type&&!t.blank?(t.advanceOffset(4,!0),t.closeUnmatchedBlocks(),t.addChild("codeBlock",t.offset),2):0},function(t,e){var n=e.stringContent;if("paragraph"===e.type&&!t.indented&&!t.blank){var r=n.length-1,o=n.lastIndexOf("\n",r-1)+1,i=n.slice(o,r),a=t.currentLine.slice(t.nextNonspace),s=ep(i),u=s[0],l=s[1],c=ep(a),p=c[0],f=c[1],h=/^[ \t]*:?-+:?[ \t]*$/;if(!l.length||!f.length||f.some((function(t){return!h.test(t)}))||1===f.length&&0!==a.indexOf("|"))return 0;var d=e.lineOffsets,m=t.lineNumber-1,v=wc(d)+1,g=oc("table",[[m,v],[t.lineNumber,t.offset]]);if(g.columns=f.map((function(){return{align:null}})),e.insertAfter(g),1===d.length)e.unlink();else{e.stringContent=n.slice(0,o);var y=o-(n.lastIndexOf("\n",o-2)+1)-1;t.lastLineLength=d[d.length-2]+y,t.finalize(e,m-1)}t.advanceOffset(t.currentLine.length-t.offset,!1);var b=oc("tableHead",[[m,v],[t.lineNumber,t.offset]]);g.appendChild(b);var w=oc("tableRow",[[m,v],[m,v+i.length-1]]),k=oc("tableDelimRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.offset]]);b.appendChild(w),b.appendChild(k),np("tableCell",l,m,v+u).forEach((function(t){w.appendChild(t)}));var x=np("tableDelimCell",f,t.lineNumber,t.nextNonspace+1+p);return x.forEach((function(t){k.appendChild(t)})),g.columns=x.map(rp),t.tip=g,2}return 0},function(t,e){if("table"!==e.type&&"tableBody"!==e.type||!t.blank&&-1===t.currentLine.indexOf("|"))return 0;if(t.advanceOffset(t.currentLine.length-t.offset,!1),t.blank){var n=e;return"tableBody"===e.type&&(n=e.parent,t.finalize(e,t.lineNumber-1)),t.finalize(n,t.lineNumber-1),0}var r=e;"table"===e.type&&((r=t.addChild("tableBody",t.nextNonspace)).stringContent=null);var o=oc("tableRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.currentLine.length]]);r.appendChild(o);var i=r.parent,a=ep(t.currentLine.slice(t.nextNonspace)),s=a[0];return np("tableCell",a[1],t.lineNumber,t.nextNonspace+1+s).forEach((function(t,e){e>=i.columns.length&&(t.ignored=!0),o.appendChild(t)})),2},function(t){var e;if(!t.indented&&!ip.test(t.currentLine)&&(e=t.currentLine.match(op))){var n=e[1].length;t.closeUnmatchedBlocks();var r=t.addChild("customBlock",t.nextNonspace);return r.syntaxLength=n,r.offset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0}],mp=/^(-{3}|\+{3}|;{3})$/,vp=function(t,e){var n=t.currentLine,r=t.lineNumber,o=t.indented;return 1===r&&!o&&"document"===e.type&&mp.test(n)?(t.closeUnmatchedBlocks(),t.addChild("frontMatter",t.nextNonspace).stringContent=n,t.advanceNextNonspace(),t.advanceOffset(n.length,!1),2):0},gp={continue:function(t,e){var n=t.currentLine,r=n.match(mp);return"frontMatter"===e.type&&r?(e.stringContent+=n,t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2):0},finalize:function(t,e){null!==e.stringContent&&(e.literal=e.stringContent,e.stringContent=null)},canContain:function(){return!1},acceptsLines:!0},yp=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],bp=/^[#`~*+_=<>0-9-;$]/,wp=/\r\n|\n|\r/;function kp(){return oc("document",[[1,1],[0,0]])}var xp={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},Cp=function(){function t(t){this.options=hl(hl({},xp),t),this.doc=kp(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter&&(tp.frontMatter=gp,dp.unshift(vp)),this.inlineParser=new Vc(this.options)}return t.prototype.advanceOffset=function(t,e){void 0===e&&(e=!1);for(var n,r,o,i=this.currentLine;t>0&&(o=i[this.offset]);)"\t"===o?(n=4-this.column%4,e?(this.partiallyConsumedTab=n>t,r=n>t?t:n,this.column+=r,this.offset+=this.partiallyConsumedTab?0:1,t-=r):(this.partiallyConsumedTab=!1,this.column+=n,this.offset+=1,t-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,t-=1)},t.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},t.prototype.findNextNonspace=function(){for(var t,e=this.currentLine,n=this.offset,r=this.column;""!==(t=e.charAt(n));)if(" "===t)n++,r++;else{if("\t"!==t)break;n++,r+=4-r%4}this.blank="\n"===t||"\r"===t||""===t,this.nextNonspace=n,this.nextNonspaceColumn=r,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=4},t.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var t=4-this.column%4;this.tip.stringContent+=Pl(" ",t)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset],this.tip.stringContent+=this.currentLine.slice(this.offset)+"\n"},t.prototype.addChild=function(t,e){for(;!tp[this.tip.type].canContain(t);)this.finalize(this.tip,this.lineNumber-1);var n=e+1,r=oc(t,[[this.lineNumber,n],[0,0]]);return r.stringContent="",this.tip.appendChild(r),this.tip=r,r},t.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var t=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=t}this.allClosed=!0}},t.prototype.finalize=function(t,e){var n=t.parent;t.open=!1,t.sourcepos[1]=[e,this.lastLineLength],tp[t.type].finalize(this,t),this.tip=n},t.prototype.processInlines=function(t){var e,n=this.options.customParser,r=t.walker();for(this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;e=r.next();){var o=e.node,i=e.entering,a=o.type;n&&n[a]&&n[a](o,{entering:i,options:this.options}),i||"paragraph"!==a&&"heading"!==a&&("tableCell"!==a||o.ignored)||this.inlineParser.parse(o)}},t.prototype.incorporateLine=function(t){var e=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,-1!==t.indexOf("\0")&&(t=t.replace(/\0/g,"�")),this.currentLine=t;for(var n,r=!0;(n=e.lastChild)&&n.open;){switch(e=n,this.findNextNonspace(),tp[e.type].continue(this,e)){case 0:break;case 1:r=!1;break;case 2:return void(this.lastLineLength=t.length);default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!r){e=e.parent;break}}this.allClosed=e===this.oldtip,this.lastMatchedContainer=e;for(var o="paragraph"!==e.type&&tp[e.type].acceptsLines,i=dp.length;!o;){if(this.findNextNonspace(),"table"!==e.type&&"tableBody"!==e.type&&"paragraph"!==e.type&&!this.indented&&!bp.test(t.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var a=0;a<i;){var s=dp[a](this,e);if(1===s){e=this.tip;break}if(2===s){e=this.tip,o=!0;break}a++}if(a===i){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks(),this.blank&&e.lastChild&&(e.lastChild.lastLineBlank=!0);for(var u=e.type,l=this.blank&&!("blockQuote"===u||ic(e)&&e.isFenced||"item"===u&&!e.firstChild&&e.sourcepos[0][0]===this.lineNumber),c=e;c;)c.lastLineBlank=l,c=c.parent;tp[u].acceptsLines?(this.addLine(),"htmlBlock"===e.type&&e.htmlBlockType>=1&&e.htmlBlockType<=5&&yp[e.htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=t.length,this.finalize(e,this.lineNumber))):this.offset<t.length&&!this.blank&&(e=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}else this.addLine();this.lastLineLength=t.length},t.prototype.parse=function(t,e){this.doc=kp(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var n=t.split(wp),r=n.length;this.lines=e||n,this.options.referenceDefinition&&this.clearRefMaps(),10===t.charCodeAt(t.length-1)&&(r-=1);for(var o=0;o<r;o++)this.incorporateLine(n[o]);for(;this.tip;)this.finalize(this.tip,r);return this.processInlines(this.doc),this.doc},t.prototype.partialParseStart=function(t,e){this.doc=kp(),this.tip=this.doc,this.lineNumber=t-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";for(var n=e.length,r=0;r<n;r++)this.incorporateLine(e[r]);return this.doc},t.prototype.partialParseExtends=function(t){for(var e=0;e<t.length;e++)this.incorporateLine(t[e])},t.prototype.partialParseFinish=function(){for(;this.tip;)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},t.prototype.setRefMaps=function(t,e,n){this.refMap=t,this.refLinkCandidateMap=e,this.refDefCandidateMap=n},t.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){var e;e=t,Object.keys(e).forEach((function(t){delete e[t]}))}))},t}();function Dp(t,e){return t[0]<e[0]?1:t[0]>e[0]?-1:t[1]<e[1]?1:t[1]>e[1]?-1:0}function Ep(t,e){var n=t[0];return 1===Dp(t[1],e)?1:-1===Dp(n,e)?-1:0}function Tp(t,e){for(var n=0,r=e;n<r.length;n++){var o=r[n];t.insertBefore(o)}}function Mp(t,e){var n=t[0];return t[1][0]<e?1:n[0]>e?-1:0}function Ap(t,e){for(var n=t.firstChild;n;){var r=Mp(n.sourcepos,e);if(0===r)return n;if(-1===r)return n.prev||n;n=n.next}return t.lastChild}function Sp(t){return function(t){return ql[t]}(t)||null}function Op(t,e,n){if(void 0===n&&(n=null),e)for(var r=e.walker();e&&e!==n;){t(e);var o=r.next();if(!o)break;e=o.node}}var Np=/\r\n|\n|\r/;function Lp(t){return{id:t.id,title:t.title,sourcepos:t.sourcepos,unlinked:!1,destination:t.dest}}var Ip=function(){function t(t,e){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(null==e?void 0:e.referenceDefinition),this.parser=new Cp(e),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},t=t||"",this.lineTexts=t.split(Np),this.root=this.parser.parse(t,this.lineTexts)}return t.prototype.updateLineTexts=function(t,e,n){var r,o=t[0],i=t[1],a=e[0],s=e[1],u=n.split(Np),l=u.length,c=this.lineTexts[o-1],p=this.lineTexts[a-1];u[0]=c.slice(0,i-1)+u[0],u[l-1]=u[l-1]+p.slice(s-1);var f=a-o+1;return(r=this.lineTexts).splice.apply(r,dl([o-1,f],u)),l-f},t.prototype.updateRootNodeState=function(){if(1===this.lineTexts.length&&""===this.lineTexts[0])return this.root.lastLineBlank=!0,void(this.root.sourcepos=[[1,1],[1,0]]);this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);for(var t=this.lineTexts,e=t.length-1;""===t[e];)e-=1;t.length-2>e&&(e+=1),this.root.sourcepos[1]=[e+1,t[e].length]},t.prototype.replaceRangeNodes=function(t,e,n){t?(Tp(t,n),function(t,e){if(t.parent===e.parent&&t!==e){for(var n=t.next;n&&n!==e;){for(var r=n.next,o=0,i=["parent","prev","next"];o<i.length;o++){var a=i[o];n[a]&&(Vl(n[a].id),n[a]=null)}n=r}t.next=e.next,e.next?e.next.prev=t:t.parent.lastChild=t}}(t,e),[t.id,e.id].forEach((function(t){return Vl(t)})),t.unlink()):e?(Tp(e,n),Vl(e.id),e.unlink()):function(t,e){for(var n=e.length-1;n>=0;n-=1)t.prependChild(e[n])}(this.root,n)},t.prototype.getNodeRange=function(t,e){var n=Ap(this.root,t[0]),r=Ap(this.root,e[0]);return r&&r.next&&e[0]+1===r.next.sourcepos[0][0]&&(r=r.next),[n,r]},t.prototype.trigger=function(t,e){this.eventHandlerMap[t].forEach((function(t){t(e)}))},t.prototype.extendEndLine=function(t){for(;""===this.lineTexts[t];)t+=1;return t},t.prototype.parseRange=function(t,e,n,r){var o;t&&t.prev&&(ac(t.prev)&&function(t){var e=t.match(/^[ \t]+/);if(e&&(e[0].length>=2||/\t/.test(e[0])))return!0;var n=e?t.slice(e.length):t;return pp.test(n)||fp.test(n)}(this.lineTexts[n-1])||"table"===t.prev.type&&(!Gc(o=this.lineTexts[n-1])&&-1!==o.indexOf("|")))&&(n=(t=t.prev).sourcepos[0][0]);for(var i=this.lineTexts.slice(n-1,r),a=this.parser.partialParseStart(n,i),s=e?e.next:this.root.firstChild,u=a.lastChild,l=u&&ic(u)&&u.open,c=u&&uc(u)&&u.open,p=u&&ac(u);(l||c)&&s||p&&s&&("list"===s.type||s.sourcepos[0][1]>=2);){var f=this.extendEndLine(s.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(r,f)),t||(t=e),e=s,r=f,s=s.next}return this.parser.partialParseFinish(),{newNodes:function(t){for(var e=[],n=t.firstChild;n;)e.push(n),n=n.next;return e}(a),extStartNode:t,extEndNode:e}},t.prototype.getRemovedNodeRange=function(t,e){return!t||t&&sc(t)||e&&sc(e)?null:{id:[t.id,e.id],line:[t.sourcepos[0][0]-1,e.sourcepos[1][0]-1]}},t.prototype.markDeletedRefMap=function(t,e){var n=this;if(!Cc(this.refMap)){var r=function(t){if(sc(t)){var e=n.refMap[t.label];e&&t.id===e.id&&(e.unlinked=!0)}};t&&Op(r,t.parent,e),e&&Op(r,e)}},t.prototype.replaceWithNewRefDefState=function(t){var e=this;if(!Cc(this.refMap)){var n=function(t){if(sc(t)){var n=t.label,r=e.refMap[n];r&&!r.unlinked||(e.refMap[n]=Lp(t))}};t.forEach((function(t){Op(n,t)}))}},t.prototype.replaceWithRefDefCandidate=function(){var t=this;Cc(this.refDefCandidateMap)||xc(this.refDefCandidateMap,(function(e,n){var r=n.label,o=n.sourcepos,i=t.refMap[r];(!i||i.unlinked||i.sourcepos[0][0]>o[0][0])&&(t.refMap[r]=Lp(n))}))},t.prototype.getRangeWithRefDef=function(t,e,n,r,o){if(this.referenceDefinition&&!Cc(this.refMap)){var i=Ap(this.root,t-1),a=Ap(this.root,e+1);i&&sc(i)&&i!==n&&i!==r&&(t=(n=i).sourcepos[0][0]),a&&sc(a)&&a!==n&&a!==r&&(r=a,e=this.extendEndLine(r.sourcepos[1][0]+o))}return[n,r,t,e]},t.prototype.parse=function(t,e,n){void 0===n&&(n=0);var r=this.getNodeRange(t,e),o=r[0],i=r[1],a=o?Math.min(o.sourcepos[0][0],t[0]):t[0],s=this.extendEndLine((i?Math.max(i.sourcepos[1][0],e[0]):e[0])+n),u=this.parseRange.apply(this,this.getRangeWithRefDef(a,s,o,i,n)),l=u.newNodes,c=u.extStartNode,p=u.extEndNode,f=this.getRemovedNodeRange(c,p),h=p?p.next:this.root.firstChild;return this.referenceDefinition?(this.markDeletedRefMap(c,p),this.replaceRangeNodes(c,p,l),this.replaceWithNewRefDefState(l)):this.replaceRangeNodes(c,p,l),{nodes:l,removedNodeRange:f,nextNode:h}},t.prototype.parseRefLink=function(){var t=this,e=[];return Cc(this.refMap)||xc(this.refMap,(function(n,r){r.unlinked&&delete t.refMap[n],xc(t.refLinkCandidateMap,(function(r,o){var i=o.node;o.refLabel===n&&e.push(t.parse(i.sourcepos[0],i.sourcepos[1]))}))})),e},t.prototype.removeUnlinkedCandidate=function(){Cc(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){xc(t,(function(e){(function(t){var e=Sp(t);if(!e)return!0;for(;e&&"document"!==e.type;){if(!e.parent&&!e.prev&&!e.next)return!0;e=e.parent}return!1})(e)&&delete t[e]}))}))},t.prototype.editMarkdown=function(t,e,n){var r=this.updateLineTexts(t,e,n),o=this.parse(t,e,r),i=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=hl({},t);return e.forEach((function(t){delete r[t]})),r}(o,"nextNode");!function(t,e){if(t&&t.parent&&0!==e){var n,r=t.parent.walker();for(r.resumeAt(t,!0);n=r.next();){var o=n.node;n.entering&&(o.sourcepos[0][0]+=e,o.sourcepos[1][0]+=e)}}}(o.nextNode,r),this.updateRootNodeState();var a=[i];return this.referenceDefinition&&(this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),a=a.concat(this.parseRefLink())),this.trigger("change",a),a},t.prototype.getLineTexts=function(){return this.lineTexts},t.prototype.getRootNode=function(){return this.root},t.prototype.findNodeAtPosition=function(t){var e=function(t,e){for(var n=t,r=null;n;){var o=Ep(n.sourcepos,e);if(0===o){if(!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===o)return r;if(!n.next)return r;n=n.next}}return n}(this.root,t);return e&&e!==this.root?e:null},t.prototype.findFirstNodeAtLine=function(t){return function(t,e){for(var n=t.firstChild,r=null;n;){var o=Mp(n.sourcepos,e);if(0===o){if(n.sourcepos[0][0]===e||!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===o)break;r=n,n=n.next}}return r?function(t){for(;t.parent&&"document"!==t.parent.type&&t.parent.sourcepos[0][0]===t.sourcepos[0][0];)t=t.parent;return t}(function(t){for(;t.lastChild;)t=t.lastChild;return t}(r)):null}(this.root,t)},t.prototype.on=function(t,e){this.eventHandlerMap[t].push(e)},t.prototype.off=function(t,e){var n=this.eventHandlerMap[t],r=n.indexOf(e);n.splice(r,1)},t.prototype.findNodeById=function(t){return Sp(t)},t.prototype.removeAllNode=function(){ql={}},t}(),_p=new RegExp("<(/?(?:"+["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"].join("|")+")[^>]*>)","ig");function Fp(t){return _p.test(t)?t.replace(_p,(function(t,e){return"&lt;"+e})):t}var Bp={heading:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"h"+t.level,outerNewLine:!0}},text:function(t){return{type:"text",content:t.literal}},softbreak:function(t,e){return{type:"html",content:e.options.softbreak}},linebreak:function(){return{type:"html",content:"<br />\n"}},emph:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"em"}},strong:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"strong"}},paragraph:function(t,e){var n,r=e.entering,o=null===(n=t.parent)||void 0===n?void 0:n.parent;return o&&"list"===o.type&&o.listData.tight?null:{type:r?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(t,e){var n=e.entering,r=t.listData,o=r.type,i=r.start,a="bullet"===o?"ul":"ol",s={};return"ol"===a&&null!==i&&1!==i&&(s.start=i.toString()),{type:n?"openTag":"closeTag",tagName:a,attributes:s,outerNewLine:!0}},item:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(t,e){return{type:"html",content:e.options.tagFilter?Fp(t.literal):t.literal}},htmlBlock:function(t,e){var n=e.options,r=n.tagFilter?Fp(t.literal):t.literal;return n.nodeId?[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:r},{type:"closeTag",tagName:"div",outerNewLine:!0}]:{type:"html",content:r,outerNewLine:!0}},code:function(t){return[{type:"openTag",tagName:"code"},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t.info,n=e?e.split(/\s+/):[],r=[];return n.length>0&&n[0].length>0&&r.push("language-"+Rl(n[0])),[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:r},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(t,e){if(e.entering){var n=t,r=n.title,o=n.destination;return{type:"openTag",tagName:"a",attributes:hl({href:Rl(o)},r&&{title:Rl(r)})}}return{type:"closeTag",tagName:"a"}},image:function(t,e){var n=e.getChildrenText,r=e.skipChildren,o=t,i=o.title,a=o.destination;return r(),{type:"openTag",tagName:"img",selfClose:!0,attributes:hl({src:Rl(a),alt:n(t)},i&&{title:Rl(i)})}},customBlock:function(t,e,n){var r=n[t.info.trim().toLowerCase()];if(r)try{return r(t,e)}catch(o){console.warn(o)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(t){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(t,e,n){var r=n[t.info.trim().toLowerCase()];return r?r(t,e):{type:e.entering?"openTag":"closeTag",tagName:"span"}}},Rp={strike:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"del"}},item:function(t,e){var n=e.entering,r=t.listData,o=r.checked,i=r.task;if(n){var a={type:"openTag",tagName:"li",outerNewLine:!0};return i?[a,{type:"openTag",tagName:"input",selfClose:!0,attributes:hl(hl({},o&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:a}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(t,e){if(e.entering)return{type:"openTag",tagName:"tr",outerNewLine:!0};var n=[];if(t.lastChild)for(var r=t.parent.parent.columns.length,o=t.lastChild.endIdx+1;o<r;o+=1)n.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0});return n.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),n},tableCell:function(t,e){var n=e.entering;if(t.ignored)return{type:"text",content:""};var r=t.parent.parent,o="tableHead"===r.type?"th":"td",i=r.parent.columns[t.startIdx],a=(null==i?void 0:i.align)?{align:i.align}:null;return n?hl({type:"openTag",tagName:o,outerNewLine:!0},a&&{attributes:a}):{type:"closeTag",tagName:o,outerNewLine:!0}}},Pp={softbreak:"\n",gfm:!1,tagFilter:!1,nodeId:!1};function zp(t){for(var e=[],n=t.walker(),r=null;r=n.next();){var o=r.node;"text"===o.type&&e.push(o.literal)}return e.join("")}var jp=function(){function t(t){this.buffer=[],this.options=hl(hl({},Pp),t),this.convertors=this.createConvertors(),delete this.options.convertors}return t.prototype.createConvertors=function(){var t=hl({},Bp);if(this.options.gfm&&(t=hl(hl({},t),Rp)),this.options.convertors){var e=this.options.convertors,n=Object.keys(e),r=hl(hl({},Bp),Rp);n.forEach((function(n){var o=t[n],i=e[n],a=-1===Object.keys(r).indexOf(n)?n.toLowerCase():n;t[a]=o?function(t,e){return e.origin=function(){return o(t,e)},i(t,e)}:i}))}return t},t.prototype.getConvertors=function(){return this.convertors},t.prototype.getOptions=function(){return this.options},t.prototype.render=function(t){var e=this;this.buffer=[];for(var n=t.walker(),r=null,o=function(){var t=r.node,o=r.entering,a=i.convertors[t.type];if(!a)return"continue";var s=!1,u={entering:o,leaf:!Hl(t),options:i.options,getChildrenText:zp,skipChildren:function(){s=!0}},l=uc(t)||function(t){return"customInline"===t.type}(t)?a(t,u,i.convertors):a(t,u);l&&((Array.isArray(l)?l:[l]).forEach((function(n,r){"openTag"===n.type&&e.options.nodeId&&0===r&&(n.attributes||(n.attributes={}),n.attributes["data-nodeid"]=String(t.id)),e.renderHTMLNode(n)})),s&&(n.resumeAt(t,!1),n.next()))},i=this;r=n.next();)o();return this.addNewLine(),this.buffer.join("")},t.prototype.renderHTMLNode=function(t){switch(t.type){case"openTag":case"closeTag":this.renderElementNode(t);break;case"text":this.renderTextNode(t);break;case"html":this.renderRawHtmlNode(t)}},t.prototype.generateOpenTagString=function(t){var e=this,n=t.tagName,r=t.classNames,o=t.attributes;this.buffer.push("<"+n),r&&r.length>0&&this.buffer.push(' class="'+r.join(" ")+'"'),o&&Object.keys(o).forEach((function(t){var n=o[t];e.buffer.push(" "+t+'="'+n+'"')})),t.selfClose&&this.buffer.push(" /"),this.buffer.push(">")},t.prototype.generateCloseTagString=function(t){var e=t.tagName;this.buffer.push("</"+e+">")},t.prototype.addNewLine=function(){this.buffer.length&&"\n"!==wc(wc(this.buffer))&&this.buffer.push("\n")},t.prototype.addOuterNewLine=function(t){t.outerNewLine&&this.addNewLine()},t.prototype.addInnerNewLine=function(t){t.innerNewLine&&this.addNewLine()},t.prototype.renderTextNode=function(t){this.buffer.push(Rl(t.content))},t.prototype.renderRawHtmlNode=function(t){this.addOuterNewLine(t),this.buffer.push(t.content),this.addOuterNewLine(t)},t.prototype.renderElementNode=function(t){"openTag"===t.type?(this.addOuterNewLine(t),this.generateOpenTagString(t),t.selfClose?this.addOuterNewLine(t):this.addInnerNewLine(t)):(this.addInnerNewLine(t),this.generateCloseTagString(t),this.addOuterNewLine(t))},t}(),Hp=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),$p=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g"),qp=/href|src|background/i,Vp=/((java|vb|live)script|x):/i,Up=/^on\S+/i,Wp=/<!--[\s\S]*?-->/g,Jp=["iframe","embed","details","summary"],Kp=Hi([],["script","iframe","textarea","form","button","select","input","meta","style","link","title","embed","object","details","summary"]);function Zp(t){var e=document.createElement("div");return Ui(t)&&(t=t.replace(Wp,""),e.innerHTML=t),function(t){ws(t,Kp.join(",")).forEach((function(t){ks(t)}))}(e),function(t){ws(t,"*").forEach((function(t){var e=t.attributes;!function(t,e){e.forEach((function(e){var n=e.name;Up.test(n)&&(t[n]=null),t.getAttribute(n)&&t.removeAttribute(n)}))}(t,Ya(e).filter((function(t){var e,n=t.name,r=t.value,o=n.match(Hp),i=n.match($p),a=o&&(e=r,n.match(qp)&&e.match(Vp));return!o&&!i||a})))}))}(e),function(t,e){var n;if(e)n=t.innerHTML;else{for(var r=document.createDocumentFragment(),o=Ya(t.childNodes),i=o.length,a=0;a<i;a+=1)r.appendChild(o[a]);n=r}return n}(e,!0)}function Gp(t){return t=t.replace(Wp,""),Vp.test(t)?"":t}var Xp="(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)",Qp=new RegExp("^(?:<([A-Za-z][A-Za-z0-9-]*)((?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?))*\\s*/?>|</([A-Za-z][A-Za-z0-9-]*)\\s*[>])","i");function Yp(t){return"\n"===t[t.length-1]?t.slice(0,t.length-1):t}function tf(t,e){var n=t.schema,r=e.literal.match(Qp);if(r){var o=r[1],i=r[3],a=(o||i).toLowerCase();return"htmlInline"===e.type&&!(!n.marks[a]&&!n.nodes[a])}return!1}function ef(t){return aa(["text","strong","emph","strike","image","link","code"],t.type)}function nf(t){var e=t.type,n=t.literal,r="htmlInline"===e&&n.match(Qp);if(r){var o=r[1],i=r[3],a=o||i;if(a)return aa(["ul","ol","li"],a.toLowerCase())}return!1}function rf(t,e){var n=document.createElement("div");return n.innerHTML=t,n.firstChild.getAttribute(e)||""}var of,af,sf=(of={"b, strong":function(t,e,n){var r=t.schema.marks.strong;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"i, em":function(t,e,n){var r=t.schema.marks.emph;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"s, del":function(t,e,n){var r=t.schema.marks.strike;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},code:function(t,e,n){var r=t.schema.marks.code;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},a:function(t,e,n){var r=e.literal,o=t.schema.marks.link;if(n){var i=rf(r,"href");t.openMark(o.create({linkUrl:Gp(i),rawHTML:n}))}else t.closeMark(o)},img:function(t,e,n){var r=e.literal,o=rf(r,"src");if(o){var i=rf(r,"alt"),a=t.schema.nodes.image;t.addNode(a,ji({rawHTML:n,imageUrl:Gp(o)},i&&{altText:i}))}},hr:function(t,e,n){t.addNode(t.schema.nodes.thematicBreak,{rawHTML:n})},br:function(t,e){var n,r,o=t.schema.nodes.paragraph;"paragraph"===(null===(n=e.parent)||void 0===n?void 0:n.type)?(e.prev&&t.openNode(o),e.next&&t.closeNode()):"tableCell"===(null===(r=e.parent)||void 0===r?void 0:r.type)&&(e.prev&&(ef(e.prev)||tf(t,e.prev))&&t.closeNode(),e.next&&(ef(e.next)||tf(t,e.next))&&t.openNode(o))},pre:function(t,e,n){var r,o,i=document.createElement("div");i.innerHTML=e.literal;var a=null===(o=null===(r=i.firstChild)||void 0===r?void 0:r.firstChild)||void 0===o?void 0:o.textContent;t.openNode(t.schema.nodes.codeBlock,{rawHTML:n}),t.addText(Yp(a)),t.closeNode()},"ul, ol":function(t,e,n){if("tableCell"===e.parent.type){var r=t.schema.nodes,o=r.bulletList,i=r.orderedList,a=r.paragraph,s="ul"===n?o:i;n?(e.prev&&!nf(e.prev)&&t.closeNode(),t.openNode(s,{rawHTML:n})):(t.closeNode(),e.next&&!nf(e.next)&&t.openNode(a))}},li:function(t,e,n){var r;if("tableCell"===(null===(r=e.parent)||void 0===r?void 0:r.type)){var o=t.schema.nodes,i=o.listItem,a=o.paragraph;if(n){var s=function(t){var e=t.literal;return{task:/data-task/.test(e),checked:/data-task-checked/.test(e)}}(e);e.prev&&!nf(e.prev)&&t.closeNode(),t.openNode(i,ji({rawHTML:n},s)),e.next&&!nf(e.next)&&t.openNode(a)}else e.prev&&!nf(e.prev)&&t.closeNode(),t.closeNode()}}},af={},Object.keys(of).forEach((function(t){t.split(", ").forEach((function(e){var n=e.toLowerCase();af[n]=of[t]}))})),af);function uf(t,e){return t.literal.replace(new RegExp("(<\\s*"+e+"[^>]+?>)|(</"+e+"\\s*[>])","ig"),"").trim()}function lf(t){var e=(t=t.match(Qp)[0]).match(new RegExp(Xp,"g"));return e?e.reduce((function(t,e){var n=e.trim().split("="),r=n[0],o=n[1];return o&&(t[r]=o.replace(/'|"/g,"").trim()),t}),{}):{}}function cf(t){return Ya(t.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{})}function pf(t,e,n,r){var o=r.getToDOMNode(e)(t),i=n(o.outerHTML),a=document.createElement("div");return a.innerHTML=i,{dom:o=a.firstChild,htmlAttrs:cf(o)}}var ff={htmlBlock:function(t,e,n){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:cf(t),childrenHTML:t.innerHTML}}}],toDOM:function(r){var o=pf(r,t,e,n),i=o.dom,a=o.htmlAttrs;return a.class=a.class?a.class+" html-block":"html-block",Hi([t,a],Ya(i.childNodes))}}},htmlInline:function(t,e,n){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:cf(t)}}}],toDOM:function(r){var o=pf(r,t,e,n).htmlAttrs;return[t,o,0]}}}};function hf(t,e,n){var r={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach((function(o){t[o]&&Object.keys(t[o]).forEach((function(t){var i,a="htmlBlock"===o?"nodes":"marks";aa(Jp,i=t)&&Kp.splice(Kp.indexOf(i),1),r[a][t]=ff[o](t,e,n)}))})),r}var df=/^\s*<\s*\//,mf={paragraph:function(t,e){var n=e.entering,r=e.origin;return e.options.nodeId?{type:n?"openTag":"closeTag",outerNewLine:!0,tagName:"p"}:r()},softbreak:function(t){return{type:"html",content:t.prev&&"htmlInline"===t.prev.type&&/<br ?\/?>/.test(t.prev.literal)?"\n":"<br>\n"}},item:function(t,e){if(e.entering){var n={},r=[];return t.listData.task&&(n["data-task"]="",r.push("task-list-item"),t.listData.checked&&(r.push("checked"),n["data-task-checked"]="")),{type:"openTag",tagName:"li",classNames:r,attributes:n,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(t){return[{type:"openTag",tagName:"code",attributes:{"data-backticks":String(t.tickCount)}},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t,n=e.fenceLength,r=e.info,o=r?r.split(/\s+/):[],i=[],a={};if(n>3&&(a["data-backticks"]=n),o.length>0&&o[0].length>0){var s=o[0];i.push("lang-"+s),a["data-language"]=s}return[{type:"openTag",tagName:"pre",classNames:i},{type:"openTag",tagName:"code",attributes:a},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(t,e){var n=e.origin,r=e.entering,o=e.skipChildren,i=t.info;return-1!==i.indexOf("widget")&&r?(o(),[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:Wa(i,Za(t)).outerHTML},{type:"closeTag",tagName:"span"}]):n()}};function vf(t,e){var n=ji({},mf);return t&&(n.link=function(e,n){var r=n.entering,o=(0,n.origin)();return r&&(o.attributes=ji(ji({},o.attributes),t)),o}),e&&Object.keys(e).forEach((function(t){var r=n[t],o=e[t];r?n[t]=function(t,e){var n=ji({},e);return n.origin=function(){return r(t,e)},o(t,n)}:aa(["htmlBlock","htmlInline"],t)?n[t]=function(t,e){var n=t.literal.match(Qp);if(n){var r=n[0],i=n[1],a=n[3],s=(i||a).toLowerCase(),u=o[s],l=uf(t,s);if(u){var c=ji({},t);return c.attrs=lf(r),c.childrenHTML=l,c.type=s,e.entering=!df.test(t.literal),u(c,e)}}return e.origin()}:n[t]=o})),n}var gf=["list","item","blockQuote"],yf=["UL","OL","BLOCKQUOTE"];function bf(t,e){var n,r=t.child(e);return!r.childCount||1===r.childCount&&!(null===(n=r.firstChild.text)||void 0===n?void 0:n.trim())}function wf(t,e,n){var r=Ta(e)-1,o=Ma(e)-1,i=n[r].getBoundingClientRect(),a=n[o].offsetTop-n[r].offsetTop+n[o].clientHeight;return{height:a<=0?n[r].clientHeight:a+kf(t,n,Math.min(o+1,t.childCount-1)),rect:i}}function kf(t,e,n){for(var r=t.childCount-1,o=0;n<=r&&bf(t,n);)o+=e[n].clientHeight,n+=1;return o}function xf(t,e){for(var n=0;t&&t!==e&&(aa(yf,t.tagName)||(n+=t.offsetTop),t.offsetParent!==e.offsetParent);)t=t.parentElement;return n}function Cf(t,e,n){return t&&e>n+t.offsetTop?Cf(t.nextElementSibling,e,n)||t:null}function Df(t){for(var e=document.querySelector('[data-nodeid="'+t.id+'"]');!e||Oa(t);)t=t.parent,e=document.querySelector('[data-nodeid="'+t.id+'"]');return function(t){var e=t.mdNode,n=t.el;for(;(aa(gf,e.type)||"table"===e.type)&&e.firstChild;)e=e.firstChild,n=n.firstElementChild;return{mdNode:e,el:n}}({mdNode:t,el:e})}var Ef={};function Tf(t){t&&(delete Ef[Number(t.getAttribute("data-nodeid"))],Ya(t.children).forEach((function(t){Tf(t)})))}function Mf(t,e,n){var r,o=Ef[r=n]&&Ef[r].height,i=function(t){return Ef[t]&&Ef[t].offsetTop}(n),a=o||t.clientHeight,s=i||xf(t,e)||t.offsetTop;return o||function(t,e){Ef[t]=Ef[t]||{},Ef[t].height=e}(n,a),i||function(t,e){Ef[t]=Ef[t]||{},Ef[t].offsetTop=e}(n,s),{nodeHeight:a,offsetTop:s}}var Af=gs("md-preview-highlight");var Sf=function(){function t(t,e){var n=document.createElement("div");this.el=n,this.eventEmitter=t,this.isViewer=!!e.isViewer,this.el.className=gs("md-preview");var r=e.linkAttributes,o=e.customHTMLRenderer,i=e.sanitizer,a=e.highlight,s=void 0!==a&&a;this.renderer=new jp({gfm:!0,nodeId:!0,convertors:vf(r,o)}),this.cursorNodeId=null,this.sanitizer=i,this.initEvent(s),this.initContentSection()}return t.prototype.initContentSection=function(){this.previewContent=Cs('<div class="'+gs("contents")+'"></div>'),this.el.appendChild(this.previewContent)},t.prototype.toggleActive=function(t){xs(this.el,"active",t)},t.prototype.initEvent=function(t){var e=this;this.eventEmitter.listen("updatePreview",this.update.bind(this)),t&&(this.eventEmitter.listen("changeToolbarState",(function(t){var n=t.mdNode,r=t.cursorPos;e.updateCursorNode(n,r)})),this.eventEmitter.listen("blur",(function(){e.removeHighlight()}))),cl(this.el,"scroll",(function(t){e.eventEmitter.emit("scroll","preview",function(t,e){for(var n=e,r=null;n;){var o=n.firstElementChild;if(!o)break;r=n,n=Cf(o,t,xf(n,e))}var i=n||r;return i===e?null:i}(t.target.scrollTop,e.previewContent))})),this.eventEmitter.listen("changePreviewTabPreview",(function(){return e.toggleActive(!0)})),this.eventEmitter.listen("changePreviewTabWrite",(function(){return e.toggleActive(!1)}))},t.prototype.removeHighlight=function(){if(this.cursorNodeId){var t=this.getElementByNodeId(this.cursorNodeId);t&&ea(t,Af)}},t.prototype.updateCursorNode=function(t,e){t&&("tableRow"===(t=Fa(t,(function(t){return!function(t){switch(t.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}(t)}))).type?t=function(t,e){for(var n=t.firstChild;n&&n.next&&!(Aa(n.next)>e+1);)n=n.next;return n}(t,e[1]):"tableBody"===t.type&&(t=null));var n=t?t.id:null;if(this.cursorNodeId!==n){var r=this.getElementByNodeId(this.cursorNodeId),o=this.getElementByNodeId(n);r&&ea(r,Af),o&&ta(o,Af),this.cursorNodeId=n}},t.prototype.getElementByNodeId=function(t){return t?this.previewContent.querySelector('[data-nodeid="'+t+'"]'):null},t.prototype.update=function(t){var e=this;t.forEach((function(t){return e.replaceRangeNodes(t)})),this.eventEmitter.emit("afterPreviewRender",this)},t.prototype.replaceRangeNodes=function(t){var e=this,n=t.nodes,r=t.removedNodeRange,o=this.previewContent,i=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(n.map((function(t){return e.renderer.render(t)})).join("")));if(r){var a=r.id,s=a[0],u=a[1],l=this.getElementByNodeId(s),c=this.getElementByNodeId(u);if(l){l.insertAdjacentHTML("beforebegin",i);for(var p=l;p&&p!==c;){var f=p.nextElementSibling;ks(p),Tf(p),p=f}(null==p?void 0:p.parentNode)&&(ks(p),Tf(p))}}else o.insertAdjacentHTML("afterbegin",i)},t.prototype.getRenderer=function(){return this.renderer},t.prototype.destroy=function(){ul(this.el,"scroll"),this.el=null},t.prototype.getElement=function(){return this.el},t.prototype.getHTML=function(){return this.previewContent.innerHTML},t.prototype.setHTML=function(t){this.previewContent.innerHTML=t},t.prototype.setHeight=function(t){Zi(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){Zi(this.el,{minHeight:t+"px"})},t}();function Of(t,e){for(var n=t.depth;n;){var r=t.node(n);if(e(r,n))return{node:r,depth:n,offset:n>0?t.before(n):0};n-=1}return null}function Nf(t){return!!Of(t,(function(t){var e=t.type;return"listItem"===e.name||"bulletList"===e.name||"orderedList"===e.name}))}function Lf(t){return!!Of(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function If(t){return Of(t,(function(t){return"listItem"===t.type.name}))}function _f(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return ji({},e&&{rawHTML:e})}}}function Ff(t){return Object.keys(t).reduce((function(e,n){return"rawHTML"!==n&&t[n]&&(e[n="className"===n?"class":n]=t[n]),e}),{})}function Bf(t){return{tag:t,getAttrs:function(t){return["rawHTML","colspan","rowspan","extended"].reduce((function(e,n){var r="rawHTML"===n?"data-raw-html":n,o=t.getAttribute(r);return o&&(e[n]=aa(["rawHTML","extended"],n)?o:Number(o)),e}),{})}}}function Rf(t){var e=t.htmlAttrs,n=t.classNames;return ji(ji({},e),{class:n?n.join(" "):null})}function Pf(t,e,n,r){var o=e.$from,i=e.$to,a=e.depth,s=e,u=!1;if(a>=2&&o.node(a-1).type.compatibleContent(n)&&0===e.startIndex&&o.index(a-1)){var l=t.doc.resolve(e.start-2);s=new X(l,l,a),e.endIndex<e.parent.childCount&&(e=new X(o,t.doc.resolve(i.end(a)),a)),u=!0}var c=function(t,e,n,r){var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(i){var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}return null}(t,n),i=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(a){for(var s=(a.length?a[a.length-1]:e).contentMatch,u=r;s&&u<o;u+=1)s=s.matchType(n.child(u).type);if(s&&s.validEnd)return a}return null}(e,n);if(o&&i){var a=o.map((function(t){return{type:t}})),s=i.map((function(t){return{type:t,attrs:r}}));return a.concat({type:n}).concat(s)}return null}(s,e,n,r);return c?function(t,e,n,r,o){for(var i=e.start,a=e.end,s=e.startIndex,u=e.endIndex,l=e.parent,c=T.empty,p=n.length-1;p>=0;p-=1)c=T.from(n[p].type.create(n[p].attrs,c));t.step(new Qt(i-(r?2:0),a,i,a,new I(c,0,0),n.length,!0));var f=0;for(p=0;p<n.length;p+=1)if(n[p].type===o){f=p+1;break}for(var h=n.length-f,d=i+n.length-(r?2:0),m=(p=s,u);p<m;p+=1)!(p===s)&&re(t.doc,d,h)&&(t.split(d,h),d+=2*h),d+=l.child(p).nodeSize;return t}(t,e,c,u,n):t}function zf(t,e){for(var n=t.resolve(e);"paragraph"!==n.node().type.name;)e-=2,n=t.resolve(e);return If(n)}function jf(t){return function(e,n){var r=e.selection,o=e.tr,i=r.$from,a=r.$to,s=i.blockRange(a);return!!s&&(n(Nf(i)?function(t,e,n){var r=e.$from,o=e.$to,i=If(r),a=If(o);if(i&&a)for(;a;){var s=a.offset,u=a.node,l=a.depth;u.attrs.task&&t.setNodeMarkup(s,null,{task:!1,checked:!1});var c=t.doc.resolve(s);if(c.parent.type!==n){var p=c.before(l-1);t.setNodeMarkup(p,n)}if(s===i.offset)break;a=zf(t.doc,s)}return t}(o,s,t):Pf(o,s,t)),!0)}}function Hf(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from,a=n.$to,s=i.blockRange(a);return!!s&&(e(Nf(i)?function(t,e){var n=e.$from,r=e.$to,o=If(n),i=If(r);if(o&&i)for(;i;){var a=i.offset,s={task:!i.node.attrs.task,checked:!1};if(t.setNodeMarkup(a,null,s),a===o.offset)break;i=zf(t.doc,a)}return t}(r,s):Pf(r,s,o.nodes.bulletList,{task:!0})),!0)}}function $f(t){return function(e,n){var r=e.tr,o=e.selection,i=o.$from,a=o.$to,s=i.blockRange(a,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));return!!s&&(n(i.node(s.depth-1).type===t?function(t,e,n){var r=e.$from,o=e.$to,i=e.end,a=e.depth,s=e.parent,u=o.end(a);return i<u&&(t.step(new Qt(i-1,u,i,u,new I(T.from(n.create(null,s.copy())),1,0),1,!0)),e=new X(t.doc.resolve(r.pos),t.doc.resolve(u),a)),t.lift(e,ee(e)),t}(r,s,t):function(t,e){for(var n=e.parent,r=e.end,o=e.endIndex-1,i=e.startIndex;o>i;o-=1)r-=n.child(o).nodeSize,t.delete(r-1,r+1);var a=t.doc.resolve(e.start),s=a.nodeAfter,u=0===e.startIndex,l=e.endIndex===n.childCount,c=a.node(-1),p=a.index(-1),f=c.canReplace(p+(u?0:1),p+1,null==s?void 0:s.content.append(l?T.empty:T.from(n)));if(s&&f){var h=a.pos,d=h+s.nodeSize;t.step(new Qt(h-(u?1:0),d+(l?1:0),h+1,d-1,new I((u?T.empty:T.from(n.copy(T.empty))).append(l?T.empty:T.from(n.copy(T.empty))),u?0:1,l?0:1),u?0:1))}return t}(r,s)),!0)}}function qf(){return function(){return function(t,e){var n,r=t.selection,o=t.schema,i=r.$from,a=r.$to;return!(!i.blockRange(a)||!Nf(i))&&(n=o.nodes.listItem,function(t,e){var r=t.tr,o=t.selection,i=o.$from,a=o.$to,s=i.blockRange(a,(function(t){var e=t.childCount,r=t.firstChild;return!!e&&r.type===n}));if(s&&s.startIndex>0){var u=s.parent,l=u.child(s.startIndex-1);if(l.type!==n)return!1;var c=l.lastChild&&l.lastChild.type===u.type,p=c?T.from(n.create()):null,f=new I(T.from(n.create(null,T.from(u.type.create(null,p)))),c?3:1,0),h=s.start,d=s.end;return r.step(new Qt(h-(c?3:1),d,h,d,f,1,!0)),e(r),!0}return!1})(t,e)}}}function Vf(){return{indent:qf(),outdent:function(){return function(t,e){var n=t.selection,r=t.schema,o=n.$from,i=n.$to;return!(!o.blockRange(i)||!Nf(o))&&$f(r.nodes.listItem)(t,e)}}}}var Uf=new Map,Wf=function(){function t(t,e,n,r){this.table=t,this.tableRows=e,this.tableStartPos=n,this.rowInfo=r}return t.create=function(e){var n=Of(e,(function(t){return"table"===t.type.name}));if(n){var r=n.node,o=n.depth,i=n.offset,a=Uf.get(r);if((null==a?void 0:a.tableStartPos)===i+1)return a;var s=[],u=e.start(o),l=r.child(0),c=r.child(1),p=Jf(l,u),f=Jf(c,u+l.nodeSize);l.forEach((function(t){return s.push(t)})),c.forEach((function(t){return s.push(t)}));var h=new t(r,s,u,p.concat(f));return Uf.set(r,h),h}return null},Object.defineProperty(t.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),t.prototype.getCellInfo=function(t,e){return this.rowInfo[t][e]},t.prototype.posAt=function(t,e){for(var n=0,r=this.tableStartPos;;n+=1){var o=r+this.tableRows[n].nodeSize;if(n===t){for(var i=e;i<this.totalColumnCount&&this.rowInfo[n][i].offset<r;)i+=1;return i===this.totalColumnCount?o:this.rowInfo[n][i].offset}r=o}},t.prototype.getNodeAndPos=function(t,e){var n=this.rowInfo[t][e];return{node:this.table.nodeAt(n.offset-1),pos:n.offset}},t.prototype.extendedRowspan=function(t,e){return!1},t.prototype.extendedColspan=function(t,e){return!1},t.prototype.getRowspanCount=function(t,e){return 0},t.prototype.getColspanCount=function(t,e){return 0},t.prototype.decreaseColspanCount=function(t,e){return 0},t.prototype.decreaseRowspanCount=function(t,e){return 0},t.prototype.getColspanStartInfo=function(t,e){return null},t.prototype.getRowspanStartInfo=function(t,e){return null},t.prototype.getCellStartOffset=function(t,e){var n=this.rowInfo[t][e].offset;return this.extendedRowspan(t,e)?this.posAt(t,e):n},t.prototype.getCellEndOffset=function(t,e){var n=this.rowInfo[t][e],r=n.offset,o=n.nodeSize;return this.extendedRowspan(t,e)?this.posAt(t,e):r+o},t.prototype.getCellIndex=function(t){for(var e=0;e<this.totalRowCount;e+=1)for(var n=this.rowInfo[e],r=0;r<this.totalColumnCount;r+=1)if(n[r].offset+1>t.pos)return[e,r];return[0,0]},t.prototype.getRectOffsets=function(t,e){var n,r,o;void 0===e&&(e=t),t.pos>e.pos&&(t=(n=[e,t])[0],e=n[1]);var i=this.getCellIndex(t),a=i[0],s=i[1],u=this.getCellIndex(e),l=u[0],c=u[1];return a=(r=ba(a,l))[0],l=r[1],s=(o=ba(s,c))[0],c=o[1],this.getSpannedOffsets({startRowIdx:a,startColIdx:s,endRowIdx:l,endColIdx:c})},t.prototype.getSpannedOffsets=function(t){return t},t}(),Jf=function(t,e){var n=[];return t.forEach((function(t,r){var o={rowspanMap:{},colspanMap:{},length:0};t.forEach((function(t,n){for(var i=t.nodeSize,a=0;o[a];)a+=1;o[a]={offset:e+r+n+2,nodeSize:i},o.length+=1})),n.push(o)})),n};function Kf(t,e){return ya(Wf.prototype,t),Jf=e,Wf}var Zf=function(t){function e(e,n){void 0===n&&(n=e);var r=this,o=e.node(0),i=Wf.create(e),a=i.getRectOffsets(e,n),s=function(t,e,n){for(var r=n.startRowIdx,o=n.startColIdx,i=n.endRowIdx,a=n.endColIdx,s=[],u=r;u<=i;u+=1)for(var l=o;l<=a;l+=1){var c=e.getCellInfo(u,l),p=c.offset,f=c.nodeSize;s.push(new ke(t.resolve(p+1),t.resolve(p+f-1)))}return s}(o,i,a);return(r=t.call(this,s[0].$from,s[0].$to,s)||this).startCell=e,r.endCell=n,r.offsetMap=i,r.isCellSelection=!0,r.visible=!1,r}return zi(e,t),e.prototype.map=function(t,n){var r=this.startCell.pos,o=this.endCell.pos,i=t.resolve(n.map(r)),a=t.resolve(n.map(o)),s=Wf.create(i);if(this.offsetMap.totalColumnCount>s.totalColumnCount||this.offsetMap.totalRowCount>s.totalRowCount){var u={tableBody:1,tableRow:2,tableCell:3,paragraph:4}[a.parent.type.name],l=a.end(a.depth-u),c=Math.min(l-4,a.pos);return xe.create(t,c)}return new e(i,a)},e.prototype.eq=function(t){return t instanceof e&&t.startCell.pos===this.startCell.pos&&t.endCell.pos===this.endCell.pos},e.prototype.content=function(){for(var t=this.startCell.node(-2),e=this.startCell.start(-2),n=t.child(1).firstChild,r=t.child(0).type.create(),o=t.child(1).type.create(),i=Wf.create(this.startCell),a=i.getRectOffsets(this.startCell,this.endCell),s=a.startRowIdx,u=a.startColIdx,l=a.endRowIdx,c=a.endColIdx,p=!1,f=s;f<=l;f+=1){for(var h=[],d=u;d<=c;d+=1){var m=i.getCellInfo(f,d).offset,v=t.nodeAt(m-e);v&&(p="tableHeadCell"===v.type.name,i.extendedRowspan(f,d)||i.extendedColspan(f,d)?h.push(v.type.create({extended:!0})):h.push(v.copy(v.content)))}var g=n.copy(T.from(h)),y=p?r:o;y.content=y.content.append(T.from(g))}return new I(function(t,e){var n=[];return t.childCount&&n.push(t),e.childCount&&n.push(e),T.from(n)}(r,o),1,1)},e}(be);function Gf(t,e,n,r){for(var o=n.nodes,i=o.tableRow,a=o.tableBodyCell,s=o.paragraph,u=[],l=0;l<t;l+=1){for(var c=[],p=0;p<e;p+=1){var f=r&&r[l*e+p],h=s.create(null,f?n.text(f):[]);c.push(a.create(null,h))}u.push(i.create(null,c))}return u}function Xf(t,e,n,r){void 0===r&&(r=null);for(var o=n.nodes,i=o.tableHeadCell,a=o.tableBodyCell,s=o.paragraph,u=0===e?i:a,l=[],c=0;c<t;c+=1)l.push(u.create(r,s.create()));return l}function Qf(t,e){for(;t&&t!==e;){if("TD"===t.nodeName||"TH"===t.nodeName)return t;t=t.parentNode}return null}function Yf(t){return Of(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function th(t){if(t instanceof xe){var e=t.$anchor,n=Yf(e);if(n){var r=e.node(0).resolve(e.before(n.depth));return{anchor:r,head:r}}}var o=t;return{anchor:o.startCell,head:o.endCell}}function eh(t){var e;if(t.size){var n=t.content,r=t.openStart,o=t.openEnd;if(1!==n.childCount)return null;for(;1===n.childCount&&(r>0&&o>0||"table"===(null===(e=n.firstChild)||void 0===e?void 0:e.type.name));)r-=1,o-=1,n=n.firstChild.content;if("tableHead"===n.firstChild.type.name||"tableBody"===n.firstChild.type.name)return n}return null}function nh(t){var e=t.startRowIdx,n=t.startColIdx;return{rowCount:t.endRowIdx-e+1,columnCount:t.endColIdx-n+1}}function rh(t,e){return ji(ji({},t.attrs),e)}var oh=new $e("cellSelection"),ih=function(){function t(t){this.view=t,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return t.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},t.prototype.handleMousedown=function(t){var e=Qf(t.target,this.view.dom);if(2!==t.button){if(e){var n=this.getCellPos(t);n&&(this.startCellPos=n),this.bindEvent()}}else t.preventDefault()},t.prototype.handleMousemove=function(t){var e,n=oh.getState(this.view.state),r=this.getCellPos(t),o=this.startCellPos;n?e=this.view.state.doc.resolve(n):o!==r&&(e=o),e&&o&&r&&this.setCellSelection(o,r)},t.prototype.handleMouseup=function(){this.startCellPos=null,this.unbindEvent(),null!==oh.getState(this.view.state)&&this.view.dispatch(this.view.state.tr.setMeta(oh,-1))},t.prototype.bindEvent=function(){var t=this.view.dom;t.addEventListener("mousemove",this.handlers.mousemove),t.addEventListener("mouseup",this.handlers.mouseup)},t.prototype.unbindEvent=function(){var t=this.view.dom;t.removeEventListener("mousemove",this.handlers.mousemove),t.removeEventListener("mouseup",this.handlers.mouseup)},t.prototype.getCellPos=function(t){var e=t.clientX,n=t.clientY,r=this.view.posAtCoords({left:e,top:n});if(r){var o=this.view.state.doc,i=o.resolve(r.pos),a=Yf(i);if(a){var s=i.before(a.depth);return o.resolve(s)}}return null},t.prototype.setCellSelection=function(t,e){var n=this.view.state,r=n.selection,o=n.tr,i=null===oh.getState(this.view.state),a=new Zf(t,e);if(i||!r.eq(a)){var s=o.setSelection(a);i&&s.setMeta(oh,e.pos),this.view.dispatch(s)}},t.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},t}(),ah=gs("cell-selected");function sh(t){var e=t.selection,n=t.doc;if(e instanceof Zf){var r=[];return e.ranges.forEach((function(t){var e=t.$from,n=t.$to;r.push(mo.node(e.pos-1,n.pos+1,{class:ah}))})),bo.create(n,r)}return null}var uh=function(){function t(){this.keys=[],this.values=[]}return t.prototype.getKeyIndex=function(t){return Gi(t,this.keys)},t.prototype.get=function(t){return this.values[this.getKeyIndex(t)]},t.prototype.set=function(t,e){var n=this.getKeyIndex(t);return n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e)),this},t.prototype.has=function(t){return this.getKeyIndex(t)>-1},t.prototype.delete=function(t){var e=this.getKeyIndex(t);return e>-1&&(this.keys.splice(e,1),this.values.splice(e,1),!0)},t.prototype.forEach=function(t,e){var n=this;void 0===e&&(e=this),this.values.forEach((function(r,o){r&&n.keys[o]&&t.call(e,r,n.keys[o],n)}))},t.prototype.clear=function(){this.keys=[],this.values=[]},t}(),lh=new(function(){function t(){this.code="en-US",this.langs=new uh}return t.prototype.setCode=function(t){this.code=t||"en-US"},t.prototype.setLanguage=function(t,e){var n=this;(t=[].concat(t)).forEach((function(t){if(n.langs.has(t)){var r=n.langs.get(t);n.langs.set(t,Vi(r,e))}else n.langs.set(t,e)}))},t.prototype.get=function(t,e){e||(e=this.code);var n=this.langs.get(e);n||(n=this.langs.get("en-US"));var r=n[t];if(!r)throw new Error('There is no text key "'+t+'" in '+e);return r},t}()),ch=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function ph(t,e){return ch.map((function(n){return n.map((function(n){var r=n.action,o=n.command,i=n.payload,a=n.disableInThead,s=n.className;return{label:lh.get(r),onClick:function(){t.emit("command",o,i)},disabled:e&&!!a,className:s}}))})).concat()}var fh=["image","link","customBlock","frontMatter"],hh=["strong","strike","emph","code"],dh=["bulletList","orderedList","taskList"];function mh(t,e,n){var r=t.$from,o=t.$to,i=t.from,a=t.to,s={},u={};return e.nodesBetween(i,a,(function(t,e,i){var a=function(t,e){var n=t.type.name;return"listItem"===n?t.attrs.task?"taskList":e.type.name:-1!==n.indexOf("table")?"table":n}(t,i);aa(fh,a)||(aa(dh,a)?function(t,e){e[t]=!0,dh.filter((function(e){return e!==t})).forEach((function(t){e[t]&&delete e[t]}))}(a,s):"paragraph"===a||"text"===a?u=function(t,e,n){var r={};return hh.forEach((function(o){var i=n.marks[o],a=t.marksAcross(e)||[];i.isInSet(a)&&(r[o]=!0)})),r}(r,o,n):s[a]=!0)})),ji(ji({},s),u)}function vh(t){return new ze({view:function(){return{update:function(e){var n=e.state,r=n.selection,o=n.doc,i=n.schema;t.emit("changeToolbarState",{toolbarState:mh(r,o,i)})}}}})}var gh=function(){function t(t,e,n,r){var o=this;this.openEditor=function(){if(o.innerEditorView)throw new Error("The editor is already opened.");o.wrapper.style.display="none",o.innerViewContainer.style.display="block",o.innerEditorView=new Oo(o.innerViewContainer,{state:Fe.create({doc:o.node,plugins:[Zo({"Mod-z":function(){return Bi(o.innerEditorView.state,o.innerEditorView.dispatch)},"Shift-Mod-z":function(){return Ri(o.innerEditorView.state,o.innerEditorView.dispatch)},Tab:function(t,e){return e(t.tr.insertText("\t")),!0},Enter:ni,Escape:function(){return o.cancelEditing(),!0},"Ctrl-Enter":function(){return o.saveAndFinishEditing(),!0}}),Fi()]}),dispatchTransaction:function(t){return o.dispatchInner(t)},handleDOMEvents:{mousedown:function(){return o.editorView.hasFocus()&&o.innerEditorView.focus(),!0},blur:function(){return o.saveAndFinishEditing(),!0}}}),o.innerEditorView.focus()},this.node=t,this.editorView=e,this.getPos=n,this.toDOMAdaptor=r,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=gs("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=gs("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return t.prototype.renderToolArea=function(){var t=this,e=document.createElement("div"),n=document.createElement("span"),r=document.createElement("button");e.className="tool",n.textContent=this.node.attrs.info,n.className="info",r.type="button",r.addEventListener("click",(function(){return t.openEditor()})),e.appendChild(n),e.appendChild(r),this.wrapper.appendChild(e)},t.prototype.renderCustomBlock=function(){var t=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(t){for(var e=t(this.node);this.wrapper.hasChildNodes();)this.wrapper.removeChild(this.wrapper.lastChild);e&&this.wrapper.appendChild(e),this.renderToolArea()}},t.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=gs("custom-block-editor"),this.innerViewContainer.style.display="none"},t.prototype.closeEditor=function(){this.innerEditorView&&(this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none"),this.wrapper.style.display="block"},t.prototype.saveAndFinishEditing=function(){var t=this.editorView.state.selection.to,e=this.editorView.state;this.editorView.dispatch(e.tr.setSelection(xa(e.tr,t))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},t.prototype.cancelEditing=function(){var t,e,n=(t=this.innerEditorView.state,(e=Ii.getState(t))?e.done.eventCount:0);for(this.canceled=!0;n--;)Bi(this.innerEditorView.state,this.innerEditorView.dispatch),Bi(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var r=this.editorView.state.selection.to,o=this.editorView.state;this.editorView.dispatch(o.tr.setSelection(xe.create(o.doc,r))),this.editorView.focus(),this.closeEditor()},t.prototype.dispatchInner=function(t){var e=this.innerEditorView.state.applyTransaction(t),n=e.state,r=e.transactions;if(this.innerEditorView.updateState(n),!this.canceled&&ls(this.getPos)){for(var o=this.editorView.state.tr,i=$t.offset(this.getPos()+1),a=0;a<r.length;a+=1)for(var s=r[a].steps,u=0;u<s.length;u+=1)o.step(s[u].map(i));o.docChanged&&this.editorView.dispatch(o)}},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,this.innerEditorView||this.renderCustomBlock(),!0)},t.prototype.stopEvent=function(t){return!!this.innerEditorView&&!!t.target&&this.innerEditorView.dom.contains(t.target)},t.prototype.ignoreMutation=function(){return!0},t.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},t}(),yh=function(){function t(t,e,n,r){var o,i=this;this.handleMousedown=function(t){t.preventDefault();var e=t.target,n=t.offsetX,r=t.offsetY;if(i.imageLink&&ls(i.getPos)&&fs(e,"image-link")){var o=getComputedStyle(e,":before");if(t.stopPropagation(),vs(o,n,r)){var a=i.view.state.tr,s=i.getPos();a.setSelection(xa(a,s,s+1)),i.view.dispatch(a),i.eventEmitter.emit("openPopup","link",i.imageLink.attrs)}}},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.imageLink=null!==(o=t.marks.filter((function(t){return"link"===t.type.name}))[0])&&void 0!==o?o:null,this.dom=this.createElement(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.createImageElement(this.node);if(this.imageLink){var e=document.createElement("span");return e.className="image-link",e.appendChild(t),e}return t},t.prototype.createImageElement=function(t){var e=document.createElement("img"),n=t.attrs,r=n.imageUrl,o=n.altText,i=Rf(t.attrs);return e.src=r,o&&(e.alt=o),Ms(i,e),e},t.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)},t.prototype.stopEvent=function(){return!0},t.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)},t}(),bh=function(){function t(t,e,n,r){var o=this;this.dom=null,this.contentDOM=null,this.input=null,this.handleMousedown=function(t){var e=t.target;if("none"!==getComputedStyle(e,":after").backgroundImage&&ls(o.getPos)){var n=o.view.coordsAtPos(o.getPos()),r=n.top,i=n.right;o.createLanguageEditor({top:r,right:i})}},this.handleKeydown=function(t){"Enter"===t.key&&o.input&&(t.preventDefault(),o.changeLanguage())},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.node.attrs.language,e=document.createElement("div");e.setAttribute("data-language",t||"text"),e.className="toastui-editor-ww-code-block";var n=this.createCodeBlockElement(),r=n.firstChild;e.appendChild(n),this.dom=e,this.contentDOM=r},t.prototype.createCodeBlockElement=function(){var t=document.createElement("pre"),e=document.createElement("code"),n=this.node.attrs.language,r=Rf(this.node.attrs);return n&&e.setAttribute("data-language",n),Ms(r,t),t.appendChild(e),t},t.prototype.createLanguageEditor=function(t){var e=this,n=t.top,r=t.right,o=document.createElement("span");o.className="toastui-editor-ww-code-block-language";var i=document.createElement("input");i.type="text",i.value=this.node.attrs.language,o.appendChild(i),document.querySelector(".toastui-editor.ww-mode").appendChild(o);var a=o.clientWidth;Zi(o,{top:n+10+"px",left:r-a-10+"px",width:a+"px"}),this.input=i,this.input.addEventListener("blur",(function(){return e.changeLanguage()})),this.input.addEventListener("keydown",this.handleKeydown),setTimeout((function(){return e.input.focus()}))},t.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)},t.prototype.bindEvent=function(){var t=this;this.eventEmitter.listen("scroll",(function(){t.input&&t.reset()}))},t.prototype.changeLanguage=function(){if(this.input&&ls(this.getPos)){var t=this.input.value;this.reset();var e=this.getPos(),n=this.view.state.tr;n.setNodeMarkup(e,null,{language:t}),this.view.dispatch(n)}},t.prototype.reset=function(){var t;if(null===(t=this.input)||void 0===t?void 0:t.parentElement){var e=this.input.parentElement;this.input=null,ks(e)}},t.prototype.stopEvent=function(){return!0},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,!0)},t.prototype.destroy=function(){this.reset(),this.dom&&this.dom.removeEventListener("click",this.handleMousedown)},t}(),wh=/MsoListParagraph/,kh=/style=(.|\n)*mso-/,xh=/mso-list:(.*)/,Ch=/O:P/,Dh=/^(n|u|l)/;function Eh(t){for(var e=[],n=document.createTreeWalker(t,1,null,!1);n.nextNode();){var r=n.currentNode;if(bs(r)){var o=r,i=o.outerHTML,a=o.textContent,s=kh.test(i),u=xh.test(i);s&&!u&&a?e.push([r,!0]):(Ch.test(r.nodeName)||s&&!a||u)&&e.push([r,!1])}}return e.forEach((function(t){var e=t[0];t[1]?function(t){for(var e=[];t.firstChild;)e.push(t.firstChild),t.parentNode&&t.parentNode.insertBefore(t.firstChild,t);ks(t)}(e):ks(e)})),t.innerHTML.trim()}function Th(t){var e=[];return t.forEach((function(t,n){var r=e[n-1],o=function(t,e){var n=t.getAttribute("style");if(n){var r=n.match(xh)[1].trim().split(" ")[1];return{id:e,level:parseInt(r.replace("level",""),10),prev:null,parent:null,children:[],unordered:Dh.test(t.textContent||""),contents:Eh(t)}}return null}(t,n);o&&(r&&function(t,e){if(e.level<t.level)e.children.push(t),t.parent=e;else{for(;e&&e.level!==t.level;)e=e.parent;e&&(t.prev=e,t.parent=e.parent,t.parent&&t.parent.children.push(t))}}(o,r),e.push(o))})),e}function Mh(t){var e=t[0].unordered?"ul":"ol",n=document.createElement(e);return t.forEach((function(t){var e=t.children,r=t.contents,o=document.createElement("li");o.innerHTML=r,n.appendChild(o),e.length&&n.appendChild(Mh(e))})),n}function Ah(t){return Mh(Th(t).filter((function(t){return!t.parent})))}function Sh(t){var e=document.createElement("div");e.innerHTML=t;var n=[],r=ws(e,"p.MsoListParagraph");return r.forEach((function(t){var r,o,i=function(t){for(;t&&!bs(t);)t=t.nextSibling;return!t||!wh.test(t.className)}(t.nextSibling);if(n.push(t),i){var a=Ah(n),s=t.nextSibling;s?(r=a,(o=s).parentNode&&o.parentNode.insertBefore(r,o)):function(t,e){(e=Wi(e)?Ya(e):[e]).forEach((function(e){t.appendChild(e)}))}(e,a),n=[]}ks(t)})),""+(r.length?"<p></p>":"")+e.innerHTML}function Oh(t){return function(t){return kh.test(t)}(t=function(t){return/<\/td>((?!<\/tr>)[\s\S])*$/i.test(t)&&(t="<tr>"+t+"</tr>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(t)&&(t="<table>"+t+"</table>"),t}(t=function(t){var e=t.indexOf("\x3c!--StartFragment--\x3e"),n=t.lastIndexOf("\x3c!--EndFragment--\x3e");return e>-1&&n>-1&&(t=t.slice(e+"\x3c!--StartFragment--\x3e".length,n)),t}(t)))&&(t=Sh(t)),t}function Nh(t,e,n){for(var r=[],o=t.childCount,i=0;i<o;i+=1)if(!t.child(i).attrs.extended){var a=i<o?n.create(t.child(i).attrs,t.child(i).content):n.createAndFill();r.push(a)}return r}function Lh(t,e,n){var r=n.nodes,o=r.tableRow,i=Nh(t,0,r.tableHeadCell);return o.create(null,i)}function Ih(t,e,n){var r=n.nodes,o=r.tableRow,i=Nh(t,0,r.tableBodyCell);return o.create(null,i)}function _h(t){var e=[],n=[];"tableHead"===t.firstChild.type.name&&t.firstChild.forEach((function(t){return e.push(t)}));"tableBody"===t.lastChild.type.name&&t.lastChild.forEach((function(t){return n.push(t)}));return Hi(Hi([],e),n)}function Fh(t,e,n){var r=Lh(t,0,n);return n.nodes.tableHead.create(null,r)}function Bh(t,e,n){var r=t.map((function(t){return Ih(t,0,n)}));if(!t.length){var o=function(t,e){for(var n=e.nodes,r=n.tableRow,o=n.tableBodyCell,i=[],a=0;a<t;a+=1){var s=o.createAndFill();i.push(s)}return r.create({dummyRowForPasting:!0},i)}(e,n);r.push(o)}return n.nodes.tableBody.create(null,r)}function Rh(t,e){var n=[];return t.content.forEach((function(t){if("table"===t.type.name){var r=eh(new I(T.from(t),0,0));if(r){var o=_h(r),i="tableBody"===r.firstChild.type.name,a=function(t,e,n){var r=function(t){return t.reduce((function(t,e){return t.childCount>e.childCount?t:e})).childCount}(t);if(n)return e.nodes.table.create(null,[Bh(t,r,e)]);var o=t[0],i=t.slice(1),a=[Fh(o,0,e)];return i.length&&a.push(Bh(i,r,e)),e.nodes.table.create(null,a)}(o,e,i);n.push(a)}}else n.push(t)})),new I(T.from(n),0,0)}function Ph(t){return 4*t}function zh(t,e){var n=t.state,r=n.selection,o=n.schema,i=n.tr,a=th(r),s=a.anchor,u=a.head;if(s&&u){var l=eh(e);if(!l)return!1;var c=Wf.create(s),p=c.getRectOffsets(s,u),f=function(t,e,n){var r=[],o=_h(t),i=(o[0].childCount,o.length),a=0===e.startRowIdx,s=o.slice(0,i);if(a){var u=s.shift();if(u){var l=Lh(u,0,n).content;r.push(l)}}return s.forEach((function(t){if(!t.attrs.dummyRowForPasting){var e=Ih(t,0,n).content;r.push(e)}})),r}(l,p,o),h=function(t,e,n){for(var r=e.startRowIdx,o=e.startColIdx,i=n.length,a=0,s=function(t){var e=n[t].childCount;n[t].forEach((function(t){var n=t.attrs.colspan;n>1&&(e+=n-1)})),a=Math.max(a,e)},u=0;u<i;u+=1)s(u);var l=r+i-1,c=o+a-1;return{startRowIdx:r,startColIdx:o,endRowIdx:l,endColIdx:c,addedRowCount:Math.max(l+1-t.totalRowCount,0),addedColumnCount:Math.max(c+1-t.totalColumnCount,0)}}(c,p,f),d=[];return function(t,e){var n=nh(t.getSpannedOffsets(e)),r=n.rowCount,o=n.columnCount,i=nh(e),a=i.rowCount,s=i.columnCount;return r===a&&o===s}(c,h)&&(function(t,e){for(var n=t.startRowIdx,r=t.startColIdx,o=t.endRowIdx,i=t.endColIdx,a=t.addedRowCount,s=t.addedColumnCount,u=n;u<=o-a;u+=1)e.push({rowIdx:u,startColIdx:r,endColIdx:i-s})}(h,d),h.addedColumnCount&&function(t,e,n,r,o){for(var i=r.startRowIdx,a=r.startColIdx,s=r.endRowIdx,u=r.endColIdx,l=r.addedRowCount,c=r.addedColumnCount,p=n.totalRowCount,f=0,h=0;h<p;h+=1){var d=n.getCellInfo(h,u-c),m=d.offset,v=d.nodeSize,g=t.mapping.map(m+v),y=Xf(c,h,e);if(t.insert(g,y),h>=i&&h<=s-l){var b=n.getCellInfo(h,u-c),w=t.mapping.map(b.offset),k=g+Ph(c);o[f]={rowIdx:h,startColIdx:a,endColIdx:u,dummyOffsets:[w,k]},f+=1}}}(i,o,c,h,d),h.addedRowCount&&function(t,e,n,r,o){var i=r.addedRowCount,a=r.addedColumnCount,s=r.startColIdx,u=r.endColIdx,l=t.mapping.maps.length,c=n.tableEndOffset-2,p=Gf(i,n.totalColumnCount+a,e),f=c;t.insert(t.mapping.slice(l).map(f),p);for(var h=0;h<i;h+=1){var d=f+Ph(s)+1,m=f+Ph(u+1)+1,v=f+Ph(n.totalColumnCount+a)+2;o.push({rowIdx:h+n.totalRowCount,startColIdx:s,endColIdx:u,dummyOffsets:[d,m]}),f=v}}(i,o,c,h,d),function(t,e,n,r){var o=t.mapping.maps.length;n.forEach((function(n,i){var a=n.rowIdx,s=n.startColIdx,u=n.endColIdx,l=n.dummyOffsets,c=t.mapping.slice(o),p=new I(e[i],0,0),f=l?l[0]:r.getCellStartOffset(a,s),h=l?l[1]:r.getCellEndOffset(a,u);t.replace(c.map(f),c.map(h),p)}))}(i,f,d,c),t.dispatch(i),function(t,e,n){var r=t.state,o=r.tr,i=r.doc,a=Wf.create(i.resolve(n)),s=e[0],u=s.rowIdx,l=s.startColIdx,c=ha(e),p=c.rowIdx,f=c.endColIdx,h=a.getCellInfo(u,l).offset,d=a.getCellInfo(p,f).offset;t.dispatch(o.setSelection(new Zf(i.resolve(h),i.resolve(d))))}(t,d,c.getCellInfo(0,0).offset)),!0}return!1}var jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(rs),Hh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",group:"block listGroup",attrs:ji({},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"p"}],toDOM:function(t){return["p",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(rs),$h=/\s{1,4}$/,qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e.prototype.addSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,o=n.$from,i=n.$to;return!(!o.blockRange(i)||Nf(o)||Lf(o))&&(e(r.insertText("    ",o.pos,i.pos)),!0)}},e.prototype.removeSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,o=n.$from,i=n.$to,a=n.from;if(o.blockRange(i)&&!Nf(o)&&!Lf(o)){var s=o.nodeBefore;if(s&&s.isText){var u=s.text,l=u.replace($h,""),c=u.length-l.length;return e(r.delete(a-c,a)),!0}}return!1}},e.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},e}(rs),Vh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this.levels.map((function(t){return{tag:"h"+t,getAttrs:function(e){var n=e.getAttribute("data-raw-html");return ji({level:t},n&&{rawHTML:n})}}}));return{attrs:ji({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),content:"inline*",group:"block",defining:!0,parseDOM:t,toDOM:function(t){var e=t.attrs;return["h"+e.level,Rf(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){return ui(e.schema.nodes.heading,t)(e,n)}}},e}(rs),Uh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:ji({language:{default:null},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){var e=t.getAttribute("data-raw-html"),n=t.firstElementChild;return ji({language:(null==n?void 0:n.getAttribute("data-language"))||null},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"pre",["code",ji({"data-language":e.language},Rf(e)),0]]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return ui(t.schema.nodes.codeBlock)(t,e)}}},e.prototype.moveCursor=function(t){var e=this;return function(n,r){var o,i,a=n.tr,s=n.doc,u=n.schema,l=n.selection.$from;if(e.context.view.endOfTextblock(t)&&"codeBlock"===l.node().type.name){var c=l.parent.textContent.split("\n"),p="up"===t?l.start():l.end(),f="up"===t?[p,c[0].length+p]:[p-ha(c).length,p],h=s.resolve("up"===t?l.before():l.after()),d="up"===t?h.nodeBefore:h.nodeAfter;if(o=l.pos,i=f[1],o>=f[0]&&o<=i&&!d){var m=Ca(a,h,u);if(m)return r(m),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},e}(rs),Wh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block listGroup",attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[_f("ul")],toDOM:function(t){return["ul",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e.prototype.changeList=function(){return function(t,e){return jf(t.schema.nodes.bulletList)(t,e)}},e.prototype.commands=function(){return{bulletList:this.changeList,taskList:Hf}},e.prototype.keymaps=function(){var t=this.changeList(),e=Vf(),n=e.indent,r=e.outdent;return{"Mod-u":t,"Mod-U":t,Tab:n(),"Shift-Tab":r()}},e}(rs),Jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block listGroup",attrs:ji({order:{default:1},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"ol",getAttrs:function(t){var e=t.getAttribute("start"),n=t.getAttribute("data-raw-html");return ji({order:t.hasAttribute("start")?Number(e):1},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"ol",ji({start:1===e.order?null:e.order},Rf(e)),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return jf(t.schema.nodes.orderedList)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()(),e=Vf(),n=e.indent,r=e.outdent;return{"Mod-o":t,"Mod-O":t,Tab:n(),"Shift-Tab":r()}},e}(rs),Kh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph listGroup*",attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return ji({task:t.hasAttribute("data-task"),checked:t.hasAttribute("data-task-checked")},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs,n=e.task,r=e.checked;if(!n)return[e.rawHTML||"li",0];var o=["task-list-item"];return r&&o.push("checked"),[e.rawHTML||"li",ji({class:o.join(" "),"data-task":n},r&&{"data-task-checked":r}),0]}}},enumerable:!1,configurable:!0}),e.prototype.liftToPrevListItem=function(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from,a=n.empty,s=o.nodes.listItem,u=i.parent,l=i.node(-1);if(a&&!u.childCount&&l.type===s){if(i.index(-2)>=1)return r.delete(i.start(-1)-1,i.end(-1)),e(r),!0;if(i.node(-3).type===s)return r.delete(i.start(-2)-1,i.end(-1)),e(r),!0}return!1}},e.prototype.keymaps=function(){return{Backspace:this.liftToPrevListItem(),Enter:function(t,e){return(n=t.schema.nodes.listItem,function(t,e){var r=t.tr,o=t.selection,i=o.$from,a=o.$to;if(i.depth<2||!i.sameParent(a))return!1;var s=i.node(-1);if(s.type!==n)return!1;if(0===i.parent.content.size&&i.node(-1).childCount===i.indexAfter(-1)){if(2===i.depth||i.node(-3).type!==n||i.index(-2)!==i.node(-2).childCount-1)return!1;for(var u=i.index(-1)>0,l=T.empty,c=i.depth-(u?1:2);c>=i.depth-3;c-=1)l=T.from(i.node(c).copy(l));return l=l.append(T.from(n.createAndFill())),r.replace(u?i.before():i.before(-1),i.after(-3),new I(l,u?3:2,2)),r.setSelection(be.near(r.doc.resolve(i.pos+(u?3:2)))),e(r),!0}var p=a.pos===i.end()?s.contentMatchAt(0).defaultType:null,f=p&&[null,{type:p}];return r.delete(i.pos,a.pos),!!re(r.doc,i.pos,2,f)&&(r.split(i.pos,2,f),e(r),!0)})(t,e);var n}}},e}(rs),Zh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),content:"block+",group:"block",parseDOM:[_f("blockquote")],toDOM:function(t){return["blockquote",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return si(t.schema.nodes.blockQuote)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Alt-q":t,"Alt-Q":t}},e}(rs),Gh={left:function(t,e){var n=t[0],r=t[1],o=e.totalColumnCount,i=0===r;if(0!==n||!i){r-=1,i&&(n-=1,r=o-1);var a=e.getCellInfo(n,r),s=a.offset,u=a.nodeSize;return s+u-2}return null},right:function(t,e){var n=t[0],r=t[1],o=e.totalRowCount,i=e.totalColumnCount,a=r===i-1;if(n!==o-1||!a){var s=r+1,u=e.getColspanStartInfo(n,r);return(null==u?void 0:u.count)>1&&(s+=u.count-1),(a||s===i)&&(n+=1,s=0),e.getCellInfo(n,s).offset+2}return null},up:function(t,e){var n=t[0],r=t[1];if(n>0){var o=e.getCellInfo(n-1,r),i=o.offset,a=o.nodeSize;return i+a-2}return null},down:function(t,e){var n=t[0],r=t[1],o=e.totalRowCount;if(n<o-1){var i=n+1,a=e.getRowspanStartInfo(n,r);return(null==a?void 0:a.count)>1&&(i+=a.count-1),e.getCellInfo(i,r).offset+2}return null}};function Xh(t,e,n){var r=n[0],o=n[1],i=e.getRowspanStartInfo(r,o),a="up"===t&&0===r,s="down"===t&&((null==i?void 0:i.count)>1?r+i.count-1:r)===e.totalRowCount-1;return a||s}function Qh(t,e,n){var r=t.doc.resolve(e.tableEndOffset);return r.nodeAfter?t.setSelection(be.near(r,1)):Ca(t,r,n)}function Yh(t,e,n,r){var o=(0,Gh[t])(n,r);if(o){var i="right"===t||"down"===t?1:-1;return e.setSelection(be.near(e.doc.resolve(o),i))}return null}function td(t,e,n){var r=t.getCellInfo(e,0).offset,o=t.getCellInfo(e,n-1);return{from:r,to:o.offset+o.nodeSize}}var ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[_f("table")],toDOM:function(t){return["table",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e.prototype.addTable=function(){return function(t){return void 0===t&&(t={rowCount:2,columnCount:1,data:[]}),function(e,n){var r=t.rowCount,o=t.columnCount,i=t.data,a=e.schema,s=e.selection,u=e.tr,l=s.from,c=s.to,p=s.$from;if(l===c&&!Lf(p)){var f=a.nodes,h=f.tableHead,d=f.tableBody,m=null==i?void 0:i.slice(0,o),v=null==i?void 0:i.slice(o,i.length),g=function(t,e,n){for(var r=e.nodes,o=r.tableRow,i=r.tableHeadCell,a=r.paragraph,s=[],u=0;u<t;u+=1){var l=n&&n[u],c=a.create(null,l?e.text(l):[]);s.push(i.create(null,c))}return[o.create(null,s)]}(o,a,m),y=Gf(r-1,o,a,v),b=a.nodes.table.create(null,[h.create(null,g),d.create(null,y)]);return n(u.replaceSelectionWith(b)),!0}return!1}}},e.prototype.removeTable=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=Wf.create(n.$anchor);if(o){var i=o.tableStartOffset,a=o.tableEndOffset,s=i-1,u=xa(r.delete(s,a),s);return e(r.setSelection(u)),!0}return!1}}},e.prototype.addColumn=function(t){return function(){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=th(r),s=a.anchor,u=a.head;if(s&&u){for(var l=Wf.create(s),c=l.getRectOffsets(s,u),p="left"===t?c.startColIdx:c.endColIdx+1,f=nh(c).columnCount,h=l.totalRowCount,d=0;d<h;d+=1){var m=Xf(f,d,i);o.insert(o.mapping.map(l.posAt(d,p)),m)}return n(o),!0}return!1}}},e.prototype.removeColumn=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=th(n),i=o.anchor,a=o.head;if(i&&a){var s=Wf.create(i),u=s.getRectOffsets(i,a),l=s.totalColumnCount,c=s.totalRowCount;if(nh(u).columnCount===l)return!1;for(var p=u.startColIdx,f=u.endColIdx,h=r.mapping.maps.length,d=0;d<c;d+=1)for(var m=f;m>=p;m-=1){var v=s.getCellInfo(d,m),g=v.offset,y=v.nodeSize,b=r.mapping.slice(h).map(g),w=b+y;r.delete(b,w)}return e(r),!0}return!1}}},e.prototype.addRow=function(t){return function(){return function(e,n){var r=e.selection,o=e.schema,i=e.tr,a=th(r),s=a.anchor,u=a.head;if(s&&u){var l=Wf.create(s),c=l.totalColumnCount,p=l.getRectOffsets(s,u),f=nh(p).rowCount,h=function(t,e,n){var r,o,i;return"up"===t?(r=n.startRowIdx,o=0,i=-1):(r=n.endRowIdx,o=e.totalColumnCount-1,i=e.getCellInfo(r,o).nodeSize+1),{targetRowIdx:r,insertColIdx:o,nodeSize:i}}(t,l,p),d=h.targetRowIdx,m=h.insertColIdx,v=h.nodeSize;if(!(0===d)){for(var g=[],y=i.mapping.map(l.posAt(d,m))+v,b=[],w=0;w<c;w+=1)b=b.concat(Xf(1,d,o));for(var k=0;k<f;k+=1)g.push(o.nodes.tableRow.create(null,b));return n(i.insert(y,g)),!0}}return!1}}},e.prototype.removeRow=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=th(n),i=o.anchor,a=o.head;if(i&&a){var s=Wf.create(i),u=s.totalRowCount,l=s.totalColumnCount,c=s.getRectOffsets(i,a),p=nh(c).rowCount,f=c.startRowIdx,h=c.endRowIdx;if(p===u-1||0===f)return!1;for(var d=h;d>=f;d-=1){var m=td(s,d,l),v=m.from,g=m.to;r.delete(v-1,g+1)}return e(r),!0}return!1}}},e.prototype.alignColumn=function(){return function(t){return void 0===t&&(t={align:"center"}),function(e,n){var r=t.align,o=e.selection,i=e.tr,a=th(o),s=a.anchor,u=a.head;if(s&&u){for(var l=Wf.create(s),c=l.totalRowCount,p=l.getRectOffsets(s,u),f=p.startColIdx,h=p.endColIdx,d=0;d<c;d+=1)for(var m=f;m<=h;m+=1)if(!l.extendedRowspan(d,m)&&!l.extendedColspan(d,m)){var v=l.getNodeAndPos(d,m),g=v.node,y=v.pos,b=rh(g,{align:r});i.setNodeMarkup(y,null,b)}return n(i),!0}return!1}}},e.prototype.moveToCell=function(t){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=th(r),s=a.anchor,u=a.head;if(s&&u){var l=Wf.create(s),c=l.getCellIndex(s),p=void 0;if(p=Xh(t,l,c)?Qh(o,l,i):Yh(t,o,c,l))return n(p),!0}return!1}},e.prototype.moveInCell=function(t){var e=this;return function(n,r){var o=n.selection,i=n.tr,a=n.doc,s=n.schema,u=o.$from;if(!e.context.view.endOfTextblock(t))return!1;var l=Of(u,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}));if(l){var c=Of(u,(function(t){return"paragraph"===t.type.name})),p=l.depth;if(c&&function(t,e,n,r){var o=e[0],i=e[1],a=o+3,s=i>=a,u=s?o+1:i,l=function(t,e,n,r,o){var i=e[0],a=e[1],s=e[2];if("left"===t||"up"===t){if(o&&!function(t,e,n){var r=n[0],o=n[1],i=e.resolve(t.before(r-1));return o===r&&!i.nodeBefore}(n,r,[i,a]))return!1;var u=n.before(s);if(r.resolve(u).nodeBefore)return!1}return!0}(t,[i,a,u],n,r,s),c=function(t,e,n,r,o){if("right"===t||"down"===t){if(o&&!function(t){for(var e,n,r=t.depth;r&&"tableBodyCell"!==(n=t.node(r)).type.name;){if("listItem"===n.type.name){var o=t.node(r-1).lastChild===n,i="paragraph"!==(null===(e=n.lastChild)||void 0===e?void 0:e.type.name);return!!o&&!i}r-=1}return!1}(n))return!1;var i=n.after(e);if(r.resolve(i).nodeAfter)return!1}return!0}(t,u,n,r,s);return l&&c}(t,[p,c.depth],u,a)){var f=th(o).anchor,h=Wf.create(f),d=h.getCellIndex(f),m=void 0;if(!function(t,e,n){var r=n[0],o=n[1];if("up"===t||"down"===t)return!1;var i=e.tableStartOffset,a=e.tableEndOffset,s=e.getCellInfo(r,o),u=s.offset,l=s.nodeSize;return("left"===t?i:a)===("left"===t?u-2:u+l+3)}(t,h,d)?Xh(t,h,d)?"up"===t?m=function(t,e,n){var r=t.doc.resolve(e.tableStartOffset-1);return r.nodeBefore?t.setSelection(be.near(r,-1)):Ca(t,r,n)}(i,h,s):"down"===t&&(m=Qh(i,h,s)):m=Yh(t,i,d,h):m=function(t,e,n){var r=t.doc.resolve(e.before(n-3));return t.setSelection(new De(r))}(i,u,p),m)return r(m),!0}}return!1}},e.prototype.deleteCells=function(){return function(t,e){var n=t.schema,r=t.selection,o=t.tr,i=th(r),a=i.anchor,s=i.head;if(a&&s&&!(r instanceof xe)){for(var u=Wf.create(a),l=u.getRectOffsets(a,s),c=l.startRowIdx,p=l.startColIdx,f=l.endRowIdx,h=l.endColIdx,d=c;d<=f;d+=1)for(var m=p;m<=h;m+=1)if(!u.extendedRowspan(d,m)&&!u.extendedColspan(d,m)){var v=u.getNodeAndPos(d,m),g=v.node,y=v.pos,b=Xf(1,d,n,g.attrs);o.replaceWith(o.mapping.map(y),o.mapping.map(y+g.nodeSize),b)}return e(o),!0}return!1}},e.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},e.prototype.keymaps=function(){var t=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:t,"Mod-Backspace":t,Delete:t,"Mod-Delete":t}},e}(rs),nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[_f("thead")],toDOM:function(t){return["thead",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(rs),rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"tbody",getAttrs:function(t){var e=t.querySelectorAll("tr")[0].children.length,n=t.getAttribute("data-raw-html");return!!e&&ji({},n&&{rawHTML:n})}}],toDOM:function(t){return["tbody",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(rs),od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"tr",getAttrs:function(t){var e=t.children.length,n=t.getAttribute("data-raw-html");return!!e&&ji({},n&&{rawHTML:n})}}],toDOM:function(t){return["tr",Rf(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(rs),id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:ji({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),isolating:!0,parseDOM:[Bf("th")],toDOM:function(t){var e=t.attrs,n=Ff(e);return["th",ji(ji({},n),Rf(e)),0]}}},enumerable:!1,configurable:!0}),e}(rs),ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[Bf("td")],toDOM:function(t){return["td",Ff(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(rs),sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{inline:!0,attrs:ji({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(t){var e=t.getAttribute("src")||"",n=t.getAttribute("data-raw-html");return ji({imageUrl:Gp(e),altText:t.getAttribute("alt")},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"img",ji(ji({src:e.imageUrl},e.altText&&{alt:e.altText}),Rf(e))]}}},enumerable:!1,configurable:!0}),e.prototype.addImage=function(){return function(t){return function(e,n){var r=e.schema,o=e.tr,i=t,a=i.imageUrl,s=i.altText;if(!a)return!1;var u=r.nodes.image.createAndFill(ji({imageUrl:Wu(Uu(a),!0)},s&&{altText:Wu(s,!1)}));return n(o.replaceSelectionWith(u).scrollIntoView()),!0}}},e.prototype.commands=function(){return{addImage:this.addImage()}},e}(rs),ud=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(t){var e=t.attrs;return["div",Rf(e),[e.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){var t=this;return function(){return function(e,n){var r,o=e.selection,i=o.$from;if(i===o.$to){var a=e.doc,s=e.schema.nodes,u=s.thematicBreak,l=s.paragraph,c=[u.create()],p=i.node(1),f=a.child(a.childCount-1)===p,h=a.resolve(i.after(1)),d=(null===(r=i.nodeAfter)||void 0===r?void 0:r.type.name)===t.name;return(f||d)&&c.push(l.create()),n(e.tr.insert(h.pos,c).scrollIntoView()),!0}return!1}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(rs),ld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["b","strong"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return ji({},e&&{rawHTML:e})}}}));return{attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"strong",Rf(e)]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return function(){return function(t,e){return li(t.schema.marks.strong)(t,e)}}},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Xs),cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["i","em"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return ji({},e&&{rawHTML:e})}}}));return{attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"em",Rf(e)]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return function(){return function(t,e){return li(t.schema.marks.emph)(t,e)}}},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Xs),pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["s","del"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return ji({},e&&{rawHTML:e})}}}));return{attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"del",Rf(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return li(t.schema.marks.strike)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Xs),fd=function(t){function e(e){var n=t.call(this)||this;return n.linkAttributes=e,n}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:ji({linkUrl:{default:""},linkText:{default:null},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){var e=t.getAttribute("href")||"",n=t.getAttribute("data-raw-html");return ji({linkUrl:Gp(e),linkText:t.textContent},n&&{rawHTML:n})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"a",ji(ji({href:n.linkUrl},t.linkAttributes),Rf(n))]}}},enumerable:!1,configurable:!0}),e.prototype.addLink=function(){return function(t){return function(e,n){var r=t,o=r.linkUrl,i=r.linkText,a=void 0===i?"":i,s=e.schema,u=e.tr,l=e.selection,c=l.empty,p=l.from,f=l.to;if(p&&f&&o){var h={linkUrl:Wu(Uu(o),!0),linkText:Wu(a,!1)},d=s.mark("link",h);if(c&&a){var m=ka(s,a,d);u.replaceRangeWith(p,f,m)}else u.addMark(p,f,d);return n(u.scrollIntoView()),!0}return!1}}},e.prototype.toggleLink=function(){return function(t){return function(e,n){return li(e.schema.marks.link,t)(e,n)}}},e.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},e}(Xs),hd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:ji({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"code",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return ji({},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"code",Rf(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return li(t.schema.marks.code)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Xs),dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(t){return{info:t.getAttribute("data-custom-info")}}}],toDOM:function(t){return["div",{"data-custom-info":t.attrs.info||null},0]}}},enumerable:!1,configurable:!0}),e}(rs),md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,parseDOM:[{tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){var r=t.selection.$from;return!(!n.endOfTextblock("down")||"frontMatter"!==r.node().type.name)&&oi(t,e)}}},e.prototype.keymaps=function(){return{Enter:this.commands()()}},e}(rs);var vd=gs("contents"),gd=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.toDOMAdaptor,i=n.htmlSchemaMap,a=void 0===i?{}:i,s=n.linkAttributes,u=void 0===s?{}:s,l=n.useCommandShortcut,c=void 0===l||l,p=n.wwPlugins,f=void 0===p?[]:p,h=n.wwNodeViews,d=void 0===h?{}:h;return r.editorType="wysiwyg",r.el.classList.add("ww-mode"),r.toDOMAdaptor=o,r.linkAttributes=u,r.extraPlugins=f,r.pluginNodeViews=d,r.specs=r.createSpecs(),r.schema=r.createSchema(a),r.context=r.createContext(),r.keymaps=r.createKeymaps(c),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(ji(ji({},r.context),{view:r.view})),r.initEvent(),r}return zi(e,t),e.prototype.createSpecs=function(){return t=this.linkAttributes,new ps([new jh,new Hh,new qh,new Vh,new Uh,new Wh,new Jh,new Kh,new Zh,new ed,new nd,new rd,new od,new id,new ad,new sd,new ud,new ld,new cd,new pd,new fd(t),new hd,new dd,new md,new ss]);var t},e.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSchema=function(t){return new Ct({nodes:ji(ji({},this.specs.nodes),t.nodes),marks:ji(ji({},this.specs.marks),t.marks)})},e.prototype.createPlugins=function(){return this.defaultPlugins.concat(Hi([new ze({key:oh,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(oh);if(n)return-1===n?null:n;if(ra(e)||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:sh,createSelectionBetween:function(t){var e=t.state;return ra(oh.getState(e))?null:e.selection}},view:function(t){return new ih(t)}}),(t=this.eventEmitter,new ze({props:{handleDOMEvents:{contextmenu:function(e,n){var r=Qf(n.target,e.dom);if(r){n.preventDefault();var o=n,i=o.clientX,a=o.clientY,s=e.dom.parentNode.getBoundingClientRect(),u=s.left,l=s.top,c="TH"===r.nodeName;return t.emit("contextmenu",{pos:{left:i-u+10+"px",top:a-l+30+"px"},menuGroups:ph(t,c),tableCell:r}),!0}return!1}}}})),new ze({props:{handleDOMEvents:{mousedown:function(t,e){var n=e,r=n.clientX,o=n.clientY,i=t.posAtCoords({left:r,top:o});if(i){var a=t.state,s=a.doc,u=a.tr,l=s.resolve(i.pos),c=If(l),p=e.target,f=getComputedStyle(p,":before"),h=e,d=h.offsetX,m=h.offsetY;if(!c||!vs(f,d,m))return!1;e.preventDefault();var v=l.before(c.depth),g=c.node.attrs;return u.setNodeMarkup(v,null,ji(ji({},g),{checked:!g.checked})),t.dispatch(u),!0}return!1}}}}),vh(this.eventEmitter)],this.createPluginProps()));var t},e.prototype.createPluginNodeViews=function(){var t=this.eventEmitter,e=this.pluginNodeViews,n={};return e&&Object.keys(e).forEach((function(r){n[r]=function(n,o,i){return e[r](n,o,i,t)}})),n},e.prototype.createView=function(){var t=this,e=this.toDOMAdaptor,n=this.eventEmitter;return new Oo(this.el,{state:this.createState(),attributes:{class:vd},nodeViews:ji({customBlock:function(t,n,r){return new gh(t,n,r,e)},image:function(t,e,r){return new yh(t,e,r,n)},codeBlock:function(t,e,r){return new bh(t,e,r,n)},widget:is},this.createPluginNodeViews()),dispatchTransaction:function(e){var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e.scrollIntoView()),t.eventEmitter.emit("setFocusedNode",n.selection.$from.node(1))},transformPastedHTML:Oh,transformPasted:function(e){return Rh(e,t.schema)},handlePaste:function(t,e,n){return zh(t,n)},handleKeyDown:function(e,n){return t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{paste:function(e,n){var r=n.clipboardData||window.clipboardData,o=r&&r.items;if(o){var i=es(o);i&&(n.preventDefault(),ts(t.eventEmitter,i,n.type))}return!1},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0}}})},e.prototype.createCommands=function(){return this.specs.commands(this.view,Vf())},e.prototype.getHTML=function(){return this.view.dom.innerHTML},e.prototype.getModel=function(){return this.view.state.doc},e.prototype.getSelection=function(){var t=this.view.state.selection;return[t.from,t.to]},e.prototype.getSchema=function(){return this.view.state.schema},e.prototype.replaceSelection=function(t,e,n){var r=this.view.state,o=r.schema,i=r.tr,a=t.split("\n").map((function(t){return wa(o,Ka(t,o))})),s=new I(T.from(a),1,1),u=na(e)&&na(n)?i.replaceRange(e,n,s):i.replaceSelection(s);this.view.dispatch(u),this.focus()},e.prototype.deleteSelection=function(t,e){var n=this.view.state.tr,r=na(t)&&na(e)?n.deleteRange(t,e):n.deleteSelection();this.view.dispatch(r.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,o=n.selection,i=o.from,a=o.to;return na(t)&&na(e)&&(i=t,a=e),r.textBetween(i,a,"\n")},e.prototype.setModel=function(t,e){void 0===e&&(e=!1);var n=this.view.state,r=n.tr,o=n.doc;this.view.dispatch(r.replaceWith(0,o.content.size,t)),e&&this.moveCursorToEnd()},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=xa(n,t,e);this.view.dispatch(n.setSelection(r).scrollIntoView())},e.prototype.addWidget=function(t,e,n){var r=this.view,o=r.dispatch,i=r.state;o(i.tr.setMeta("widget",{pos:null!=n?n:i.selection.to,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=Ka(n,r.schema);this.view.dispatch(o.replaceWith(t,e,i))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,o=t?n.resolve(t):r.$from,i=o.marks(),a=o.node(),s=o.start(),u=o.end(),l=a.type.name;if(i.length||"paragraph"===l){var c=i[i.length-1];l=c?c.type.name:"text",a.forEach((function(t,e){var n=t.isText,r=t.nodeSize,i=t.marks,a=o.pos-s;n&&e<=a&&e+r>=a&&function(t){return!t.length||aa(t,c)}(i)&&(u=(s+=e)+r)}))}return{range:[s,u],type:l}},e}(us);var yd=function(t){return!Xi(t)&&!ra(t)};var bd=function(t){return yd(t)&&!1!==t};var wd=function(t){return!bd(t)},kd=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","change","caretChange","destroy","focus","blur","keydown","keyup"],xd=function(){function t(){var t=this;this.events=new uh,this.eventTypes=kd.reduce((function(t,e){return ji(ji({},t),{type:e})}),{}),kd.forEach((function(e){t.addEventType(e)}))}return t.prototype.listen=function(t,e){var n=this.getTypeInfo(t),r=this.events.get(n.type)||[];if(!this.hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(e.namespace=n.namespace),r.push(e),this.events.set(n.type,r)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getTypeInfo(t),o=this.events.get(r.type),i=[];return o&&o.forEach((function(t){var n=t.apply(void 0,e);Xi(n)||i.push(n)})),i},t.prototype.emitReduce=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this.events.get(t);return o&&o.forEach((function(t){var r=t.apply(void 0,Hi([e],n));wd(r)||(e=r)})),e},t.prototype.getTypeInfo=function(t){var e=t.split(".");return{type:e[0],namespace:e[1]}},t.prototype.hasEventType=function(t){return!Xi(this.eventTypes[this.getTypeInfo(t).type])},t.prototype.addEventType=function(t){if(this.hasEventType(t))throw new Error("There is already have event type "+t);this.eventTypes[t]=t},t.prototype.removeEventHandler=function(t,e){var n=this,r=this.getTypeInfo(t),o=r.type,i=r.namespace;o&&e?this.removeEventHandlerWithHandler(o,e):o&&!i?this.events.delete(o):!o&&i?this.events.forEach((function(t,e){n.removeEventHandlerWithTypeInfo(e,i)})):o&&i&&this.removeEventHandlerWithTypeInfo(o,i)},t.prototype.removeEventHandlerWithHandler=function(t,e){var n=this.events.get(t);if(n){var r=n.indexOf(e);n.indexOf(e)>=0&&n.splice(r,1)}},t.prototype.removeEventHandlerWithTypeInfo=function(t,e){var n=[],r=this.events.get(t);r&&(r.map((function(t){return t.namespace!==e&&n.push(t),null})),this.events.set(t,n))},t.prototype.getEvents=function(){return this.events},t}(),Cd=function(){function t(t,e,n,r){this.eventEmitter=t,this.mdCommands=e,this.wwCommands=n,this.getEditorType=r,this.initEvent()}return t.prototype.initEvent=function(){var t=this;this.eventEmitter.listen("command",(function(e,n){t.exec(e,n)}))},t.prototype.addCommand=function(t,e,n){"markdown"===t?this.mdCommands[e]=n:this.wwCommands[e]=n},t.prototype.deleteCommand=function(t,e){"markdown"===t?delete this.mdCommands[e]:delete this.wwCommands[e]},t.prototype.exec=function(t,e){"markdown"===this.getEditorType()?this.mdCommands[t](e):this.wwCommands[t](e)},t}();function Dd(t){return"htmlInline"===t.type&&/<br ?\/?>/.test(t.literal)}function Ed(t){Ya(t.childNodes).forEach((function(t){if(bs(t)){var e=t.nodeName.toLowerCase();t.setAttribute("data-raw-html",e),t.childNodes&&Ed(t)}}))}var Td={text:function(t,e){t.addText(e.literal||"")},paragraph:function(t,e,n,r){var o;if(n.entering){var i=t.schema.nodes.paragraph;"paragraph"===(null===(o=e.prev)||void 0===o?void 0:o.type)&&(t.openNode(i,r),t.closeNode()),t.openNode(i,r)}else t.closeNode()},heading:function(t,e,n,r){if(n.entering){var o=e,i=o.level,a=o.headingType;t.openNode(t.schema.nodes.heading,ji({level:i,headingType:a},r))}else t.closeNode()},codeBlock:function(t,e,n){var r=t.schema.nodes.codeBlock,o=e,i=o.info,a=o.literal;t.openNode(r,ji({language:i},n)),t.addText(Yp(a||"")),t.closeNode()},list:function(t,e,n,r){if(n.entering){var o=t.schema.nodes,i=o.bulletList,a=o.orderedList,s=e.listData,u=s.type,l=s.start;"bullet"===u?t.openNode(i,r):t.openNode(a,ji({order:l},r))}else t.closeNode()},item:function(t,e,n,r){var o=n.entering,i=t.schema.nodes.listItem,a=e.listData,s=a.task,u=a.checked;if(o){var l=ji(ji(ji({},s&&{task:s}),u&&{checked:u}),r);t.openNode(i,l)}else t.closeNode()},blockQuote:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.blockQuote,r):t.closeNode()},image:function(t,e,n,r){var o=n.entering,i=n.skipChildren,a=t.schema.nodes.image,s=e,u=s.destination,l=s.firstChild;o&&i&&i(),t.addNode(a,ji(ji({imageUrl:u},l&&{altText:l.literal}),r))},thematicBreak:function(t,e,n,r){t.addNode(t.schema.nodes.thematicBreak,r)},strong:function(t,e,n,r){var o=n.entering,i=t.schema.marks.strong;o?t.openMark(i.create(r)):t.closeMark(i)},emph:function(t,e,n,r){var o=n.entering,i=t.schema.marks.emph;o?t.openMark(i.create(r)):t.closeMark(i)},link:function(t,e,n,r){var o=n.entering,i=t.schema.marks.link,a=e,s=a.destination,u=a.title;if(o){var l=ji(ji({linkUrl:s},u&&{linkText:u}),r);t.openMark(i.create(l))}else t.closeMark(i)},softbreak:function(t,e){if("paragraph"===e.parent.type){var n=e.prev,r=e.next;n&&!Dd(n)&&t.closeNode(),r&&!Dd(r)&&t.openNode(t.schema.nodes.paragraph)}},table:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.table,r):t.closeNode()},tableHead:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.tableHead,r):t.closeNode()},tableBody:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.tableBody,r):t.closeNode()},tableRow:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.tableRow,r):t.closeNode()},tableCell:function(t,e,n){var r=n.entering;if(!e.ignored){var o=function(e){return e&&(ef(e)||tf(t,e))};if(r){var i=t.schema.nodes,a=i.tableHeadCell,s=i.tableBodyCell,u=i.paragraph,l=e.parent.parent,c="tableHead"===l.type?a:s,p=l.parent.columns[e.startIdx].align,f=ji({},e.attrs);p&&(f.align=p),t.openNode(c,f),o(e.firstChild)&&t.openNode(u)}else o(e.lastChild)&&t.closeNode(),t.closeNode()}},strike:function(t,e,n,r){var o=n.entering,i=t.schema.marks.strike;o?t.openMark(i.create(r)):t.closeMark(i)},code:function(t,e,n,r){var o=t.schema.marks.code;t.openMark(o.create(r)),t.addText(Yp(e.literal||"")),t.closeMark(o)},customBlock:function(t,e){var n=t.schema.nodes,r=n.customBlock,o=n.paragraph,i=e,a=i.info,s=i.literal;t.openNode(r,{info:a}),t.addText(Yp(s||"")),t.closeNode(),e.next||(t.openNode(o),t.closeNode())},frontMatter:function(t,e){t.openNode(t.schema.nodes.frontMatter),t.addText(e.literal),t.closeNode()},htmlInline:function(t,e){var n=e.literal,r=n.match(Qp),o=r[1],i=r[3],a=(o||i).toLowerCase(),s=t.schema.marks[a];if(null==s?void 0:s.spec.attrs.htmlInline)if(o){var u=lf(n);t.openMark(s.create({htmlAttrs:u}))}else t.closeMark(s);else{var l=sf[a];l&&l(t,e,o)}},htmlBlock:function(t,e){var n=e.literal,r=document.createElement("div"),o=n.match(Qp),i=o[1],a=o[3],s=(i||a).toLowerCase(),u=t.schema.nodes[s];if(null==u?void 0:u.spec.attrs.htmlBlock){var l=lf(n),c=uf(e,s);t.addNode(u,{htmlAttrs:l,childrenHTML:c})}else r.innerHTML=n,Ed(r),t.convertByDOMParser(r)},customInline:function(t,e,n){var r=n.entering,o=n.skipChildren,i=e.info,a=t.schema;if(-1!==i.indexOf("widget")&&r){var s=Za(e);o(),t.addNode(a.nodes.widget,{info:i},[a.text(Ua(i,s))])}}};var Md=function(){function t(t,e){this.schema=t,this.convertors=e,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=N.none}return t.prototype.top=function(){return ha(this.stack)},t.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},t.prototype.addText=function(t){if(t){var e=this.top().content,n=ha(e),r=this.schema.text(t,this.marks),o=n&&(a=r,!!((i=n).isText&&a.isText&&N.sameSet(i.marks,a.marks))&&i.withText(i.text+a.text));o?e[e.length-1]=o:e.push(r)}var i,a},t.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},t.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},t.prototype.addNode=function(t,e,n){var r=t.createAndFill(e,n,this.marks);return r?(this.push(r),r):null},t.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},t.prototype.closeNode=function(){this.marks.length&&(this.marks=N.none);var t=this.stack.pop(),e=t.type,n=t.attrs,r=t.content;return this.addNode(e,n,r)},t.prototype.convertByDOMParser=function(t){var e=this;Et.fromSchema(this.schema).parse(t).content.forEach((function(t){return e.push(t)}))},t.prototype.convert=function(t,e){for(var n=t.walker(),r=n.next(),o=function(){var t=r.node,o=r.entering,a=i.convertors[t.type],s=!1;if(a){var u={entering:o,leaf:!za(t),getChildrenText:ja,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:"\n"},skipChildren:function(){s=!0}};if(a(i,t,u),(null==e?void 0:e.node)===t){var l=i.stack.reduce((function(t,e){return t+e.content.reduce((function(t,e){return t+e.nodeSize}),0)}),0)+1;e.setMappedPos(l)}}s&&(n.resumeAt(t,!1),n.next()),r=n.next()},i=this;r;)o()},t.prototype.convertNode=function(t,e){return this.convert(t,e),this.stack.length?this.closeNode():null},t}();var Ad={text:function(t,e){var n,r=e.node;t.text(null!==(n=r.text)&&void 0!==n?n:"")},paragraph:function(t,e){var n=e.node,r=e.parent,o=e.index,i=void 0===o?0:o;if(t.stopNewline)t.convertInline(n);else{var a=0===i,s=!a&&r.child(i-1),u=s&&0===s.childCount,l=i<r.childCount-1&&r.child(i+1),c=l&&"paragraph"===l.type.name,p=0===n.childCount;p&&u?t.write("<br>\n"):!p||u||a?(t.convertInline(n),c?t.write("\n"):t.closeBlock(n)):t.write("\n")}},heading:function(t,e,n){var r=e.node,o=n.delim;"atx"===r.attrs.headingType?(t.write(o+" "),t.convertInline(r),t.closeBlock(r)):(t.convertInline(r),t.ensureNewLine(),t.write(o),t.closeBlock(r))},codeBlock:function(t,e,n){var r=e.node,o=n.delim,i=n.text,a=o,s=a[0],u=a[1];t.write(s),t.ensureNewLine(),t.text(i,!1),t.ensureNewLine(),t.write(u),t.closeBlock(r)},blockQuote:function(t,e,n){var r=e.node,o=e.parent,i=n.delim;(null==o?void 0:o.type.name)===r.type.name&&t.flushClose(1),t.wrapBlock(i,null,r,(function(){return t.convertNode(r)}))},bulletList:function(t,e,n){var r=e.node,o=n.delim;t.convertList(r,la(" ",4),(function(){return o+" "}))},orderedList:function(t,e){var n=e.node,r=n.attrs.order||1;t.convertList(n,la(" ",4),(function(t){return String(r+t)+". "}))},listItem:function(t,e){var n=e.node,r=n.attrs,o=r.task,i=r.checked;o&&t.write("["+(i?"x":" ")+"] "),t.convertNode(n)},image:function(t,e,n){var r=n.attrs;t.write("!["+(null==r?void 0:r.altText)+"]("+(null==r?void 0:r.imageUrl)+")")},thematicBreak:function(t,e,n){var r=e.node,o=n.delim;t.write(o),t.closeBlock(r)},table:function(t,e){var n=e.node;t.convertNode(n),t.closeBlock(n)},tableHead:function(t,e,n){var r=e.node,o=n.delim,i=r.firstChild;t.convertNode(r);var a=null!=o?o:"";!o&&i&&i.forEach((function(t){var e=function(t,e){var n=t.length,r="",o="";return"left"===e?(r=":",n-=1):"right"===e?(o=":",n-=1):"center"===e&&(r=":",o=":",n-=2),""+r+la("-",Math.max(n,3))+o}(t.textContent,t.attrs.align);a+="| "+e+" "})),t.write(a+"|"),t.ensureNewLine()},tableBody:function(t,e){var n=e.node;t.convertNode(n)},tableRow:function(t,e){var n=e.node;t.convertNode(n),t.write("|"),t.ensureNewLine()},tableHeadCell:function(t,e,n){var r=e.node,o=n.delim,i=void 0===o?"| ":o;t.write(i),t.convertTableCell(r),t.write(" ")},tableBodyCell:function(t,e,n){var r=e.node,o=n.delim,i=void 0===o?"| ":o;t.write(i),t.convertTableCell(r),t.write(" ")},customBlock:function(t,e,n){var r=e.node,o=n.delim,i=n.text,a=o,s=a[0],u=a[1];t.write(s),t.ensureNewLine(),t.text(i,!1),t.ensureNewLine(),t.write(u),t.closeBlock(r)},frontMatter:function(t,e,n){var r=e.node,o=n.text;t.text(o,!1),t.closeBlock(r)},widget:function(t,e,n){var r=n.text;t.write(r)},html:function(t,e,n){var r=n.text;t.write(r)}};function Sd(t,e){var n=t.text,r=/`+/g,o=0;if(t.isText&&n)for(var i=r.exec(n);i;)o=Math.max(o,i[0].length),i=r.exec(n);for(var a=o>0&&e>0?" `":"`",s=0;s<o;s+=1)a+="`";return o>0&&e<0&&(a+=" "),a}function Od(t){return t?["<"+t+">","</"+t+">"]:null}function Nd(t){return t?"<"+t+">":null}function Ld(t){return t?"</"+t+">":null}var Id={heading:function(t){var e=t.node.attrs,n=e.level,r=la("#",n);return"setext"===e.headingType&&(r=1===n?"===":"---"),{delim:r,rawHTML:Od(e.rawHTML)}},codeBlock:function(t){var e=t.node,n=e.attrs,r=e.textContent;return{delim:["```"+(n.language||""),"```"],rawHTML:Od(n.rawHTML),text:r}},blockQuote:function(t){return{delim:"> ",rawHTML:Od(t.node.attrs.rawHTML)}},bulletList:function(t,e){var n=t.node,r=e.inTable,o=n.attrs.rawHTML;return r&&(o=o||"ul"),{delim:"*",rawHTML:Od(o)}},orderedList:function(t,e){var n=t.node,r=e.inTable,o=n.attrs.rawHTML;return r&&(o=o||"ol"),{rawHTML:Od(o)}},listItem:function(t,e){var n=t.node,r=e.inTable,o=n.attrs,i=o.task,a=o.checked,s=n.attrs.rawHTML;return r&&(s=s||"li"),{rawHTML:s?["<"+s+(i?' class="task-list-item'+(a?" checked":"")+'"':"")+(i?" data-task"+(a?" data-task-checked":""):"")+">","</"+s+">"]:null}},table:function(t){return{rawHTML:Od(t.node.attrs.rawHTML)}},tableHead:function(t){return{rawHTML:Od(t.node.attrs.rawHTML)}},tableBody:function(t){return{rawHTML:Od(t.node.attrs.rawHTML)}},tableRow:function(t){return{rawHTML:Od(t.node.attrs.rawHTML)}},tableHeadCell:function(t){return{rawHTML:Od(t.node.attrs.rawHTML)}},tableBodyCell:function(t){return{rawHTML:Od(t.node.attrs.rawHTML)}},image:function(t){var e=t.node.attrs,n=ca(e.altText||""),r=ca(e.imageUrl),o=n?' alt="'+n+'"':"";return{rawHTML:e.rawHTML?"<"+e.rawHTML+' src="'+r+'"'+o+">":null,attrs:{altText:n,imageUrl:r}}},thematicBreak:function(t){return{delim:"***",rawHTML:Nd(t.node.attrs.rawHTML)}},customBlock:function(t){var e=t.node,n=e.attrs,r=e.textContent;return{delim:["$$"+n.info,"$$"],text:r}},frontMatter:function(t){return{text:t.node.textContent}},widget:function(t){return{text:t.node.textContent}},strong:function(t,e){var n=t.node,r=e.entering,o=n.attrs.rawHTML;return{delim:"**",rawHTML:r?Nd(o):Ld(o)}},emph:function(t,e){var n=t.node,r=e.entering,o=n.attrs.rawHTML;return{delim:"*",rawHTML:r?Nd(o):Ld(o)}},strike:function(t,e){var n=t.node,r=e.entering,o=n.attrs.rawHTML;return{delim:"~~",rawHTML:r?Nd(o):Ld(o)}},link:function(t,e){var n,r,o=t.node,i=e.entering,a=o.attrs,s=ca(a.linkUrl),u=a.rawHTML;return i?{delim:"[",rawHTML:u?"<"+u+' href="'+s+'">':null}:{delim:"]("+(a.title?" "+(n=a.linkText,(r=-1===n.indexOf('"')?'""':-1===n.indexOf("'")?"''":"()")[0]+n+r[1]):"")+s+")",rawHTML:Ld(u)}},code:function(t,e){var n=t.node,r=t.parent,o=t.index,i=void 0===o?0:o,a=e.entering;return{delim:a?Sd(r.child(i),-1):Sd(r.child(i-1),1),rawHTML:a?Nd(n.attrs.rawHTML):Ld(n.attrs.rawHTML)}},html:function(t,e){var n=t.node,r=e.entering,o=n.type.name,i=n.attrs.htmlAttrs,a="<"+o,s="</"+o+">";return Object.keys(i).forEach((function(t){a+=" "+t+'="'+i[t]+'"'})),a+=">",n.attrs.htmlInline?{rawHTML:r?a:s}:{text:""+a+n.attrs.childrenHTML+s}}},_d={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function Fd(t){var e={};return Object.keys(Ad).forEach((function(n){e[n]=function(e,r){if(Ad[n]){var o=t[n],i=o?o(r,{inTable:e.inTable}):{};!function(t,e){var n=e.state,r=e.nodeInfo,o=e.params,i=o.rawHTML;i?Gi(t,["heading","codeBlock"])>-1?function(t,e,n){var r=n[0],o=n[1];t.write(r),t.convertInline(e),t.write(o)}(n,r.node,i):Gi(t,["image","thematicBreak"])>-1?n.write(i):function(t,e,n){var r=e.node,o=e.parent,i=n[0],a=n[1];t.stopNewline=!0,t.write(i),t.convertNode(r),t.write(a),"doc"===(null==o?void 0:o.type.name)&&(t.closeBlock(r),t.stopNewline=!1)}(n,r,i):Ad[t](n,r,o)}(n,{state:e,nodeInfo:r,params:i})}}})),e}function Bd(t){return Object.keys(t).forEach((function(e){var n=Id[e],r=t[e];Id[e]=n?function(t,e){return e.origin=function(){return n(t,e)},r(t,e)}:r,delete t[e]})),{nodeTypeConvertors:Fd(Id),markTypeConvertors:function(t){var e={};return Object.keys(_d).forEach((function(n){e[n]=function(e,r){var o=_d[n],i=t[n],a=i&&e&&!Xi(r)?i(e,{entering:r}):{};return ji(ji({},a),o)}})),e}(Id)}}var Rd=function(){function t(t){var e=t.nodeTypeConvertors,n=t.markTypeConvertors;this.nodeTypeConvertors=e,this.markTypeConvertors=n,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return t.prototype.getMarkConvertor=function(t){var e=t.attrs.htmlInline?"html":t.type.name;return this.markTypeConvertors[e]},t.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},t.prototype.markText=function(t,e,n,r){var o=this.getMarkConvertor(t);if(o){var i=o({node:t,parent:n,index:r},e),a=i.delim;return i.rawHTML||a}return""},t.prototype.flushClose=function(t){if(!this.stopNewline&&this.closed){if(this.isInBlank()||(this.result+="\n"),t||(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var r=1;r<t;r+=1)this.result+=e+"\n"}this.closed=!1}},t.prototype.wrapBlock=function(t,e,n,r){var o=this.delim;this.write(e||t),this.delim+=t,r(),this.delim=o,this.closeBlock(n)},t.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+="\n")},t.prototype.write=function(t){void 0===t&&(t=""),this.flushClose(),this.delim&&this.isInBlank()&&(this.result+=this.delim),t&&(this.result+=t)},t.prototype.closeBlock=function(t){this.closed=t},t.prototype.text=function(t,e){for(var n=t.split("\n"),r=0;r<n.length;r+=1){var o=this.isInBlank()||!!this.closed;this.write(),this.result+=!1!==e?ca(n[r],o):n[r],r!==n.length-1&&(this.result+="\n")}},t.prototype.convertBlock=function(t,e,n){var r=t.type.name,o=this.nodeTypeConvertors[r],i={node:t,parent:e,index:n};t.attrs.htmlBlock?this.nodeTypeConvertors.html(this,i):o&&o(this,i)},t.prototype.convertInline=function(t){var e=this,n=[],r="",o=function(o,i,a){var s=o?o.marks:[],u=r;if(r="",o&&o.isText&&s.some((function(t){var n=e.getMarkConvertor(t),r=n&&n();return r&&r.removedEnclosingWhitespace}))&&o&&o.text){var l=/^(\s*)(.*?)(\s*)$/m.exec(o.text),c=l[1],p=l[2],f=l[3];u+=c,r=f,(c||f)&&((o=p?o.withText(p):null)||(s=n))}for(var h=s.length&&ha(s),d=h&&e.getMarkConvertor(h),m=d&&d(),v=m&&!1===m.escape,g=s.length-(v?1:0),y=0;y<g;y+=1){p=s[y];if(m&&!m.mixable)break;for(var b=0;b<n.length;b+=1){var w=n[b];if(m&&!m.mixable)break;if(p.eq(w)){y>b?s=s.slice(0,b).concat(p).concat(s.slice(b,y)).concat(s.slice(y+1,g)):b>y&&(s=s.slice(0,y).concat(s.slice(y+1,b)).concat(p).concat(s.slice(b,g)));break}}}for(var k=0;k<Math.min(n.length,g)&&s[k].eq(n[k]);)k+=1;for(;k<n.length;){var x=n.pop();x&&e.text(e.markText(x,!1,t,a),!1)}if(u&&e.text(u),o){for(;n.length<g;){p=s[n.length];n.push(p),e.text(e.markText(p,!0,t,a),!1)}v&&o.isText?e.text(e.markText(h,!0,t,a)+o.text+e.markText(h,!1,t,a+1),!1):e.convertBlock(o,t,a)}};t.forEach(o),o(null,0,t.childCount)},t.prototype.convertList=function(t,e,n){var r,o=this;this.closed&&this.closed.type===t.type?this.flushClose(3):this.tightList&&this.flushClose(1);var i=null===(r=t.attrs.tight)||void 0===r||r,a=this.tightList;this.tightList=i,t.forEach((function(r,a,s){s&&i&&o.flushClose(1),o.wrapBlock(e,n(s),t,(function(){return o.convertBlock(r,t,s)}))})),this.tightList=a},t.prototype.convertTableCell=function(t){var e=this;this.stopNewline=!0,this.inTable=!0,t.forEach((function(n,r,o){aa(["bulletList","orderedList"],n.type.name)?(e.convertBlock(n,t,o),e.closed=!1):(e.convertInline(n),o<t.childCount-1&&"paragraph"===t.child(o+1).type.name&&e.write("<br>"))})),this.stopNewline=!1,this.inTable=!1},t.prototype.convertNode=function(t,e){var n=this;return t.forEach((function(r,o,i){if(n.convertBlock(r,t,i),(null==e?void 0:e.node)===r){var a=n.result.split("\n");e.setMappedPos([a.length,ha(a).length+1])}})),this.result},t}(),Pd=function(){function t(t,e,n,r){var o=this;this.setMappedPos=function(t){o.mappedPosWhenConverting=t},this.schema=t,this.eventEmitter=r,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=function(t){var e=Object.keys(t),n=ji({},Td),r=new jp({gfm:!0,nodeId:!0,convertors:t}).getConvertors();return e.forEach((function(e){var o=Td[e];o&&!aa(["htmlBlock","htmlInline"],e)&&(n[e]=function(n,i,a){a.origin=function(){return r[e](i,a)};var s,u=t[e](i,a);if(u){var l=Array.isArray(u)?u[0]:u;s={htmlAttrs:l.attributes,classNames:l.classNames}}o(n,i,a,s)})})),n}(n),this.toMdConvertors=Bd(e||{}),this.eventEmitter.listen("setFocusedNode",(function(t){return o.focusedNode=t}))}return t.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},t.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},t.prototype.toWysiwygModel=function(t){return new Md(this.schema,this.toWwConvertors).convertNode(t,this.getInfoForPosSync())},t.prototype.toMarkdownText=function(t){var e=new Rd(this.toMdConvertors).convertNode(t,this.getInfoForPosSync());return e=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",e)},t}();function zd(t,e,n){return e.listen("mixinTableOffsetMapPrototype",Kf),(null!=t?t:[]).reduce((function(t,r){var o=function(t,e,n){var r={eventEmitter:e,usageStatistics:n,pmState:{Plugin:ze,Selection:be,TextSelection:xe},pmView:{Decoration:mo,DecorationSet:bo},pmModel:{Fragment:T},i18n:lh};if(Wi(t)){var o=t[0],i=t[1];return o(r,void 0===i?{}:i)}return t(r)}(r,e,n);if(!o)throw new Error("The return value of the executed plugin is empty.");var i=o.markdownParsers,a=o.toHTMLRenderers,s=o.toMarkdownRenderers,u=o.markdownPlugins,l=o.wysiwygPlugins,c=o.wysiwygNodeViews,p=o.markdownCommands,f=o.wysiwygCommands,h=o.toolbarItems;return a&&(t.toHTMLRenderers=ma(t.toHTMLRenderers,a)),s&&(t.toMarkdownRenderers=ma(t.toMarkdownRenderers,s)),u&&(t.mdPlugins=t.mdPlugins.concat(u)),l&&(t.wwPlugins=t.wwPlugins.concat(l)),c&&(t.wwNodeViews=ji(ji({},t.wwNodeViews),c)),p&&(t.mdCommands=ji(ji({},t.mdCommands),p)),f&&(t.wwCommands=ji(ji({},t.wwCommands),f)),h&&(t.toolbarItems=t.toolbarItems.concat(h)),i&&(t.markdownParsers=ji(ji({},t.markdownParsers),i)),t}),{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var jd=function(){function t(t){var e=this;this.options=Vi({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},t),this.eventEmitter=new xd;var n=ua(this.options.linkAttributes),r=zd(this.options.plugins,this.eventEmitter,this.options.usageStatistics)||{},o=r.toHTMLRenderers,i=r.markdownParsers,a=this.options,s=a.customHTMLRenderer,u=a.extendedAutolinks,l=a.referenceDefinition,c=a.frontMatter,p=a.customHTMLSanitizer,f={linkAttributes:n,customHTMLRenderer:ji(ji({},o),s),extendedAutolinks:u,referenceDefinition:l,frontMatter:c,sanitizer:p||Zp};this.options.events&&qi(this.options.events,(function(t,n){e.on(n,t)}));var h=this.options,d=h.el,m=h.initialValue,v=h.theme,g=d.innerHTML;"light"!==v&&d.classList.add(gs(v)),d.innerHTML="",this.toastMark=new Ip("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:u,referenceDefinition:l,disallowDeepHeading:!0,frontMatter:c,customParser:i}),this.preview=new Sf(this.eventEmitter,ji(ji({},f),{isViewer:!0})),cl(this.preview.el,"mousedown",this.toggleTask.bind(this)),m?this.setMarkdown(m):g&&this.preview.setHTML(g),d.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return t.prototype.toggleTask=function(t){var e=t.target,n=getComputedStyle(e,":before");!e.hasAttribute("data-task-disabled")&&e.hasAttribute("data-task")&&vs(n,t.offsetX,t.offsetY)&&xs(e,"checked")},t.prototype.setMarkdown=function(t){var e=this.toastMark.getLineTexts(),n=[e.length,ha(e).length+1],r=this.toastMark.editMarkdown([1,1],n,t||"");this.eventEmitter.emit("updatePreview",r)},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.destroy=function(){ul(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},t.prototype.isViewer=function(){return!0},t.prototype.isMarkdownMode=function(){return!1},t.prototype.isWysiwygMode=function(){return!1},t}();function Hd(t){return t instanceof tt}function $d(t){return aa(["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"],t)}var qd={openTag:function(t,e){var n=t,r=n.tagName,o=n.classNames,i=n.attributes,a=document.createElement(r),s={};o&&(a.className=o.join(" ")),i&&(s=ji(ji({},s),i)),Ms(s,a),e.push(a)},closeTag:function(t,e){if(e.length>1){var n=e.pop();ha(e).appendChild(n)}},html:function(t,e){ha(e).insertAdjacentHTML("beforeend",t.content)},text:function(t,e){var n=document.createTextNode(t.content);ha(e).appendChild(n)}},Vd=function(){function t(t,e){var n=vf(t,e),r=ji(ji({},e.htmlBlock),e.htmlInline);this.customConvertorKeys=Object.keys(e).concat(Object.keys(r)),this.renderer=new jp({gfm:!0,convertors:ji(ji({},n),r)}),this.convertors=this.renderer.getConvertors()}return t.prototype.generateTokens=function(t){var e=function(t){var e=t.attrs,n=t.type.name,r={type:n,wysiwygNode:!0,literal:!$d(n)&&Hd(t)?t.textContent:null},o={heading:{level:e.level},link:{destination:e.linkUrl,title:e.linkText},image:{destination:e.imageUrl},codeBlock:{info:e.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:e.order}},listItem:{type:"item",listData:{task:e.task,checked:e.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:e.align},tableBodyCell:{type:"tableCell",cellType:"body",align:e.align},customBlock:{info:e.info}}[n],i=ji(ji({},r),o),a=t.attrs,s=a.htmlAttrs,u=a.childrenHTML;return s?ji(ji({},i),{attrs:s,childrenHTML:u}):i}(t),n={entering:!0,leaf:!!Hd(t)&&t.isLeaf,options:this.renderer.getOptions(),getChildrenText:function(){return Hd(t)?t.textContent:""},skipChildren:function(){return!1}},r=this.convertors[t.type.name],o=r(e,n,this.convertors),i=Wi(o)?o:[o];return($d(t.type.name)||t.attrs.htmlInline)&&(n.entering=!1,i.push({type:"text",content:Hd(t)?t.textContent:""}),i=i.concat(r(e,n,this.convertors))),i},t.prototype.toDOMNode=function(t){var e=this.generateTokens(t),n=[];return e.forEach((function(t){return qd[t.type](t,n)})),n[0]},t.prototype.getToDOMNode=function(t){return aa(this.customConvertorKeys,t)?this.toDOMNode.bind(this):null},t}(),Ud=null,Wd=null;function Jd(t,e){var n=e.syncScrollTop,r=e.releaseEventBlock;Wd&&clearTimeout(Wd),n(t),Wd=setTimeout((function(){r()}),15)}var Kd=function(){function t(t,e,n){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0;var r=e.previewContent,o=e.el;this.previewRoot=r,this.previewEl=o,this.mdEditor=t,this.editorView=t.view,this.toastMark=t.getToastMark(),this.eventEmitter=n,this.addScrollSyncEvent()}return t.prototype.addScrollSyncEvent=function(){var t=this;this.eventEmitter.listen("afterPreviewRender",(function(){setTimeout((function(){t.syncPreviewScrollTop(!0)}),200)})),this.eventEmitter.listen("scroll",(function(e,n){t.active&&("editor"===e&&"editor"!==t.blockedScroll?t.syncPreviewScrollTop():"preview"===e&&"preview"!==t.blockedScroll&&t.syncEditorScrollTop(n))})),this.eventEmitter.listen("toggleScrollSync",(function(e){t.active=e}))},t.prototype.getMdNodeAtPos=function(t,e){var n=t.content.findIndex(e.pos).index;return this.toastMark.findFirstNodeAtLine(n+1)},t.prototype.getScrollTopByCaretPos=function(){var t=this.mdEditor.getSelection(),e=this.toastMark.findFirstNodeAtLine(t[0][0]),n=this.previewEl.clientHeight,r=Df(e).el,o=(xf(r,this.previewRoot)||r.offsetTop)+r.clientHeight-.5*n;return this.latestEditorScrollTop=null,r.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top<n?null:o},t.prototype.syncPreviewScrollTop=function(t){void 0===t&&(t=!1);var e=this,n=e.editorView,r=e.previewEl,o=e.previewRoot,i=n.dom.getBoundingClientRect(),a=i.left,s=i.top,u=n.posAtCoords({left:a,top:s}),l=n.state.doc,c=this.getMdNodeAtPos(l,u);if(c&&!function(t){var e=t.type;return"htmlBlock"===e||"htmlInline"===e}(c)){var p=r.scrollTop,f=n.dom,h=f.scrollTop,d=f.scrollHeight,m=f.clientHeight,v=f.children,g=d-h<=m+18,y=g?r.scrollHeight:0;if(h&&!g){if(t){var b=this.getScrollTopByCaretPos();if(!b)return;y=b}else{var w=Df(c),k=w.el,x=wf(l,w.mdNode,v),C=x.height,D=x.rect;y=(xf(k,o)||k.offsetTop)+k.clientHeight*(s>D.top?Math.min((s-D.top)/C,1):0)}y=this.getResolvedScrollTop("editor",h,y,p),this.latestEditorScrollTop=h}y!==p&&this.run("editor",y,p)}},t.prototype.syncEditorScrollTop=function(t){var e=this,n=e.toastMark,r=e.editorView,o=e.previewRoot,i=e.previewEl,a=r.dom,s=r.state,u=i.scrollTop,l=i.clientHeight,c=i.scrollHeight-u<=l,p=a.scrollTop,f=c?a.scrollHeight:0;if(u&&t&&!c){if(!(t=function(t,e){for(;!t.getAttribute("data-nodeid")&&t.parentElement!==e;)t=t.parentElement;return t}(t,o)).getAttribute("data-nodeid"))return;var h=a.children,d=Number(t.getAttribute("data-nodeid")),m=Df(n.findNodeById(d)),v=m.mdNode,g=m.el;f=h[Ta(v)-1].offsetTop;var y=wf(s.doc,v,h).height,b=Mf(g,o,d),w=b.nodeHeight;f+=function(t,e,n,r){return Math.min((t-e)/n,1)*r}(u,b.offsetTop,w,y),f=this.getResolvedScrollTop("preview",u,f,p),this.latestPreviewScrollTop=u}f!==p&&this.run("preview",f,p)},t.prototype.getResolvedScrollTop=function(t,e,n,r){var o="editor"===t?this.latestEditorScrollTop:this.latestPreviewScrollTop;return null===o?n:o<e?Math.max(n,r):Math.min(n,r)},t.prototype.run=function(t,e,n){var r,o=this;"editor"===t?(r=this.previewEl,this.blockedScroll="preview"):(r=this.editorView.dom,this.blockedScroll="editor"),function(t,e,n){var r=e-t,o=Date.now(),i=function(){var a,s=(Date.now()-o)/100;Ud&&clearTimeout(Ud),s<1?(a=t+r*Math.cos((1-s)*Math.PI/2),Jd(Math.ceil(a),n),Ud=setTimeout(i,1)):(Jd(e,n),Ud=null)};i()}(n,e,{syncScrollTop:function(t){return r.scrollTop=t},releaseEventBlock:function(){return o.blockedScroll=null}})},t.prototype.destroy=function(){this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},t}(),Zd=function(){function t(t){var e=this;this.initialHtml=t.el.innerHTML,t.el.innerHTML="",this.options=Vi({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light"},t);var n=this.options,r=n.customHTMLRenderer,o=n.extendedAutolinks,i=n.referenceDefinition,a=n.frontMatter,s=n.customMarkdownRenderer,u=n.useCommandShortcut,l=n.initialEditType,c=n.widgetRules,p=n.customHTMLSanitizer;this.mode=l||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.eventEmitter=new xd,(Ha=c).forEach((function(t,e){$a["widget"+e]=t}));var f=ua(this.options.linkAttributes);this.pluginInfo=zd(this.options.plugins,this.eventEmitter,this.options.usageStatistics);var h=this.pluginInfo,d=h.toHTMLRenderers,m=h.toMarkdownRenderers,v=h.mdPlugins,g=h.wwPlugins,y=h.wwNodeViews,b=h.mdCommands,w=h.wwCommands,k=h.markdownParsers,x={linkAttributes:f,customHTMLRenderer:ma(d,r),extendedAutolinks:o,referenceDefinition:i,frontMatter:a,sanitizer:p||Zp},C=new Vd(f,x.customHTMLRenderer);this.options.hooks&&qi(this.options.hooks,(function(t,n){return e.addHook(n,t)})),this.options.events&&qi(this.options.events,(function(t,n){return e.on(n,t)}));var D=hf(x.customHTMLRenderer,x.sanitizer,C);this.i18n=lh,this.i18n.setCode(this.options.language),this.toastMark=new Ip("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:o,referenceDefinition:i,disallowDeepHeading:!0,frontMatter:a,customParser:k}),this.mdEditor=new ol(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:u,mdPlugins:v}),this.preview=new Sf(this.eventEmitter,ji(ji({},x),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new gd(this.eventEmitter,{toDOMAdaptor:C,useCommandShortcut:u,htmlSchemaMap:D,linkAttributes:f,wwPlugins:g,wwNodeViews:y}),this.convertor=new Pd(this.wwEditor.getSchema(),ji(ji({},m),s),vf(f,x.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHTML(this.initialHtml,!1),this.commandManager=new Cd(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,(function(){return e.mode})),this.options.usageStatistics&&ia("editor","UA-129966929-1"),this.scrollSync=new Kd(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(b,w),this.eventEmitter.emit("load",this),this.moveCursorToStart()}return t.prototype.addInitEvent=function(){this.on("needChangeMode",this.changeMode.bind(this)),this.eventEmitter.listen("addImageBlobHook",(function(t,e){var n=new FileReader;n.onload=function(t){var n=t.target;return e(n.result)},n.readAsDataURL(t)}))},t.prototype.addInitCommand=function(t,e){var n=this,r=function(t,e){Object.keys(e).forEach((function(r){n.addCommand(t,r,e[r])}))};this.addCommand("markdown","toggleScrollSync",(function(t){return n.eventEmitter.emit("toggleScrollSync",t.active),!0})),r("markdown",t),r("wysiwyg",e)},t.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},t.factory=function(e){return e.viewer?new jd(e):new t(e)},t.setLanguage=function(t,e){lh.setLanguage(t,e)},t.prototype.changePreviewStyle=function(t){this.mdPreviewStyle!==t&&(this.mdPreviewStyle=t,this.eventEmitter.emit("changePreviewStyle",t))},t.prototype.exec=function(t,e){this.commandManager.exec(t,e)},t.prototype.addCommand=function(t,e,n){var r=this;this.commandManager.addCommand(t,e,(function(e){void 0===e&&(e={});var o=("markdown"===t?r.mdEditor:r.wwEditor).view;n(e,o.state,o.dispatch,o)}))},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.removeHook=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.focus=function(){this.getCurrentModeEditor().focus()},t.prototype.blur=function(){this.getCurrentModeEditor().blur()},t.prototype.moveCursorToEnd=function(){this.getCurrentModeEditor().moveCursorToEnd()},t.prototype.moveCursorToStart=function(){this.getCurrentModeEditor().moveCursorToStart()},t.prototype.setMarkdown=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e=!0),this.mdEditor.setMarkdown(t,e),this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r,e)}},t.prototype.setHTML=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var n=document.createElement("div");n.innerHTML=t;var r=Et.fromSchema(this.wwEditor.schema).parse(n);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(r),e):this.wwEditor.setModel(r,e)},t.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())},t.prototype.getHTML=function(){this.isWysiwygMode()&&this.mdEditor.setMarkdown(this.convertor.toMarkdownText(this.wwEditor.getModel()));var t=this.toastMark.getRootNode();return this.preview.getRenderer().render(t).replace(/\sdata-nodeid="\d{1,}"/g,"").trim()},t.prototype.insertText=function(t){this.getCurrentModeEditor().replaceSelection(t)},t.prototype.setSelection=function(t,e){this.getCurrentModeEditor().setSelection(t,e)},t.prototype.replaceSelection=function(t,e,n){this.getCurrentModeEditor().replaceSelection(t,e,n)},t.prototype.deleteSelection=function(t,e){this.getCurrentModeEditor().deleteSelection(t,e)},t.prototype.getSelectedText=function(t,e){return this.getCurrentModeEditor().getSelectedText(t,e)},t.prototype.getRangeInfoOfNode=function(t){return this.getCurrentModeEditor().getRangeInfoOfNode(t)},t.prototype.addWidget=function(t,e,n){this.getCurrentModeEditor().addWidget(t,e,n)},t.prototype.replaceWithWidget=function(t,e,n){this.getCurrentModeEditor().replaceWithWidget(t,e,n)},t.prototype.setHeight=function(t){var e=this.options.el;Ui(t)&&("auto"===t?(ta(e,"auto-height"),this.setMinHeight(this.getMinHeight())):(ea(e,"auto-height"),this.setMinHeight(t))),Zi(e,{height:t}),this.height=t},t.prototype.getHeight=function(){return this.height},t.prototype.setMinHeight=function(t){var e;this.minHeight=t;var n=this.options.el.clientHeight-((null===(e=document.querySelector("."+gs("main")))||void 0===e?void 0:e.clientHeight)||0),r=parseInt(t,10);r=Math.max(r-n,0),this.wwEditor.setMinHeight(r),this.mdEditor.setMinHeight(r),this.preview.setMinHeight(r)},t.prototype.getMinHeight=function(){return this.minHeight},t.prototype.isMarkdownMode=function(){return"markdown"===this.mode},t.prototype.isWysiwygMode=function(){return"wysiwyg"===this.mode},t.prototype.isViewer=function(){return!1},t.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},t.prototype.changeMode=function(t,e){if(this.mode!==t){if(this.mode=t,this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r)}else{r=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(r),!e)}if(this.eventEmitter.emit("changeMode",t),!e){var o=this.convertor.getMappedPos();this.focus(),this.isWysiwygMode()&&na(o)?this.wwEditor.setSelection(o):Array.isArray(o)&&this.mdEditor.setSelection(o)}}},t.prototype.destroy=function(){var t=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach((function(e,n){return t.off(n)}))},t.prototype.hide=function(){this.eventEmitter.emit("hide")},t.prototype.show=function(){this.eventEmitter.emit("show")},t.prototype.setScrollTop=function(t){this.getCurrentModeEditor().setScrollTop(t)},t.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},t.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},t.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},t.prototype.setPlaceholder=function(t){this.mdEditor.setPlaceholder(t),this.wwEditor.setPlaceholder(t)},t.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},t}();var Gd=function(t){return"boolean"==typeof t||t instanceof Boolean},Xd=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.walk=function(){var t=this.entering,e=this.current;return e?(t?e.firstChild?(this.current=e.firstChild,this.entering=!0):this.entering=!1:e===this.root?this.current=null:e.next?(this.current=e.next,this.entering=!0):(this.current=e.parent,this.entering=!1),{vnode:e,entering:t}):null},t}(),Qd=function(){function t(t,e,n){this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=t,this.props=e,this.children=n,this.props.children=n,e.ref&&(this.ref=e.ref,delete e.ref),e.key&&(this.key=e.key,delete e.key)}return t.prototype.walker=function(){return new Xd(this)},t.removalNodes=[],t}();function Yd(t,e){var n,r=t;Gd(t)||null==t?r=null:(Ui(t)||na(t))&&(n=String(t),r=new Qd("TEXT_NODE",{nodeValue:n},[])),r&&e.push(r)}var tm=function(t){for(var e,n,r=arguments,o=1,i="",a="",s=[0],u=function(t){1===o&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(t?r[t]:i):3===o&&(t||i)?(s[1]=t?r[t]:i,o=2):2===o&&"..."===i&&t?s[2]=ya(s[2]||{},r[t]):2===o&&i&&!t?(s[2]=s[2]||{})[i]=!0:o>=5&&(5===o?((s[2]=s[2]||{})[n]=t?i?i+r[t]:r[t]:i,o=6):(t||i)&&(s[2][n]+=t?i+r[t]:i)),i=""},l=0;l<t.length;l++){l&&(1===o&&u(),u(l));for(let r=0;r<t[l].length;r++)e=t[l][r],1===o?"<"===e?(u(),s=[s,"",null],o=3):i+=e:4===o?"--"===i&&">"===e?(o=1,i=""):i=e+i[0]:a?e===a?a="":i+=e:'"'===e||"'"===e?a=e:">"===e?(u(),o=1):o&&("="===e?(o=5,n=i,i=""):"/"===e&&(o<5||">"===t[l][r+1])?(u(),3===o&&(s=s[0]),o=s,(s=s[0]).push(this.apply(null,o.slice(1))),o=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(u(),o=2):i+=e),3===o&&"!--"===i&&(o=4,s=s[0])}return u(),s.length>2?s.slice(1):s[1]}.bind((function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[];return n.forEach((function(t){Array.isArray(t)?t.forEach((function(t){Yd(t,o)})):Yd(t,o)})),new Qd(t,e||{},o)}));var em=function(t){return t===Object(t)};function nm(t){var e;return"TEXT_NODE"===t.type?e=document.createTextNode(t.props.nodeValue):am(e=document.createElement(t.type),{},t.props),e}function rm(t,e){t.node?e.removeChild(t.node):rm(t.firstChild,e)}function om(t,e,n){Object.keys(e).forEach((function(r){if(/^on/.test(r)){if(!n[r]||e[r]!==n[r]){var o=r.slice(2).toLowerCase();t.removeEventListener(o,e[r])}}else"children"===r||n[r]||function(t){return(null==t?void 0:t.nodeType)===Node.TEXT_NODE}(t)||t.removeAttribute(r)})),am(t,e,n,(function(t){return!fa(e[t],n[t])}))}var im=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function am(t,e,n,r){Object.keys(n).forEach((function(o){if(!r||r(o))if(/^on/.test(o)){var i=o.slice(2).toLowerCase();t.addEventListener(i,n[o])}else"nodeValue"===o?t[o]=n[o]:"style"===o&&em(n[o])?function(t,e,n){e&&Object.keys(e).forEach((function(e){t.style[e]=""}));Object.keys(n).forEach((function(e){var r=n[e];t.style[e]=na(r)&&!im.test(e)?r+"px":r}))}(t,e[o],n[o]):"children"!==o&&(!1===n[o]?t.removeAttribute(o):t.setAttribute(o,n[o]))}))}function sm(t){if(Qd.removalNodes.forEach((function(t){return lm(t)})),t)for(var e=void 0,n=t.walker();e=n.walk();)if(t=e.vnode,e.entering)lm(t);else if(ls(t.type)){var r=t.component;if(!t.old&&r.mounted&&r.mounted(),t.old&&r.updated){var o=r.prevProps||{};r.updated(o)}}}function um(t){for(var e=t.parent;!e.node;)e=e.parent;return e.node}function lm(t){if(t&&t.parent){if(t.node){var e=um(t);"A"===t.effect?e.appendChild(t.node):"U"===t.effect&&om(t.node,t.old.props,t.props)}if("D"===t.effect)for(var n=void 0,r=t.walker();n=r.walk();)if(t=n.vnode,!n.entering)if(ls(t.type)){var o=t.component;o.beforeDestroy&&o.beforeDestroy()}else{rm(t,e=um(t))}t.ref&&(t.component?t.ref(t.component):t.node&&t.ref(t.node))}}function cm(t,e){var n=e.props,r=e.component;return r?(r.prevProps=r.props,r.props=e.props,r):new t(n)}function pm(t){for(var e=t;t&&!t.skip;){if(ls(t.type)){var n=cm(t.type,t);n.vnode=t,t.component=n,t.props.children=t.children=[n.render()],fm(t)}else t.node||(t.node=nm(t)),fm(t);if(t.firstChild)t=t.firstChild;else{for(;t&&t.parent&&!t.next&&(t=t.parent)!==e;);t=t.next}}}function fm(t){var e=t.children,n=t.old?t.old.firstChild:null,r=null;e.forEach((function(e,o){var i=function(t,e){return t&&e&&e.type===t.type&&(!e.key||e.key===t.key)}(n,e);i&&(e.old=n,e.parent=t,e.node=n.node,e.component=n.component,e.effect="U"),e&&!i&&(e.old=null,e.parent=t,e.node=null,e.effect="A"),n&&!i&&(Qd.removalNodes.push(n),n.effect="D"),n&&(n=n.next),0===o?t.firstChild=e:e&&(r.next=e),r=e}));var o=ha(e);if(!e.length)for(;n;)Qd.removalNodes.push(n),n.effect="D",n=n.next;for(;n&&o;)n&&o.old!==n&&(Qd.removalNodes.push(n),n.effect="D",n=n.next)}function hm(t,e){var n=new Qd(t.tagName.toLowerCase(),{},[e]);return n.node=t,Qd.removalNodes=[],pm(n),sm(n),function(){return function(t){t.effect="D",Qd.removalNodes=[t],sm(),Qd.removalNodes=[]}(n.firstChild)}}var dm,mm=function(){function t(t){this.props=t,this.state={},this.refs={}}return t.prototype.setState=function(t){var e,n=ji(ji({},this.state),t);fa(this.state,n)||(this.state=n,(e=this.vnode).effect="U",e.old=e,e.next&&(e.next.skip=!0),Qd.removalNodes=[],pm(e),sm(e),e.next&&(e.next.skip=!1))},t}(),vm=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hide:!1},n}return zi(e,t),e.prototype.show=function(){this.setState({hide:!1})},e.prototype.hide=function(){this.setState({hide:!0})},e.prototype.render=function(){var t=this.props,e=t.editorType,n=t.eventEmitter;return tm(dm||(dm=$i(['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "])),gs("mode-switch"),this.state.hide?"none":"block","markdown"===e?" active":"",(function(){n.emit("needChangeMode","markdown")}),lh.get("Markdown"),"wysiwyg"===e?" active":"",(function(){n.emit("needChangeMode","wysiwyg")}),lh.get("WYSIWYG"))},e}(mm);var gm=function(t,e){var n,r;return e=e||0,function(){r=Array.prototype.slice.call(arguments),window.clearTimeout(n),n=window.setTimeout((function(){t.apply(null,r)}),e)}};var ym,bm,wm,km,xm,Cm,Dm,Em,Tm,Mm,Am,Sm,Om,Nm,Lm,Im,_m=function(t,e){var n,r,o,i,a=!0,s=function(e){t.apply(null,e),n=null};function u(){if(i=Array.prototype.slice.call(arguments),a)return s(i),void(a=!1);o=Number(new Date),n=n||o,r(i),o-n>=e&&s(i)}return r=gm(s,e=e||0),u.reset=function(){a=!0,n=null},u},Fm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),e.prototype.execCommand=function(t){var e=Es(t.target,"li");this.props.execCommand("heading",{level:Number(e.getAttribute("data-level"))})},e.prototype.render=function(){var t=this;return tm(bm||(bm=$i(["\n      <ul onClick=",">\n        ",'\n        <li data-type="Paragraph"><div>',"</div></li>\n      </ul>\n    "],["\n      <ul onClick=",">\n        ",'\n        <li data-type="Paragraph"><div>',"</div></li>\n      </ul>\n    "])),(function(e){return t.execCommand(e)}),[1,2,3,4,5,6].map((function(t){return tm(ym||(ym=$i(['\n              <li data-level="','" data-type="Heading">\n                <',">"," ","</$>\n              </li>\n            "],['\n              <li data-level="','" data-type="Heading">\n                <',">"," ","</$>\n              </li>\n            "])),t,"h"+t,lh.get("Heading"),t)})),lh.get("Paragraph"))},e}(mm),Bm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),e.prototype.toggleTab=function(t,e){this.props.onClick(t,e)},e.prototype.render=function(){var t=this;return tm(km||(km=$i(['\n      <div class="','">\n        ',"\n      </div>\n    "],['\n      <div class="','">\n        ',"\n      </div>\n    "])),gs("tabs"),this.props.tabs.map((function(e){var n=e.name,r=e.text;return tm(wm||(wm=$i(['\n            <div\n              class="tab-item','"\n              onClick=',"\n            >\n              ","\n            </div>\n          "],['\n            <div\n              class="tab-item','"\n              onClick=',"\n            >\n              ","\n            </div>\n          "])),t.props.activeTab===n?" active":"",(function(e){return t.toggleTab(e,n)}),lh.get(r))})))},e}(mm),Rm=function(t){function e(e){var n=t.call(this,e)||this;return n.initialize=function(t){void 0===t&&(t="file");var e=n.refs.url;e.value="",n.refs.altText.value="",n.refs.file.value="",ea(e,"wrong"),n.setState({activeTab:t,file:null,fileNameElClassName:""})},n.execCommand=function(){"file"===n.state.activeTab?n.emitAddImageBlob():n.emitAddImage()},n.toggleTab=function(t,e){e!==n.state.activeTab&&n.initialize(e)},n.showFileSelectBox=function(){n.refs.file.click()},n.changeFile=function(t){var e=t.target.files;(null==e?void 0:e.length)&&n.setState({file:e[0]})},n.state={activeTab:"file",file:null,fileNameElClassName:""},n.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],n}return zi(e,t),e.prototype.emitAddImageBlob=function(){var t=this,e=this.refs.file.files,n=this.refs.altText,r=" wrong";if(null==e?void 0:e.length){r="";var o=e.item(0);this.props.eventEmitter.emit("addImageBlobHook",o,(function(e,r){return t.props.execCommand("addImage",{imageUrl:e,altText:r||n.value})}),"ui")}this.setState({fileNameElClassName:r})},e.prototype.emitAddImage=function(){var t=this.refs.url,e=this.refs.altText,n=t.value,r=e.value||"image";ea(t,"wrong"),n.length?n&&this.props.execCommand("addImage",{imageUrl:n,altText:r}):ta(t,"wrong")},e.prototype.preventSelectStart=function(t){t.preventDefault()},e.prototype.updated=function(){this.props.show||this.initialize()},e.prototype.render=function(){var t=this,e=this.state,n=e.activeTab,r=e.file,o=e.fileNameElClassName;return tm(xm||(xm=$i(["\n      <div>\n        <"," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button class="','" onClick=',">\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],["\n      <div>\n        <"," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button class="','" onClick=',">\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),Bm,this.tabs,n,this.toggleTab,"url"===n?"block":"none",lh.get("Image URL"),(function(e){return t.refs.url=e}),"file"===n?"block":"none",lh.get("Select image file"),gs("file-name"),r?" has-file":o,this.showFileSelectBox,this.preventSelectStart,r?r.name:lh.get("No file"),gs("file-select-button"),this.showFileSelectBox,lh.get("Choose a file"),this.changeFile,(function(e){return t.refs.file=e}),lh.get("Description"),(function(e){return t.refs.altText=e}),gs("button-container"),gs("close-button"),this.props.hidePopup,lh.get("Cancel"),gs("ok-button"),this.execCommand,lh.get("OK"))},e}(mm),Pm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.execCommand=function(){var t=e.refs.url,n=e.refs.text;(ea(t,"wrong"),ea(n,"wrong"),t.value.length<1)?ta(t,"wrong"):Xi(e.props.initialValues.linkUrl)&&n.value.length<1?ta(n,"wrong"):e.props.execCommand("addLink",{linkUrl:t.value,linkText:n.value})},e}return zi(e,t),e.prototype.initialize=function(){var t=this.props.initialValues,e=t.linkUrl,n=t.linkText,r=this.refs.url,o=this.refs.text;ea(r,"wrong"),ea(o,"wrong","disabled"),o.removeAttribute("disabled"),e&&(ta(o,"disabled"),o.setAttribute("disabled","disabled")),r.value=e||"",o.value=n||""},e.prototype.mounted=function(){this.initialize()},e.prototype.updated=function(t){!t.show&&this.props.show&&this.initialize()},e.prototype.render=function(){var t=this;return tm(Cm||(Cm=$i(['\n      <div>\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div>\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),lh.get("URL"),(function(e){return t.refs.url=e}),lh.get("Link text"),(function(e){return t.refs.text=e}),gs("button-container"),gs("close-button"),this.props.hidePopup,lh.get("Cancel"),gs("ok-button"),this.execCommand,lh.get("OK"))},e}(mm),zm=function(t){function e(e){var n=t.call(this,e)||this;return n.extendSelectionRange=function(t){var e=t.pageX,r=t.pageY,o=e-n.offsetRect.left,i=r-n.offsetRect.top,a=n.getSelectionRangeByOffset(o,i);n.setState(ji({},a))},n.execCommand=function(){n.props.execCommand("addTable",{rowCount:n.state.rowIdx+1,columnCount:n.state.colIdx+1})},n.state={rowIdx:-1,colIdx:-1},n}return zi(e,t),e.prototype.getDescription=function(){return-1===this.state.colIdx?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},e.prototype.getBoundByRange=function(t,e){return{width:20*(t+1),height:20*(e+1)}},e.prototype.getRangeByOffset=function(t,e){return{colIdx:Math.floor(t/20),rowIdx:Math.floor(e/20)}},e.prototype.getTableRange=function(){var t=this.state,e=t.colIdx,n=t.rowIdx,r=Math.max(e,5),o=Math.max(n,5);return e>=5&&r<9&&(r+=1),n>=5&&o<14&&(o+=1),{colIdx:r+1,rowIdx:o+1}},e.prototype.getSelectionAreaBound=function(){var t=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),e=t.width,n=t.height;return e||n?{width:e-1,height:n-1,display:"block"}:{display:"none"}},e.prototype.getSelectionRangeByOffset=function(t,e){var n=this.getRangeByOffset(t,e);return n.rowIdx=Math.min(Math.max(n.rowIdx,1),14),n.colIdx=Math.min(Math.max(n.colIdx,1),9),n},e.prototype.mounted=function(){var t=this.refs.tableEl.getBoundingClientRect(),e=t.left,n=t.top;this.offsetRect={left:window.pageXOffset+e,top:window.pageYOffset+n}},e.prototype.updated=function(){this.props.show||this.setState({colIdx:-1,rowIdx:-1})},e.prototype.createTableArea=function(t){for(var e=t.colIdx,n=t.rowIdx,r=[],o=0;o<n;o+=1){for(var i=[],a=0;a<e;a+=1){var s=gs("table-cell")+(o>0?"":" header");i.push(tm(Dm||(Dm=$i(['<div class="','"></div>'],['<div class="','"></div>'])),s))}r.push(tm(Em||(Em=$i(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),gs("table-row"),i))}return tm(Tm||(Tm=$i(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),gs("table"),r)},e.prototype.render=function(){var t=this,e=this.getTableRange(),n=this.getSelectionAreaBound();return tm(Mm||(Mm=$i(['\n      <div>\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "],['\n      <div>\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "])),gs("table-selection"),(function(e){return t.refs.tableEl=e}),this.extendSelectionRange,this.execCommand,this.createTableArea(e),gs("table-selection-layer"),n,gs("table-description"),this.getDescription())},e}(mm),jm=function(t){function e(e){var n=t.call(this,e)||this;return e.eventEmitter.listen("closePopup",n.props.hidePopup),n}return zi(e,t),e.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},e.prototype.render=function(){var t=this;return tm(Am||(Am=$i(["<div ref=","></div>"],["<div ref=","></div>"])),(function(e){return t.refs.el=e}))},e}(mm);function Hm(t){return Ui(t)?function(t){var e;switch(t){case"heading":e={name:"heading",className:"heading",tooltip:lh.get("Headings"),state:"heading"};break;case"bold":e={name:"bold",className:"bold",command:"bold",tooltip:lh.get("Bold"),state:"strong"};break;case"italic":e={name:"italic",className:"italic",command:"italic",tooltip:lh.get("Italic"),state:"emph"};break;case"strike":e={name:"strike",className:"strike",command:"strike",tooltip:lh.get("Strike"),state:"strike"};break;case"hr":e={name:"hr",className:"hrline",command:"hr",tooltip:lh.get("Line"),state:"thematicBreak"};break;case"quote":e={name:"quote",className:"quote",command:"blockQuote",tooltip:lh.get("Blockquote"),state:"blockQuote"};break;case"ul":e={name:"ul",className:"bullet-list",command:"bulletList",tooltip:lh.get("Unordered list"),state:"bulletList"};break;case"ol":e={name:"ol",className:"ordered-list",command:"orderedList",tooltip:lh.get("Ordered list"),state:"orderedList"};break;case"task":e={name:"task",className:"task-list",command:"taskList",tooltip:lh.get("Task"),state:"taskList"};break;case"table":e={name:"table",className:"table",tooltip:lh.get("Insert table"),state:"table"};break;case"image":e={name:"image",className:"image",tooltip:lh.get("Insert image")};break;case"link":e={name:"link",className:"link",tooltip:lh.get("Insert link")};break;case"code":e={name:"code",className:"code",command:"code",tooltip:lh.get("Code"),state:"code"};break;case"codeblock":e={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:lh.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":e={name:"indent",className:"indent",command:"indent",tooltip:lh.get("Indent")};break;case"outdent":e={name:"outdent",className:"outdent",command:"outdent",tooltip:lh.get("Outdent")};break;case"scrollSync":e=function(){var t=document.createElement("label"),e=document.createElement("input"),n=document.createElement("span");t.className="scroll-sync active",e.type="checkbox",e.checked=!0,n.className="switch";var r=function(n){return e.addEventListener("change",(function(e){var r=e.target.checked;r?ta(t,"active"):ea(t,"active"),n("toggleScrollSync",{active:r})}))};return t.appendChild(e),t.appendChild(n),{name:"scrollSync",el:t,onMounted:r}}();break;case"more":e={name:"more",className:"more",tooltip:lh.get("More")}}"scrollSync"!==e.name&&(e.className+=" "+gs("toolbar-icons"));return e}(t):t}function $m(t,e){var n=e.el,r=e.pos,o=e.popup,i=e.initialValues;switch(t){case"heading":return{render:function(t){return tm(Sm||(Sm=$i(["<"," ..."," />"],["<"," ..."," />"])),Fm,t)},className:gs("popup-add-heading"),fromEl:n,pos:r};case"link":return{render:function(t){return tm(Om||(Om=$i(["<"," ..."," />"],["<"," ..."," />"])),Pm,t)},className:gs("popup-add-link"),fromEl:n,pos:r,initialValues:i};case"image":return{render:function(t){return tm(Nm||(Nm=$i(["<"," ..."," />"],["<"," ..."," />"])),Rm,t)},className:gs("popup-add-image"),fromEl:n,pos:r};case"table":return{render:function(t){return tm(Lm||(Lm=$i(["<"," ..."," />"],["<"," ..."," />"])),zm,t)},className:gs("popup-add-table"),fromEl:n,pos:r};case"customPopupBody":return o?ji({render:function(t){return tm(Im||(Im=$i(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),jm,t,o.body)},fromEl:n,pos:r},o):null;default:return null}}function qm(t){t.hidden=t.length===t.filter((function(t){return t.hidden})).length}function Vm(t,e){return t.reduce((function(t,n){t.push(n.map((function(t){return function(t){return t.hidden="scrollSync"===t.name&&e,t}(Hm(t))})));var r=t[(t.length||1)-1];return r&&qm(r),t}),[])}var Um,Wm,Jm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleMousedown=function(t){Es(t.target,"."+gs("popup"))||Es(t.target,e.props.info.fromEl)||e.props.hidePopup()},e}return zi(e,t),e.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown)},e.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},e.prototype.render=function(){var t=this.props,e=t.info,n=t.show,r=t.hidePopup,o=t.eventEmitter,i=t.execCommand,a=e||{},s=a.className,u=void 0===s?"":s,l=a.style,c=a.render,p=a.pos,f=a.initialValues,h=void 0===f?{}:f,d=ji({display:n?"block":"none"},l);return p&&(d.left=p.left,d.top=p.top),tm(Um||(Um=$i(['\n      <div class="'," ",'" style=','>\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div class="'," ",'" style=','>\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "])),gs("popup"),u,d,gs("popup-body"),c&&c({eventEmitter:o,show:n,hidePopup:r,execCommand:i,initialValues:h}))},e}(mm);function Km(t){return function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.showTooltip=function(e){var n=t.props.item.tooltip;if(!t.props.disabled&&n){var r=t.getBound(e),o=r.left+6+"px",i=r.top+6+"px";Zi(t.props.tooltipRef.current,{display:"block",left:o,top:i}),t.props.tooltipRef.current.querySelector(".text").textContent=n}},t.hideTooltip=function(){Zi(t.props.tooltipRef.current,"display","none")},t}return zi(n,e),n.prototype.getBound=function(t){var e=Ts(t,Es(t,"."+gs("toolbar"))),n=e.offsetLeft,r=e.offsetTop;return{left:n,top:t.offsetHeight+r}},n.prototype.render=function(){return tm(Wm||(Wm=$i(["\n        <","\n          ...","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n        />\n      "],["\n        <","\n          ...","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n        />\n      "])),t,this.props,this.showTooltip,this.hideTooltip,this.getBound)},n}(mm)}var Zm,Gm,Xm,Qm,Ym,tv,ev,nv,rv,ov,iv,av,sv,uv,lv=Km(function(t){function e(e){var n=t.call(this,e)||this;return n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.execCommand=function(){var t=n.props,e=t.item,r=t.execCommand,o=t.setPopupInfo,i=t.getBound,a=e.command,s=e.name,u=e.popup;if(a)r(a);else{var l=$m(u?"customPopupBody":s,{el:n.refs.el,pos:i(n.refs.el),popup:u});l&&o(l)}},n.state={active:!1},n.addEvent(),n}return zi(e,t),e.prototype.addEvent=function(){var t=this;this.props.item.state&&this.props.eventEmitter.listen("changeToolbarState",(function(e){var n=!!e.toolbarState[t.props.item.state];t.setState({active:n})}))},e.prototype.mounted=function(){this.setItemWidth()},e.prototype.updated=function(t){t.item.name!==this.props.item.name&&this.setItemWidth()},e.prototype.setItemWidth=function(){var t=this.props,e=t.setItemWidth,n=t.item;e&&e(n.name,Ds(this.refs.el)+(n.hidden?80:0))},e.prototype.render=function(){var t=this,e=this.props,n=e.hideTooltip,r=e.disabled,o=e.item,i=ji({display:o.hidden?"none":null},o.style),a=(o.className||"")+(this.state.active?" active":"");return tm(Zm||(Zm=$i(["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n      >\n        ","\n      </button>\n    "],["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n      >\n        ","\n      </button>\n    "])),(function(e){return t.refs.el=e}),i,a,this.execCommand,this.showTooltip,n,!!r,o.text||"")},e}(mm)),cv=Km(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.showPopup=function(){var t=$m("customPopupBody",{el:e.refs.el,pos:e.props.getBound(e.refs.el),popup:e.props.item.popup});t&&e.props.setPopupInfo(t)},e}return zi(e,t),e.prototype.mounted=function(){var t=this.props,e=t.setItemWidth,n=t.item;this.refs.el.appendChild(n.el),e&&e(n.name,Ds(this.refs.el)),n.onMounted&&n.onMounted(this.props.execCommand)},e.prototype.render=function(){var t=this,e={display:this.props.item.hidden?"none":"inline-block"};return tm(Gm||(Gm=$i(["\n      <div\n        ref=","\n        style=",'\n        class="tui-toolbar-item-wrapper"\n        onClick=',"\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "],["\n      <div\n        ref=","\n        style=",'\n        class="tui-toolbar-item-wrapper"\n        onClick=',"\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "])),(function(e){return t.refs.el=e}),e,this.showPopup,this.showTooltip,this.props.hideTooltip)},e}(mm)),pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.group,r=e.hiddenDivider,o=n.hidden?{display:"none"}:null,i=r?{display:"none"}:null;return tm(Qm||(Qm=$i(['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "])),gs("toolbar-group"),o,n.map((function(e){var n=e.el?cv:lv;return tm(Xm||(Xm=$i(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),n,e.name,t.props,e)})),gs("toolbar-divider"),i)},e}(mm),fv=Km(function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){var e=t.target;Es(e,"."+gs("dropdown-toolbar"))||Es(e,".more")||n.setState({showDropdown:!1,dropdownPos:null})},n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.state={showDropdown:!1,dropdownPos:null},n}return zi(e,t),e.prototype.getBound=function(){var t=this.props.getBound(this.refs.el);return t.top+=4,ji(ji({},t),{left:null,right:10})},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.render=function(){var t=this,e=this.state,n=e.showDropdown,r=e.dropdownPos,o=this.props,i=o.disabled,a=o.item,s=o.items,u=o.hideTooltip,l=s.filter((function(t){return!t.hidden})),c=l.length?null:{display:"none"},p=n?null:{display:"none"};return tm(tv||(tv=$i(['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "])),gs("toolbar-group"),c,(function(e){return t.refs.el=e}),a.className,(function(){return t.setState({showDropdown:!0})}),this.showTooltip,u,i,gs("dropdown-toolbar"),ji(ji({},p),r),(function(e){return t.refs.dropdownEl=e}),l.length?l.map((function(e,n){var r;return tm(Ym||(Ym=$i(["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "],["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "])),pv,e,n===l.length-1||(null===(r=l[n+1])||void 0===r?void 0:r.hidden),t.props)})):null)},e}(mm)),hv=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleTab=function(t,e){var r=n.props.eventEmitter;if(n.state.activeTab!==e){var o="write"===e?"changePreviewTabWrite":"changePreviewTabPreview";r.emit(o),n.setState({activeTab:e})}},n.setItemWidth=function(t,e){n.itemWidthMap[t]=e},n.setPopupInfo=function(t){n.setState({showPopup:!0,popupInfo:t})},n.openPopup=function(t,e){void 0===e&&(e={});var r=document.querySelector("."+gs("toolbar-group")+" ."+t);if(r){var o=Ts(r,Es(r,"."+gs("toolbar"))),i=o.offsetLeft,a=o.offsetTop,s=$m(t,{el:r,pos:{left:i,top:r.offsetHeight+a},initialValues:e});s&&n.setPopupInfo(s)}},n.hidePopup=function(){n.state.showPopup&&n.setState({showPopup:!1})},n.execCommand=function(t,e){n.props.eventEmitter.emit("command",t,e),n.hidePopup()},n.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],n.itemWidthMap={},n.initialItems=Vm(e.toolbarItems||[],n.hiddenScrollSync()),n.state={items:n.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},n.tooltipRef={current:null},n.addEvent(),n}return zi(e,t),e.prototype.insertToolbarItem=function(t,e){var n=t.groupIndex,r=t.itemIndex,o=this.initialItems[n];e=Hm(e),o?o.splice(r,0,e):this.initialItems.push([e]),this.setState(this.classifyToolbarItems())},e.prototype.removeToolbarItem=function(t){var e=this;Ji(this.initialItems,(function(n){var r=!1;return Ji(n,(function(o,i){return o.name!==t||(r=!0,n.splice(i,1),e.setState(e.classifyToolbarItems()),!1)})),!r}))},e.prototype.addEvent=function(){var t=this;this.props.eventEmitter.listen("openPopup",this.openPopup),this.handleResize=_m((function(){return t.setState(t.classifyToolbarItems())}),200),window.addEventListener("resize",this.handleResize)},e.prototype.appendTooltipToRoot=function(){var t='<div class="'+gs("tooltip")+'" style="display:none">\n        <div class="arrow"></div>\n        <span class="text"></span>\n      </div>';this.tooltipRef.current=Cs(t,this.refs.el)},e.prototype.hiddenScrollSync=function(){return"wysiwyg"===this.props.editorType||"tab"===this.props.previewStyle},e.prototype.classifyToolbarItems=function(){var t=this,e=0,n=this.refs.el.clientWidth,r=this.refs.el.querySelector("."+gs("toolbar-divider")),o=r?Ds(r):0,i=[],a=[];return this.initialItems.forEach((function(r,s){var u=[],l=[];r.forEach((function(r){((e+=t.itemWidthMap[r.name]||80)>=n-120?l:u).push(r)})),u.length&&(qm(u),i.push(u)),l.length&&(qm(l),a.push(l)),s<t.state.items.length-1&&(e+=o)})),{items:i,dropdownItems:a}},e.prototype.mounted=function(){"tab"===this.props.previewStyle&&this.props.eventEmitter.emit("changePreviewTabWrite"),this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot()},e.prototype.updated=function(t){var e,n,r=this.props,o=r.editorType,i=r.previewStyle,a=r.eventEmitter,s=i!==t.previewStyle,u=o!==t.editorType;if(s||u){e=this.initialItems,n=this.hiddenScrollSync(),e.forEach((function(t){t.forEach((function(t){return t.hidden="scrollSync"===t.name&&n})),qm(t)}));var l=this.classifyToolbarItems();(s||"tab"===i&&"markdown"===o)&&(a.emit("changePreviewTabWrite"),l.activeTab="write"),this.setState(l)}},e.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),ks(this.tooltipRef.current)},e.prototype.render=function(){var t=this,e=this.props,n=e.previewStyle,r=e.eventEmitter,o=e.editorType,i=this.state,a=i.popupInfo,s=i.showPopup,u=i.activeTab,l=i.items,c=i.dropdownItems,p={eventEmitter:r,tooltipRef:this.tooltipRef,disabled:"markdown"===o&&"tab"===n&&"preview"===u,execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},f="tab"===n?{borderTopLeftRadius:0}:null;return tm(nv||(nv=$i(['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "],['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "])),gs("toolbar"),gs("md-tab-container"),"wysiwyg"===o||"vertical"===n?"none":"block",Bm,this.tabs,u,this.toggleTab,gs("defaultUI-toolbar"),(function(e){return t.refs.el=e}),f,l.map((function(e,n){var r;return tm(ev||(ev=$i(["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "],["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "])),pv,e,n===l.length-1||(null===(r=l[n+1])||void 0===r?void 0:r.hidden),t.setItemWidth,p)})),fv,Hm("more"),c,p,Jm,a,s,r,this.hidePopup,this.execCommand)},e}(mm),dv=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){Es(t.target,"."+gs("context-menu"))||n.setState({pos:null})},n.state={pos:null,menuGroups:[]},n.addEvent(),n}return zi(e,t),e.prototype.addEvent=function(){var t=this;this.props.eventEmitter.listen("contextmenu",(function(e){var n=e.pos,r=e.menuGroups;t.setState({pos:n,menuGroups:r})}))},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.getMenuGroupElements=function(){var t=this,e=this.state,n=e.pos,r=e.menuGroups;return n?r.reduce((function(e,n){var r=[];return n.forEach((function(e){var n=e.label,o=e.className,i=void 0!==o&&o,a=e.disabled,s=e.onClick;r.push(tm(rv||(rv=$i(["\n                <li onClick=",' class="menu-item','">\n                  <span class="','">',"</span>\n                </li>\n              "],["\n                <li onClick=",' class="menu-item','">\n                  <span class="','">',"</span>\n                </li>\n              "])),(function(){a||(s(),t.setState({pos:null}))}),a?" disabled":"",i,n))})),e.push(tm(ov||(ov=$i(['<ul class="menu-group">\n              ',"\n            </ul>"],['<ul class="menu-group">\n              ',"\n            </ul>"])),r)),e}),[]):[]},e.prototype.render=function(){var t=ji({display:this.state.pos?"block":"none"},this.state.pos);return tm(iv||(iv=$i(['<div class="','" style=',">\n      ","\n    </div>"],['<div class="','" style=',">\n      ","\n    </div>"])),gs("context-menu"),t,this.getMenuGroupElements())},e}(mm),mv=function(t){function e(e){var n=t.call(this,e)||this;n.changeMode=function(t){t!==n.state.editorType&&n.setState({editorType:t})},n.changePreviewStyle=function(t){t!==n.state.previewStyle&&n.setState({previewStyle:t})},n.hide=function(){n.setState({hide:!0})},n.show=function(){n.setState({hide:!1})};var r=e.editorType,o=e.previewStyle;return n.state={editorType:r,previewStyle:o,hide:!1},n.addEvent(),n}return zi(e,t),e.prototype.mounted=function(){var t=this.props.slots,e=t.wwEditor,n=t.mdEditor,r=t.mdPreview;this.refs.wwContainer.appendChild(e),this.refs.mdContainer.insertAdjacentElement("afterbegin",n),this.refs.mdContainer.appendChild(r)},e.prototype.insertToolbarItem=function(t,e){this.toolbar.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.toolbar.removeToolbarItem(t)},e.prototype.render=function(){var t=this,e=this.props,n=e.eventEmitter,r=e.hideModeSwitch,o=e.toolbarItems,i=e.theme,a=this.state,s=a.hide,u=a.previewStyle,l=a.editorType,c=s?" hidden":"",p=gs("markdown"===l?"md-mode":"ww-mode"),f=gs("md")+"-"+u+"-style",h="light"===i?"":gs(i)+" ";return tm(sv||(sv=$i(['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div\n            class="'," ",'"\n            ref=','\n          >\n            <div class="','"></div>\n          </div>\n          <div\n            class="','"\n            ref=',"\n          />\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "],['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div\n            class="'," ",'"\n            ref=','\n          >\n            <div class="','"></div>\n          </div>\n          <div\n            class="','"\n            ref=',"\n          />\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "])),h,gs("defaultUI"),c,(function(e){return t.refs.el=e}),hv,(function(e){return t.toolbar=e}),n,u,o,l,gs("main"),p,(function(e){return t.refs.editorSection=e}),gs("md-container"),f,(function(e){return t.refs.mdContainer=e}),gs("md-splitter"),gs("ww-container"),(function(e){return t.refs.wwContainer=e}),!r&&tm(av||(av=$i(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),vm,n,l),dv,n)},e.prototype.addEvent=function(){var t=this.props.eventEmitter;t.listen("hide",this.hide),t.listen("show",this.show),t.listen("changeMode",this.changeMode),t.listen("changePreviewStyle",this.changePreviewStyle)},e}(mm),vv=function(t){function e(e){var n,r,o=t.call(this,e)||this,i=hm(o.options.el,tm(uv||(uv=$i(["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "],["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "])),mv,(function(t){return r=t}),o.eventEmitter,o.getEditorElements(),o.options.hideModeSwitch,o.options.toolbarItems,o.options.previewStyle,o.options.initialEditType,o.options.theme));return o.setMinHeight(o.options.minHeight),o.setHeight(o.options.height),o.defaultUI={insertToolbarItem:r.insertToolbarItem.bind(r),removeToolbarItem:r.removeToolbarItem.bind(r),destroy:i},null===(n=o.pluginInfo.toolbarItems)||void 0===n||n.forEach((function(t){var e=t.groupIndex,n=t.itemIndex,r=t.item;o.defaultUI.insertToolbarItem({groupIndex:e,itemIndex:n},r)})),o}return zi(e,t),e.factory=function(t){return t.viewer?new jd(t):new e(t)},e.prototype.insertToolbarItem=function(t,e){this.defaultUI.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.defaultUI.removeToolbarItem(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.defaultUI.destroy()},e}(Zd);Zd.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"});var gv=vv,yv=i({props:{modelValue:{type:String,default:"# Toast UI Editor "}},setup(t){const e=a();let n;return s((()=>{n=new gv({el:e.value,initialEditType:"markdown",previewStyle:"vertical",height:"500px",initialValue:t.modelValue,theme:"dark"})})),u((()=>{n.destroy()})),{editorSection:e}}});const bv=d();l("data-v-23479fc0");const wv={ref:"editorSection"};c();const kv=bv(((t,e,n,r,o,i)=>(p(),f("div",null,[h("div",wv,null,512)]))));yv.render=kv,yv.__scopeId="data-v-23479fc0";var xv,Cv,Dv={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */xv=Dv,Cv=Dv.exports,function(){var t,e="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",o=16,i=32,a=64,s=128,u=256,l=1/0,c=9007199254740991,p=NaN,f=4294967295,h=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",o],["flip",512],["partial",i],["partialRight",a],["rearg",u]],d="[object Arguments]",v="[object Array]",g="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",k="[object GeneratorFunction]",x="[object Map]",C="[object Number]",D="[object Object]",E="[object Promise]",T="[object RegExp]",M="[object Set]",A="[object String]",S="[object Symbol]",O="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",I="[object Float32Array]",_="[object Float64Array]",F="[object Int8Array]",B="[object Int16Array]",R="[object Int32Array]",P="[object Uint8Array]",z="[object Uint8ClampedArray]",j="[object Uint16Array]",H="[object Uint32Array]",$=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,J=RegExp(U.source),K=RegExp(W.source),Z=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,ot=/\s/,it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,ht=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="\\u2700-\\u27bf",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",Dt="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="['’]",At="[\\ud800-\\udfff]",St="["+Tt+"]",Ot="["+kt+"]",Nt="\\d+",Lt="[\\u2700-\\u27bf]",It="["+Ct+"]",_t="[^\\ud800-\\udfff"+Tt+Nt+xt+Ct+Dt+"]",Ft="\\ud83c[\\udffb-\\udfff]",Bt="[^\\ud800-\\udfff]",Rt="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+Dt+"]",jt="(?:"+It+"|"+_t+")",Ht="(?:"+zt+"|"+_t+")",$t="(?:['’](?:d|ll|m|re|s|t|ve))?",qt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+Ot+"|"+Ft+")?",Ut="[\\ufe0e\\ufe0f]?",Wt=Ut+Vt+"(?:\\u200d(?:"+[Bt,Rt,Pt].join("|")+")"+Ut+Vt+")*",Jt="(?:"+[Lt,Rt,Pt].join("|")+")"+Wt,Kt="(?:"+[Bt+Ot+"?",Ot,Rt,Pt,At].join("|")+")",Zt=RegExp(Mt,"g"),Gt=RegExp(Ot,"g"),Xt=RegExp(Ft+"(?="+Ft+")|"+Kt+Wt,"g"),Qt=RegExp([zt+"?"+It+"+"+$t+"(?="+[St,zt,"$"].join("|")+")",Ht+"+"+qt+"(?="+[St,zt+jt,"$"].join("|")+")",zt+"?"+jt+"+"+$t,zt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nt,Jt].join("|"),"g"),Yt=RegExp("[\\u200d\\ud800-\\udfff"+kt+Et+"]"),te=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ee=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ne=-1,re={};re[I]=re[_]=re[F]=re[B]=re[R]=re[P]=re[z]=re[j]=re[H]=!0,re[d]=re[v]=re[N]=re[g]=re[L]=re[y]=re[b]=re[w]=re[x]=re[C]=re[D]=re[T]=re[M]=re[A]=re[O]=!1;var oe={};oe[d]=oe[v]=oe[N]=oe[L]=oe[g]=oe[y]=oe[I]=oe[_]=oe[F]=oe[B]=oe[R]=oe[x]=oe[C]=oe[D]=oe[T]=oe[M]=oe[A]=oe[S]=oe[P]=oe[z]=oe[j]=oe[H]=!0,oe[b]=oe[w]=oe[O]=!1;var ie={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,se=parseInt,ue="object"==typeof m&&m&&m.Object===Object&&m,le="object"==typeof self&&self&&self.Object===Object&&self,ce=ue||le||Function("return this")(),pe=Cv&&!Cv.nodeType&&Cv,fe=pe&&xv&&!xv.nodeType&&xv,he=fe&&fe.exports===pe,de=he&&ue.process,me=function(){try{var t=fe&&fe.require&&fe.require("util").types;return t||de&&de.binding&&de.binding("util")}catch(e){}}(),ve=me&&me.isArrayBuffer,ge=me&&me.isDate,ye=me&&me.isMap,be=me&&me.isRegExp,we=me&&me.isSet,ke=me&&me.isTypedArray;function xe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function De(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ee(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Me(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function Ae(t,e){return!(null==t||!t.length)&&Pe(t,e,0)>-1}function Se(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Oe(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Ne(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Le(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Ie(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function _e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Fe=$e("length");function Be(t,e,n){var r;return n(t,(function(t,n,o){if(e(t,n,o))return r=n,!1})),r}function Re(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Pe(t,e,n){return e==e?function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):Re(t,je,n)}function ze(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function je(t){return t!=t}function He(t,e){var n=null==t?0:t.length;return n?Ue(t,e)/n:p}function $e(e){return function(n){return null==n?t:n[e]}}function qe(e){return function(n){return null==e?t:e[n]}}function Ve(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}function Ue(e,n){for(var r,o=-1,i=e.length;++o<i;){var a=n(e[o]);a!==t&&(r=r===t?a:r+a)}return r}function We(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,pn(t)+1).replace(rt,""):t}function Ke(t){return function(e){return t(e)}}function Ze(t,e){return Oe(e,(function(e){return t[e]}))}function Ge(t,e){return t.has(e)}function Xe(t,e){for(var n=-1,r=t.length;++n<r&&Pe(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length;n--&&Pe(e,t[n],0)>-1;);return n}function Ye(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var tn=qe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),en=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ie[t]}function rn(t){return Yt.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function an(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,o=t.length,i=0,a=[];++n<o;){var s=t[n];s!==e&&s!==r||(t[n]=r,a[i++]=n)}return a}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ln(t){return rn(t)?function(t){for(var e=Xt.lastIndex=0;Xt.test(t);)++e;return e}(t):Fe(t)}function cn(t){return rn(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.split("")}(t)}function pn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var fn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function m(ot){var kt,xt=(ot=null==ot?ce:hn.defaults(ce.Object(),ot,hn.pick(ce,ee))).Array,Ct=ot.Date,Dt=ot.Error,Et=ot.Function,Tt=ot.Math,Mt=ot.Object,At=ot.RegExp,St=ot.String,Ot=ot.TypeError,Nt=xt.prototype,Lt=Et.prototype,It=Mt.prototype,_t=ot["__core-js_shared__"],Ft=Lt.toString,Bt=It.hasOwnProperty,Rt=0,Pt=(kt=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||""))?"Symbol(src)_1."+kt:"",zt=It.toString,jt=Ft.call(Mt),Ht=ce._,$t=At("^"+Ft.call(Bt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=he?ot.Buffer:t,Vt=ot.Symbol,Ut=ot.Uint8Array,Wt=qt?qt.allocUnsafe:t,Jt=an(Mt.getPrototypeOf,Mt),Kt=Mt.create,Xt=It.propertyIsEnumerable,Yt=Nt.splice,ie=Vt?Vt.isConcatSpreadable:t,ue=Vt?Vt.iterator:t,le=Vt?Vt.toStringTag:t,pe=function(){try{var t=hi(Mt,"defineProperty");return t({},"",{}),t}catch(e){}}(),fe=ot.clearTimeout!==ce.clearTimeout&&ot.clearTimeout,de=Ct&&Ct.now!==ce.Date.now&&Ct.now,me=ot.setTimeout!==ce.setTimeout&&ot.setTimeout,Fe=Tt.ceil,qe=Tt.floor,dn=Mt.getOwnPropertySymbols,mn=qt?qt.isBuffer:t,vn=ot.isFinite,gn=Nt.join,yn=an(Mt.keys,Mt),bn=Tt.max,wn=Tt.min,kn=Ct.now,xn=ot.parseInt,Cn=Tt.random,Dn=Nt.reverse,En=hi(ot,"DataView"),Tn=hi(ot,"Map"),Mn=hi(ot,"Promise"),An=hi(ot,"Set"),Sn=hi(ot,"WeakMap"),On=hi(Mt,"create"),Nn=Sn&&new Sn,Ln={},In=qi(En),_n=qi(Tn),Fn=qi(Mn),Bn=qi(An),Rn=qi(Sn),Pn=Vt?Vt.prototype:t,zn=Pn?Pn.valueOf:t,jn=Pn?Pn.toString:t;function Hn(t){if(as(t)&&!Za(t)&&!(t instanceof Un)){if(t instanceof Vn)return t;if(Bt.call(t,"__wrapped__"))return Vi(t)}return new Vn(t)}var $n=function(){function e(){}return function(n){if(!is(n))return{};if(Kt)return Kt(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function qn(){}function Vn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Un(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Kn;++e<n;)this.add(t[e])}function Gn(t){var e=this.__data__=new Jn(t);this.size=e.size}function Xn(t,e){var n=Za(t),r=!n&&Ka(t),o=!n&&!r&&Ya(t),i=!n&&!r&&!o&&ds(t),a=n||r||o||i,s=a?We(t.length,St):[],u=s.length;for(var l in t)!e&&!Bt.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wi(l,u))||s.push(l);return s}function Qn(e){var n=e.length;return n?e[Zr(0,n-1)]:t}function Yn(t,e){return Ri(No(t),ur(e,0,t.length))}function tr(t){return Ri(No(t))}function er(e,n,r){(r!==t&&!Ua(e[n],r)||r===t&&!(n in e))&&ar(e,n,r)}function nr(e,n,r){var o=e[n];Bt.call(e,n)&&Ua(o,r)&&(r!==t||n in e)||ar(e,n,r)}function rr(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function or(t,e,n,r){return hr(t,(function(t,o,i){e(r,t,n(t),i)})),r}function ir(t,e){return t&&Lo(e,Bs(e),t)}function ar(t,e,n){"__proto__"==e&&pe?pe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(e,n){for(var r=-1,o=n.length,i=xt(o),a=null==e;++r<o;)i[r]=a?t:Ns(e,n[r]);return i}function ur(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function lr(e,n,r,o,i,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=i?r(e,o,i,a):r(e)),s!==t)return s;if(!is(e))return e;var p=Za(e);if(p){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Bt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return No(e,s)}else{var f=vi(e),h=f==w||f==k;if(Ya(e))return Eo(e,u);if(f==D||f==d||h&&!i){if(s=l||h?{}:yi(e),!u)return l?function(t,e){return Lo(t,mi(t),e)}(e,function(t,e){return t&&Lo(e,Rs(e),t)}(s,e)):function(t,e){return Lo(t,di(t),e)}(e,ir(s,e))}else{if(!oe[f])return i?e:{};s=function(t,e,n){var r,o=t.constructor;switch(e){case N:return To(t);case g:case y:return new o(+t);case L:return function(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case I:case _:case F:case B:case R:case P:case z:case j:case H:return Mo(t,n);case x:return new o;case C:case A:return new o(t);case T:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case M:return new o;case S:return r=t,zn?Mt(zn.call(r)):{}}}(e,f,u)}}a||(a=new Gn);var m=a.get(e);if(m)return m;a.set(e,s),ps(e)?e.forEach((function(t){s.add(lr(t,n,r,t,e,a))})):ss(e)&&e.forEach((function(t,o){s.set(o,lr(t,n,r,o,e,a))}));var v=p?t:(c?l?ai:ii:l?Rs:Bs)(e);return De(v||e,(function(t,o){v&&(t=e[o=t]),nr(s,o,lr(t,n,r,o,e,a))})),s}function cr(e,n,r){var o=r.length;if(null==e)return!o;for(e=Mt(e);o--;){var i=r[o],a=n[i],s=e[i];if(s===t&&!(i in e)||!a(s))return!1}return!0}function pr(n,r,o){if("function"!=typeof n)throw new Ot(e);return Ii((function(){n.apply(t,o)}),r)}function fr(t,e,n,r){var o=-1,i=Ae,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Oe(e,Ke(n))),r?(i=Se,a=!1):e.length>=200&&(i=Ge,a=!1,e=new Zn(e));t:for(;++o<s;){var c=t[o],p=null==n?c:n(c);if(c=r||0!==c?c:0,a&&p==p){for(var f=l;f--;)if(e[f]===p)continue t;u.push(c)}else i(e,p,r)||u.push(c)}return u}Hn.templateSettings={escape:Z,evaluate:G,interpolate:X,variable:"",imports:{_:Hn}},Hn.prototype=qn.prototype,Hn.prototype.constructor=Hn,Vn.prototype=$n(qn.prototype),Vn.prototype.constructor=Vn,Un.prototype=$n(qn.prototype),Un.prototype.constructor=Un,Wn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(e){var r=this.__data__;if(On){var o=r[e];return o===n?t:o}return Bt.call(r,e)?r[e]:t},Wn.prototype.has=function(e){var n=this.__data__;return On?n[e]!==t:Bt.call(n,e)},Wn.prototype.set=function(e,r){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=On&&r===t?n:r,this},Jn.prototype.clear=function(){this.__data__=[],this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0||(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,0))},Jn.prototype.get=function(e){var n=this.__data__,r=rr(n,e);return r<0?t:n[r][1]},Jn.prototype.has=function(t){return rr(this.__data__,t)>-1},Jn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Tn||Jn),string:new Wn}},Kn.prototype.delete=function(t){var e=pi(this,t).delete(t);return this.size-=e?1:0,e},Kn.prototype.get=function(t){return pi(this,t).get(t)},Kn.prototype.has=function(t){return pi(this,t).has(t)},Kn.prototype.set=function(t,e){var n=pi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,n),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.clear=function(){this.__data__=new Jn,this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Gn.prototype.get=function(t){return this.__data__.get(t)},Gn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Jn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(t,e),this.size=n.size,this};var hr=Fo(kr),dr=Fo(xr,!0);function mr(t,e){var n=!0;return hr(t,(function(t,r,o){return n=!!e(t,r,o)})),n}function vr(e,n,r){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n(a);if(null!=s&&(u===t?s==s&&!hs(s):r(s,u)))var u=s,l=a}return l}function gr(t,e){var n=[];return hr(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}function yr(t,e,n,r,o){var i=-1,a=t.length;for(n||(n=bi),o||(o=[]);++i<a;){var s=t[i];e>0&&n(s)?e>1?yr(s,e-1,n,r,o):Ne(o,s):r||(o[o.length]=s)}return o}var br=Bo(),wr=Bo(!0);function kr(t,e){return t&&br(t,e,Bs)}function xr(t,e){return t&&wr(t,e,Bs)}function Cr(t,e){return Me(e,(function(e){return ns(t[e])}))}function Dr(e,n){for(var r=0,o=(n=ko(n,e)).length;null!=e&&r<o;)e=e[$i(n[r++])];return r&&r==o?e:t}function Er(t,e,n){var r=e(t);return Za(t)?r:Ne(r,n(t))}function Tr(e){return null==e?e===t?"[object Undefined]":"[object Null]":le&&le in Mt(e)?function(e){var n=Bt.call(e,le),r=e[le];try{e[le]=t;var o=!0}catch(a){}var i=zt.call(e);return o&&(n?e[le]=r:delete e[le]),i}(e):function(t){return zt.call(t)}(e)}function Mr(t,e){return t>e}function Ar(t,e){return null!=t&&Bt.call(t,e)}function Sr(t,e){return null!=t&&e in Mt(t)}function Or(e,n,r){for(var o=r?Se:Ae,i=e[0].length,a=e.length,s=a,u=xt(a),l=1/0,c=[];s--;){var p=e[s];s&&n&&(p=Oe(p,Ke(n))),l=wn(p.length,l),u[s]=!r&&(n||i>=120&&p.length>=120)?new Zn(s&&p):t}p=e[0];var f=-1,h=u[0];t:for(;++f<i&&c.length<l;){var d=p[f],m=n?n(d):d;if(d=r||0!==d?d:0,!(h?Ge(h,m):o(c,m,r))){for(s=a;--s;){var v=u[s];if(!(v?Ge(v,m):o(e[s],m,r)))continue t}h&&h.push(m),c.push(d)}}return c}function Nr(e,n,r){var o=null==(e=Si(e,n=ko(n,e)))?e:e[$i(ea(n))];return null==o?t:xe(o,e,r)}function Lr(t){return as(t)&&Tr(t)==d}function Ir(e,n,r,o,i){return e===n||(null==e||null==n||!as(e)&&!as(n)?e!=e&&n!=n:function(e,n,r,o,i,a){var s=Za(e),u=Za(n),l=s?v:vi(e),c=u?v:vi(n),p=(l=l==d?D:l)==D,f=(c=c==d?D:c)==D,h=l==c;if(h&&Ya(e)){if(!Ya(n))return!1;s=!0,p=!1}if(h&&!p)return a||(a=new Gn),s||ds(e)?ri(e,n,r,o,i,a):function(t,e,n,r,o,i,a){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!i(new Ut(t),new Ut(e)));case g:case y:case C:return Ua(+t,+e);case b:return t.name==e.name&&t.message==e.message;case T:case A:return t==e+"";case x:var s=on;case M:var u=1&r;if(s||(s=un),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=ri(s(t),s(e),r,o,i,a);return a.delete(t),c;case S:if(zn)return zn.call(t)==zn.call(e)}return!1}(e,n,l,r,o,i,a);if(!(1&r)){var m=p&&Bt.call(e,"__wrapped__"),w=f&&Bt.call(n,"__wrapped__");if(m||w){var k=m?e.value():e,E=w?n.value():n;return a||(a=new Gn),i(k,E,r,o,a)}}return!!h&&(a||(a=new Gn),function(e,n,r,o,i,a){var s=1&r,u=ii(e),l=u.length,c=ii(n).length;if(l!=c&&!s)return!1;for(var p=l;p--;){var f=u[p];if(!(s?f in n:Bt.call(n,f)))return!1}var h=a.get(e),d=a.get(n);if(h&&d)return h==n&&d==e;var m=!0;a.set(e,n),a.set(n,e);for(var v=s;++p<l;){var g=e[f=u[p]],y=n[f];if(o)var b=s?o(y,g,f,n,e,a):o(g,y,f,e,n,a);if(!(b===t?g===y||i(g,y,r,o,a):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var w=e.constructor,k=n.constructor;w==k||!("constructor"in e)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(m=!1)}return a.delete(e),a.delete(n),m}(e,n,r,o,i,a))}(e,n,r,o,Ir,i))}function _r(e,n,r,o){var i=r.length,a=i,s=!o;if(null==e)return!a;for(e=Mt(e);i--;){var u=r[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var l=(u=r[i])[0],c=e[l],p=u[1];if(s&&u[2]){if(c===t&&!(l in e))return!1}else{var f=new Gn;if(o)var h=o(c,p,l,e,n,f);if(!(h===t?Ir(p,c,3,o,f):h))return!1}}return!0}function Fr(t){return!(!is(t)||(e=t,Pt&&Pt in e))&&(ns(t)?$t:mt).test(qi(t));var e}function Br(t){return"function"==typeof t?t:null==t?uu:"object"==typeof t?Za(t)?$r(t[0],t[1]):Hr(t):gu(t)}function Rr(t){if(!Ei(t))return yn(t);var e=[];for(var n in Mt(t))Bt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pr(t){if(!is(t))return function(t){var e=[];if(null!=t)for(var n in Mt(t))e.push(n);return e}(t);var e=Ei(t),n=[];for(var r in t)("constructor"!=r||!e&&Bt.call(t,r))&&n.push(r);return n}function zr(t,e){return t<e}function jr(t,e){var n=-1,r=Xa(t)?xt(t.length):[];return hr(t,(function(t,o,i){r[++n]=e(t,o,i)})),r}function Hr(t){var e=fi(t);return 1==e.length&&e[0][2]?Mi(e[0][0],e[0][1]):function(n){return n===t||_r(n,t,e)}}function $r(e,n){return xi(e)&&Ti(n)?Mi($i(e),n):function(r){var o=Ns(r,e);return o===t&&o===n?Ls(r,e):Ir(n,o,3)}}function qr(e,n,r,o,i){e!==n&&br(n,(function(a,s){if(i||(i=new Gn),is(a))!function(e,n,r,o,i,a,s){var u=Ni(e,r),l=Ni(n,r),c=s.get(l);if(c)er(e,r,c);else{var p=a?a(u,l,r+"",e,n,s):t,f=p===t;if(f){var h=Za(l),d=!h&&Ya(l),m=!h&&!d&&ds(l);p=l,h||d||m?Za(u)?p=u:Qa(u)?p=No(u):d?(f=!1,p=Eo(l,!0)):m?(f=!1,p=Mo(l,!0)):p=[]:ls(l)||Ka(l)?(p=u,Ka(u)?p=xs(u):is(u)&&!ns(u)||(p=yi(l))):f=!1}f&&(s.set(l,p),i(p,l,o,a,s),s.delete(l)),er(e,r,p)}}(e,n,s,r,qr,o,i);else{var u=o?o(Ni(e,s),a,s+"",e,n,i):t;u===t&&(u=a),er(e,s,u)}}),Rs)}function Vr(e,n){var r=e.length;if(r)return wi(n+=n<0?r:0,r)?e[n]:t}function Ur(t,e,n){e=e.length?Oe(e,(function(t){return Za(t)?function(e){return Dr(e,1===t.length?t[0]:t)}:t})):[uu];var r=-1;return e=Oe(e,Ke(ci())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(jr(t,(function(t,n,o){return{criteria:Oe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,s=n.length;++r<a;){var u=Ao(o[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Wr(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],s=Dr(t,a);n(s,a)&&to(i,ko(a,t),s)}return i}function Jr(t,e,n,r){var o=r?ze:Pe,i=-1,a=e.length,s=t;for(t===e&&(e=No(e)),n&&(s=Oe(t,Ke(n)));++i<a;)for(var u=0,l=e[i],c=n?n(l):l;(u=o(s,c,u,r))>-1;)s!==t&&Yt.call(s,u,1),Yt.call(t,u,1);return t}function Kr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;wi(o)?Yt.call(t,o,1):fo(t,o)}}return t}function Zr(t,e){return t+qe(Cn()*(e-t+1))}function Gr(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=qe(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return _i(Ai(t,e,uu),t+"")}function Qr(t){return Qn(Us(t))}function Yr(t,e){var n=Us(t);return Ri(n,ur(e,0,n.length))}function to(e,n,r,o){if(!is(e))return e;for(var i=-1,a=(n=ko(n,e)).length,s=a-1,u=e;null!=u&&++i<a;){var l=$i(n[i]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var p=u[l];(c=o?o(p,l,u):t)===t&&(c=is(p)?p:wi(n[i+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var eo=Nn?function(t,e){return Nn.set(t,e),t}:uu,no=pe?function(t,e){return pe(t,"toString",{configurable:!0,enumerable:!1,value:iu(e),writable:!0})}:uu;function ro(t){return Ri(Us(t))}function oo(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=xt(o);++r<o;)i[r]=t[r+e];return i}function io(t,e){var n;return hr(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n}function ao(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!hs(a)&&(n?a<=e:a<e)?r=i+1:o=i}return o}return so(t,e,uu,n)}function so(e,n,r,o){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(n=r(n))!=n,u=null===n,l=hs(n),c=n===t;i<a;){var p=qe((i+a)/2),f=r(e[p]),h=f!==t,d=null===f,m=f==f,v=hs(f);if(s)var g=o||m;else g=c?m&&(o||h):u?m&&h&&(o||!d):l?m&&h&&!d&&(o||!v):!d&&!v&&(o?f<=n:f<n);g?i=p+1:a=p}return wn(a,4294967294)}function uo(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ua(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function lo(t){return"number"==typeof t?t:hs(t)?p:+t}function co(t){if("string"==typeof t)return t;if(Za(t))return Oe(t,co)+"";if(hs(t))return jn?jn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function po(t,e,n){var r=-1,o=Ae,i=t.length,a=!0,s=[],u=s;if(n)a=!1,o=Se;else if(i>=200){var l=e?null:Xo(t);if(l)return un(l);a=!1,o=Ge,u=new Zn}else u=e?[]:s;t:for(;++r<i;){var c=t[r],p=e?e(c):c;if(c=n||0!==c?c:0,a&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue t;e&&u.push(p),s.push(c)}else o(u,p,n)||(u!==s&&u.push(p),s.push(c))}return s}function fo(t,e){return null==(t=Si(t,e=ko(e,t)))||delete t[$i(ea(e))]}function ho(t,e,n,r){return to(t,e,n(Dr(t,e)),r)}function mo(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?oo(t,r?0:i,r?i+1:o):oo(t,r?i+1:0,r?o:i)}function vo(t,e){var n=t;return n instanceof Un&&(n=n.value()),Le(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function go(t,e,n){var r=t.length;if(r<2)return r?po(t[0]):[];for(var o=-1,i=xt(r);++o<r;)for(var a=t[o],s=-1;++s<r;)s!=o&&(i[o]=fr(i[o]||a,t[s],e,n));return po(yr(i,1),e,n)}function yo(e,n,r){for(var o=-1,i=e.length,a=n.length,s={};++o<i;){var u=o<a?n[o]:t;r(s,e[o],u)}return s}function bo(t){return Qa(t)?t:[]}function wo(t){return"function"==typeof t?t:uu}function ko(t,e){return Za(t)?t:xi(t,e)?[t]:Hi(Cs(t))}var xo=Xr;function Co(e,n,r){var o=e.length;return r=r===t?o:r,!n&&r>=o?e:oo(e,n,r)}var Do=fe||function(t){return ce.clearTimeout(t)};function Eo(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function To(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function Mo(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ao(e,n){if(e!==n){var r=e!==t,o=null===e,i=e==e,a=hs(e),s=n!==t,u=null===n,l=n==n,c=hs(n);if(!u&&!c&&!a&&e>n||a&&s&&l&&!u&&!c||o&&s&&l||!r&&l||!i)return 1;if(!o&&!a&&!c&&e<n||c&&r&&i&&!o&&!a||u&&r&&i||!s&&i||!l)return-1}return 0}function So(t,e,n,r){for(var o=-1,i=t.length,a=n.length,s=-1,u=e.length,l=bn(i-a,0),c=xt(u+l),p=!r;++s<u;)c[s]=e[s];for(;++o<a;)(p||o<i)&&(c[n[o]]=t[o]);for(;l--;)c[s++]=t[o++];return c}function Oo(t,e,n,r){for(var o=-1,i=t.length,a=-1,s=n.length,u=-1,l=e.length,c=bn(i-s,0),p=xt(c+l),f=!r;++o<c;)p[o]=t[o];for(var h=o;++u<l;)p[h+u]=e[u];for(;++a<s;)(f||o<i)&&(p[h+n[a]]=t[o++]);return p}function No(t,e){var n=-1,r=t.length;for(e||(e=xt(r));++n<r;)e[n]=t[n];return e}function Lo(e,n,r,o){var i=!r;r||(r={});for(var a=-1,s=n.length;++a<s;){var u=n[a],l=o?o(r[u],e[u],u,r,e):t;l===t&&(l=e[u]),i?ar(r,u,l):nr(r,u,l)}return r}function Io(t,e){return function(n,r){var o=Za(n)?Ce:or,i=e?e():{};return o(n,t,ci(r,2),i)}}function _o(e){return Xr((function(n,r){var o=-1,i=r.length,a=i>1?r[i-1]:t,s=i>2?r[2]:t;for(a=e.length>3&&"function"==typeof a?(i--,a):t,s&&ki(r[0],r[1],s)&&(a=i<3?t:a,i=1),n=Mt(n);++o<i;){var u=r[o];u&&e(n,u,o,a)}return n}))}function Fo(t,e){return function(n,r){if(null==n)return n;if(!Xa(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Mt(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Bo(t){return function(e,n,r){for(var o=-1,i=Mt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}function Ro(e){return function(n){var r=rn(n=Cs(n))?cn(n):t,o=r?r[0]:n.charAt(0),i=r?Co(r,1).join(""):n.slice(1);return o[e]()+i}}function Po(t){return function(e){return Le(nu(Ks(e).replace(Zt,"")),t,"")}}function zo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=$n(t.prototype),r=t.apply(n,e);return is(r)?r:n}}function jo(e){return function(n,r,o){var i=Mt(n);if(!Xa(n)){var a=ci(r,3);n=Bs(n),r=function(t){return a(i[t],t,i)}}var s=e(n,r,o);return s>-1?i[a?n[s]:s]:t}}function Ho(n){return oi((function(r){var o=r.length,i=o,a=Vn.prototype.thru;for(n&&r.reverse();i--;){var s=r[i];if("function"!=typeof s)throw new Ot(e);if(a&&!u&&"wrapper"==ui(s))var u=new Vn([],!0)}for(i=u?i:o;++i<o;){var l=ui(s=r[i]),c="wrapper"==l?si(s):t;u=c&&Ci(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ui(c[0])].apply(u,c[3]):1==s.length&&Ci(s)?u[l]():u.thru(s)}return function(){var t=arguments,e=t[0];if(u&&1==t.length&&Za(e))return u.plant(e).value();for(var n=0,i=o?r[n].apply(this,t):e;++n<o;)i=r[n].call(this,i);return i}}))}function $o(e,n,r,o,i,a,u,l,c,p){var f=n&s,h=1&n,d=2&n,m=24&n,v=512&n,g=d?t:zo(e);return function t(){for(var s=arguments.length,y=xt(s),b=s;b--;)y[b]=arguments[b];if(m)var w=li(t),k=Ye(y,w);if(o&&(y=So(y,o,i,m)),a&&(y=Oo(y,a,u,m)),s-=k,m&&s<p){var x=sn(y,w);return Zo(e,n,$o,t.placeholder,r,y,x,l,c,p-s)}var C=h?r:this,D=d?C[e]:e;return s=y.length,l?y=Oi(y,l):v&&s>1&&y.reverse(),f&&c<s&&(y.length=c),this&&this!==ce&&this instanceof t&&(D=g||zo(D)),D.apply(C,y)}}function qo(t,e){return function(n,r){return function(t,e,n,r){return kr(t,(function(t,o,i){e(r,n(t),o,i)})),r}(n,t,e(r),{})}}function Vo(e,n){return function(r,o){var i;if(r===t&&o===t)return n;if(r!==t&&(i=r),o!==t){if(i===t)return o;"string"==typeof r||"string"==typeof o?(r=co(r),o=co(o)):(r=lo(r),o=lo(o)),i=e(r,o)}return i}}function Uo(t){return oi((function(e){return e=Oe(e,Ke(ci())),Xr((function(n){var r=this;return t(e,(function(t){return xe(t,r,n)}))}))}))}function Wo(e,n){var r=(n=n===t?" ":co(n)).length;if(r<2)return r?Gr(n,e):n;var o=Gr(n,Fe(e/ln(n)));return rn(n)?Co(cn(o),0,e).join(""):o.slice(0,e)}function Jo(e){return function(n,r,o){return o&&"number"!=typeof o&&ki(n,r,o)&&(r=o=t),n=ys(n),r===t?(r=n,n=0):r=ys(r),function(t,e,n,r){for(var o=-1,i=bn(Fe((e-t)/(n||1)),0),a=xt(i);i--;)a[r?i:++o]=t,t+=n;return a}(n,r,o=o===t?n<r?1:-1:ys(o),e)}}function Ko(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ks(e),n=ks(n)),t(e,n)}}function Zo(e,n,r,o,s,u,l,c,p,f){var h=8&n;n|=h?i:a,4&(n&=~(h?a:i))||(n&=-4);var d=[e,n,s,h?u:t,h?l:t,h?t:u,h?t:l,c,p,f],m=r.apply(t,d);return Ci(e)&&Li(m,d),m.placeholder=o,Fi(m,e,n)}function Go(t){var e=Tt[t];return function(t,n){if(t=ks(t),(n=null==n?0:wn(bs(n),292))&&vn(t)){var r=(Cs(t)+"e").split("e");return+((r=(Cs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xo=An&&1/un(new An([,-0]))[1]==l?function(t){return new An(t)}:hu;function Qo(t){return function(e){var n=vi(e);return n==x?on(e):n==M?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return Oe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yo(n,l,c,p,f,h,d,m){var v=2&l;if(!v&&"function"!=typeof n)throw new Ot(e);var g=p?p.length:0;if(g||(l&=-97,p=f=t),d=d===t?d:bn(bs(d),0),m=m===t?m:bs(m),g-=f?f.length:0,l&a){var y=p,b=f;p=f=t}var w=v?t:si(n),k=[n,l,c,p,f,y,b,h,d,m];if(w&&function(t,e){var n=t[1],o=e[1],i=n|o,a=i<131,l=o==s&&8==n||o==s&&n==u&&t[7].length<=e[8]||384==o&&e[7].length<=e[8]&&8==n;if(!a&&!l)return t;1&o&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var p=t[3];t[3]=p?So(p,c,e[4]):c,t[4]=p?sn(t[3],r):e[4]}(c=e[5])&&(p=t[5],t[5]=p?Oo(p,c,e[6]):c,t[6]=p?sn(t[5],r):e[6]),(c=e[7])&&(t[7]=c),o&s&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(k,w),n=k[0],l=k[1],c=k[2],p=k[3],f=k[4],!(m=k[9]=k[9]===t?v?0:n.length:bn(k[9]-g,0))&&24&l&&(l&=-25),l&&1!=l)x=8==l||l==o?function(e,n,r){var o=zo(e);return function i(){for(var a=arguments.length,s=xt(a),u=a,l=li(i);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:sn(s,l);return(a-=c.length)<r?Zo(e,n,$o,i.placeholder,t,s,c,t,t,r-a):xe(this&&this!==ce&&this instanceof i?o:e,this,s)}}(n,l,m):l!=i&&33!=l||f.length?$o.apply(t,k):function(t,e,n,r){var o=1&e,i=zo(t);return function e(){for(var a=-1,s=arguments.length,u=-1,l=r.length,c=xt(l+s),p=this&&this!==ce&&this instanceof e?i:t;++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++a];return xe(p,o?n:this,c)}}(n,l,c,p);else var x=function(t,e,n){var r=1&e,o=zo(t);return function e(){return(this&&this!==ce&&this instanceof e?o:t).apply(r?n:this,arguments)}}(n,l,c);return Fi((w?eo:Li)(x,k),n,l)}function ti(e,n,r,o){return e===t||Ua(e,It[r])&&!Bt.call(o,r)?n:e}function ei(e,n,r,o,i,a){return is(e)&&is(n)&&(a.set(n,e),qr(e,n,t,ei,a),a.delete(n)),e}function ni(e){return ls(e)?t:e}function ri(e,n,r,o,i,a){var s=1&r,u=e.length,l=n.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),p=a.get(n);if(c&&p)return c==n&&p==e;var f=-1,h=!0,d=2&r?new Zn:t;for(a.set(e,n),a.set(n,e);++f<u;){var m=e[f],v=n[f];if(o)var g=s?o(v,m,f,n,e,a):o(m,v,f,e,n,a);if(g!==t){if(g)continue;h=!1;break}if(d){if(!_e(n,(function(t,e){if(!Ge(d,e)&&(m===t||i(m,t,r,o,a)))return d.push(e)}))){h=!1;break}}else if(m!==v&&!i(m,v,r,o,a)){h=!1;break}}return a.delete(e),a.delete(n),h}function oi(e){return _i(Ai(e,t,Gi),e+"")}function ii(t){return Er(t,Bs,di)}function ai(t){return Er(t,Rs,mi)}var si=Nn?function(t){return Nn.get(t)}:hu;function ui(t){for(var e=t.name+"",n=Ln[e],r=Bt.call(Ln,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function li(t){return(Bt.call(Hn,"placeholder")?Hn:t).placeholder}function ci(){var t=Hn.iteratee||lu;return t=t===lu?Br:t,arguments.length?t(arguments[0],arguments[1]):t}function pi(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function fi(t){for(var e=Bs(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Ti(o)]}return e}function hi(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Fr(r)?r:t}var di=dn?function(t){return null==t?[]:(t=Mt(t),Me(dn(t),(function(e){return Xt.call(t,e)})))}:wu,mi=dn?function(t){for(var e=[];t;)Ne(e,di(t)),t=Jt(t);return e}:wu,vi=Tr;function gi(t,e,n){for(var r=-1,o=(e=ko(e,t)).length,i=!1;++r<o;){var a=$i(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&os(o)&&wi(a,o)&&(Za(t)||Ka(t))}function yi(t){return"function"!=typeof t.constructor||Ei(t)?{}:$n(Jt(t))}function bi(t){return Za(t)||Ka(t)||!!(ie&&t&&t[ie])}function wi(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&gt.test(t))&&t>-1&&t%1==0&&t<e}function ki(t,e,n){if(!is(n))return!1;var r=typeof e;return!!("number"==r?Xa(n)&&wi(e,n.length):"string"==r&&e in n)&&Ua(n[e],t)}function xi(t,e){if(Za(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!hs(t))||Y.test(t)||!Q.test(t)||null!=e&&t in Mt(e)}function Ci(t){var e=ui(t),n=Hn[e];if("function"!=typeof n||!(e in Un.prototype))return!1;if(t===n)return!0;var r=si(n);return!!r&&t===r[0]}(En&&vi(new En(new ArrayBuffer(1)))!=L||Tn&&vi(new Tn)!=x||Mn&&vi(Mn.resolve())!=E||An&&vi(new An)!=M||Sn&&vi(new Sn)!=O)&&(vi=function(e){var n=Tr(e),r=n==D?e.constructor:t,o=r?qi(r):"";if(o)switch(o){case In:return L;case _n:return x;case Fn:return E;case Bn:return M;case Rn:return O}return n});var Di=_t?ns:ku;function Ei(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)}function Ti(t){return t==t&&!is(t)}function Mi(e,n){return function(r){return null!=r&&r[e]===n&&(n!==t||e in Mt(r))}}function Ai(e,n,r){return n=bn(n===t?e.length-1:n,0),function(){for(var t=arguments,o=-1,i=bn(t.length-n,0),a=xt(i);++o<i;)a[o]=t[n+o];o=-1;for(var s=xt(n+1);++o<n;)s[o]=t[o];return s[n]=r(a),xe(e,this,s)}}function Si(t,e){return e.length<2?t:Dr(t,oo(e,0,-1))}function Oi(e,n){for(var r=e.length,o=wn(n.length,r),i=No(e);o--;){var a=n[o];e[o]=wi(a,r)?i[a]:t}return e}function Ni(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Li=Bi(eo),Ii=me||function(t,e){return ce.setTimeout(t,e)},_i=Bi(no);function Fi(t,e,n){var r=e+"";return _i(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(it,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return De(h,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function Bi(e){var n=0,r=0;return function(){var o=kn(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Ri(e,n){var r=-1,o=e.length,i=o-1;for(n=n===t?o:n;++r<n;){var a=Zr(r,i),s=e[a];e[a]=e[r],e[r]=s}return e.length=n,e}var Pi,zi,ji,Hi=(Pi=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,o){e.push(r?o.replace(ct,"$1"):n||t)})),e},zi=za(Pi,(function(t){return 500===ji.size&&ji.clear(),t})),ji=zi.cache,zi);function $i(t){if("string"==typeof t||hs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function qi(t){if(null!=t){try{return Ft.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Vi(t){if(t instanceof Un)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=No(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ui=Xr((function(t,e){return Qa(t)?fr(t,yr(e,1,Qa,!0)):[]})),Wi=Xr((function(e,n){var r=ea(n);return Qa(r)&&(r=t),Qa(e)?fr(e,yr(n,1,Qa,!0),ci(r,2)):[]})),Ji=Xr((function(e,n){var r=ea(n);return Qa(r)&&(r=t),Qa(e)?fr(e,yr(n,1,Qa,!0),t,r):[]}));function Ki(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:bs(n);return o<0&&(o=bn(r+o,0)),Re(t,ci(e,3),o)}function Zi(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return r!==t&&(i=bs(r),i=r<0?bn(o+i,0):wn(i,o-1)),Re(e,ci(n,3),i,!0)}function Gi(t){return null!=t&&t.length?yr(t,1):[]}function Xi(e){return e&&e.length?e[0]:t}var Qi=Xr((function(t){var e=Oe(t,bo);return e.length&&e[0]===t[0]?Or(e):[]})),Yi=Xr((function(e){var n=ea(e),r=Oe(e,bo);return n===ea(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Or(r,ci(n,2)):[]})),ta=Xr((function(e){var n=ea(e),r=Oe(e,bo);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Or(r,t,n):[]}));function ea(e){var n=null==e?0:e.length;return n?e[n-1]:t}var na=Xr(ra);function ra(t,e){return t&&t.length&&e&&e.length?Jr(t,e):t}var oa=oi((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Kr(t,Oe(e,(function(t){return wi(t,n)?+t:t})).sort(Ao)),r}));function ia(t){return null==t?t:Dn.call(t)}var aa=Xr((function(t){return po(yr(t,1,Qa,!0))})),sa=Xr((function(e){var n=ea(e);return Qa(n)&&(n=t),po(yr(e,1,Qa,!0),ci(n,2))})),ua=Xr((function(e){var n=ea(e);return n="function"==typeof n?n:t,po(yr(e,1,Qa,!0),t,n)}));function la(t){if(!t||!t.length)return[];var e=0;return t=Me(t,(function(t){if(Qa(t))return e=bn(t.length,e),!0})),We(e,(function(e){return Oe(t,$e(e))}))}function ca(e,n){if(!e||!e.length)return[];var r=la(e);return null==n?r:Oe(r,(function(e){return xe(n,t,e)}))}var pa=Xr((function(t,e){return Qa(t)?fr(t,e):[]})),fa=Xr((function(t){return go(Me(t,Qa))})),ha=Xr((function(e){var n=ea(e);return Qa(n)&&(n=t),go(Me(e,Qa),ci(n,2))})),da=Xr((function(e){var n=ea(e);return n="function"==typeof n?n:t,go(Me(e,Qa),t,n)})),ma=Xr(la),va=Xr((function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,ca(e,r)}));function ga(t){var e=Hn(t);return e.__chain__=!0,e}function ya(t,e){return e(t)}var ba=oi((function(e){var n=e.length,r=n?e[0]:0,o=this.__wrapped__,i=function(t){return sr(t,e)};return!(n>1||this.__actions__.length)&&o instanceof Un&&wi(r)?((o=o.slice(r,+r+(n?1:0))).__actions__.push({func:ya,args:[i],thisArg:t}),new Vn(o,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(i)})),wa=Io((function(t,e,n){Bt.call(t,n)?++t[n]:ar(t,n,1)})),ka=jo(Ki),xa=jo(Zi);function Ca(t,e){return(Za(t)?De:hr)(t,ci(e,3))}function Da(t,e){return(Za(t)?Ee:dr)(t,ci(e,3))}var Ea=Io((function(t,e,n){Bt.call(t,n)?t[n].push(e):ar(t,n,[e])})),Ta=Xr((function(t,e,n){var r=-1,o="function"==typeof e,i=Xa(t)?xt(t.length):[];return hr(t,(function(t){i[++r]=o?xe(e,t,n):Nr(t,e,n)})),i})),Ma=Io((function(t,e,n){ar(t,n,e)}));function Aa(t,e){return(Za(t)?Oe:jr)(t,ci(e,3))}var Sa=Io((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Oa=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ki(t,e[0],e[1])?e=[]:n>2&&ki(e[0],e[1],e[2])&&(e=[e[0]]),Ur(t,yr(e,1),[])})),Na=de||function(){return ce.Date.now()};function La(e,n,r){return n=r?t:n,n=e&&null==n?e.length:n,Yo(e,s,t,t,t,t,n)}function Ia(n,r){var o;if("function"!=typeof r)throw new Ot(e);return n=bs(n),function(){return--n>0&&(o=r.apply(this,arguments)),n<=1&&(r=t),o}}var _a=Xr((function(t,e,n){var r=1;if(n.length){var o=sn(n,li(_a));r|=i}return Yo(t,r,e,n,o)})),Fa=Xr((function(t,e,n){var r=3;if(n.length){var o=sn(n,li(Fa));r|=i}return Yo(e,r,t,n,o)}));function Ba(n,r,o){var i,a,s,u,l,c,p=0,f=!1,h=!1,d=!0;if("function"!=typeof n)throw new Ot(e);function m(e){var r=i,o=a;return i=a=t,p=e,u=n.apply(o,r)}function v(t){return p=t,l=Ii(y,r),f?m(t):u}function g(e){var n=e-c;return c===t||n>=r||n<0||h&&e-p>=s}function y(){var t=Na();if(g(t))return b(t);l=Ii(y,function(t){var e=r-(t-c);return h?wn(e,s-(t-p)):e}(t))}function b(e){return l=t,d&&i?m(e):(i=a=t,u)}function w(){var e=Na(),n=g(e);if(i=arguments,a=this,c=e,n){if(l===t)return v(c);if(h)return Do(l),l=Ii(y,r),m(c)}return l===t&&(l=Ii(y,r)),u}return r=ks(r)||0,is(o)&&(f=!!o.leading,s=(h="maxWait"in o)?bn(ks(o.maxWait)||0,r):s,d="trailing"in o?!!o.trailing:d),w.cancel=function(){l!==t&&Do(l),p=0,i=c=a=l=t},w.flush=function(){return l===t?u:b(Na())},w}var Ra=Xr((function(t,e){return pr(t,1,e)})),Pa=Xr((function(t,e,n){return pr(t,ks(e)||0,n)}));function za(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new Ot(e);var r=function(){var e=arguments,o=n?n.apply(this,e):e[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,e);return r.cache=i.set(o,a)||i,a};return r.cache=new(za.Cache||Kn),r}function ja(t){if("function"!=typeof t)throw new Ot(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}za.Cache=Kn;var Ha=xo((function(t,e){var n=(e=1==e.length&&Za(e[0])?Oe(e[0],Ke(ci())):Oe(yr(e,1),Ke(ci()))).length;return Xr((function(r){for(var o=-1,i=wn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return xe(t,this,r)}))})),$a=Xr((function(e,n){var r=sn(n,li($a));return Yo(e,i,t,n,r)})),qa=Xr((function(e,n){var r=sn(n,li(qa));return Yo(e,a,t,n,r)})),Va=oi((function(e,n){return Yo(e,u,t,t,t,n)}));function Ua(t,e){return t===e||t!=t&&e!=e}var Wa=Ko(Mr),Ja=Ko((function(t,e){return t>=e})),Ka=Lr(function(){return arguments}())?Lr:function(t){return as(t)&&Bt.call(t,"callee")&&!Xt.call(t,"callee")},Za=xt.isArray,Ga=ve?Ke(ve):function(t){return as(t)&&Tr(t)==N};function Xa(t){return null!=t&&os(t.length)&&!ns(t)}function Qa(t){return as(t)&&Xa(t)}var Ya=mn||ku,ts=ge?Ke(ge):function(t){return as(t)&&Tr(t)==y};function es(t){if(!as(t))return!1;var e=Tr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ls(t)}function ns(t){if(!is(t))return!1;var e=Tr(t);return e==w||e==k||"[object AsyncFunction]"==e||"[object Proxy]"==e}function rs(t){return"number"==typeof t&&t==bs(t)}function os(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function is(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function as(t){return null!=t&&"object"==typeof t}var ss=ye?Ke(ye):function(t){return as(t)&&vi(t)==x};function us(t){return"number"==typeof t||as(t)&&Tr(t)==C}function ls(t){if(!as(t)||Tr(t)!=D)return!1;var e=Jt(t);if(null===e)return!0;var n=Bt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==jt}var cs=be?Ke(be):function(t){return as(t)&&Tr(t)==T},ps=we?Ke(we):function(t){return as(t)&&vi(t)==M};function fs(t){return"string"==typeof t||!Za(t)&&as(t)&&Tr(t)==A}function hs(t){return"symbol"==typeof t||as(t)&&Tr(t)==S}var ds=ke?Ke(ke):function(t){return as(t)&&os(t.length)&&!!re[Tr(t)]},ms=Ko(zr),vs=Ko((function(t,e){return t<=e}));function gs(t){if(!t)return[];if(Xa(t))return fs(t)?cn(t):No(t);if(ue&&t[ue])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ue]());var e=vi(t);return(e==x?on:e==M?un:Us)(t)}function ys(t){return t?(t=ks(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function bs(t){var e=ys(t),n=e%1;return e==e?n?e-n:e:0}function ws(t){return t?ur(bs(t),0,f):0}function ks(t){if("number"==typeof t)return t;if(hs(t))return p;if(is(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=is(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=dt.test(t);return n||vt.test(t)?se(t.slice(2),n?2:8):ht.test(t)?p:+t}function xs(t){return Lo(t,Rs(t))}function Cs(t){return null==t?"":co(t)}var Ds=_o((function(t,e){if(Ei(e)||Xa(e))Lo(e,Bs(e),t);else for(var n in e)Bt.call(e,n)&&nr(t,n,e[n])})),Es=_o((function(t,e){Lo(e,Rs(e),t)})),Ts=_o((function(t,e,n,r){Lo(e,Rs(e),t,r)})),Ms=_o((function(t,e,n,r){Lo(e,Bs(e),t,r)})),As=oi(sr),Ss=Xr((function(e,n){e=Mt(e);var r=-1,o=n.length,i=o>2?n[2]:t;for(i&&ki(n[0],n[1],i)&&(o=1);++r<o;)for(var a=n[r],s=Rs(a),u=-1,l=s.length;++u<l;){var c=s[u],p=e[c];(p===t||Ua(p,It[c])&&!Bt.call(e,c))&&(e[c]=a[c])}return e})),Os=Xr((function(e){return e.push(t,ei),xe(zs,t,e)}));function Ns(e,n,r){var o=null==e?t:Dr(e,n);return o===t?r:o}function Ls(t,e){return null!=t&&gi(t,e,Sr)}var Is=qo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),iu(uu)),_s=qo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Bt.call(t,e)?t[e].push(n):t[e]=[n]}),ci),Fs=Xr(Nr);function Bs(t){return Xa(t)?Xn(t):Rr(t)}function Rs(t){return Xa(t)?Xn(t,!0):Pr(t)}var Ps=_o((function(t,e,n){qr(t,e,n)})),zs=_o((function(t,e,n,r){qr(t,e,n,r)})),js=oi((function(t,e){var n={};if(null==t)return n;var r=!1;e=Oe(e,(function(e){return e=ko(e,t),r||(r=e.length>1),e})),Lo(t,ai(t),n),r&&(n=lr(n,7,ni));for(var o=e.length;o--;)fo(n,e[o]);return n})),Hs=oi((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return Ls(t,n)}))}(t,e)}));function $s(t,e){if(null==t)return{};var n=Oe(ai(t),(function(t){return[t]}));return e=ci(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var qs=Qo(Bs),Vs=Qo(Rs);function Us(t){return null==t?[]:Ze(t,Bs(t))}var Ws=Po((function(t,e,n){return e=e.toLowerCase(),t+(n?Js(e):e)}));function Js(t){return eu(Cs(t).toLowerCase())}function Ks(t){return(t=Cs(t))&&t.replace(yt,tn).replace(Gt,"")}var Zs=Po((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=Po((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=Ro("toLowerCase"),Qs=Po((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ys=Po((function(t,e,n){return t+(n?" ":"")+eu(e)})),tu=Po((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),eu=Ro("toUpperCase");function nu(e,n,r){return e=Cs(e),(n=r?t:n)===t?function(t){return te.test(t)}(e)?function(t){return t.match(Qt)||[]}(e):function(t){return t.match(ut)||[]}(e):e.match(n)||[]}var ru=Xr((function(e,n){try{return xe(e,t,n)}catch(r){return es(r)?r:new Dt(r)}})),ou=oi((function(t,e){return De(e,(function(e){e=$i(e),ar(t,e,_a(t[e],t))})),t}));function iu(t){return function(){return t}}var au=Ho(),su=Ho(!0);function uu(t){return t}function lu(t){return Br("function"==typeof t?t:lr(t,1))}var cu=Xr((function(t,e){return function(n){return Nr(n,t,e)}})),pu=Xr((function(t,e){return function(n){return Nr(t,n,e)}}));function fu(t,e,n){var r=Bs(e),o=Cr(e,r);null!=n||is(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Cr(e,Bs(e)));var i=!(is(n)&&"chain"in n&&!n.chain),a=ns(t);return De(o,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=No(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function hu(){}var du=Uo(Oe),mu=Uo(Te),vu=Uo(_e);function gu(t){return xi(t)?$e($i(t)):function(t){return function(e){return Dr(e,t)}}(t)}var yu=Jo(),bu=Jo(!0);function wu(){return[]}function ku(){return!1}var xu,Cu=Vo((function(t,e){return t+e}),0),Du=Go("ceil"),Eu=Vo((function(t,e){return t/e}),1),Tu=Go("floor"),Mu=Vo((function(t,e){return t*e}),1),Au=Go("round"),Su=Vo((function(t,e){return t-e}),0);return Hn.after=function(t,n){if("function"!=typeof n)throw new Ot(e);return t=bs(t),function(){if(--t<1)return n.apply(this,arguments)}},Hn.ary=La,Hn.assign=Ds,Hn.assignIn=Es,Hn.assignInWith=Ts,Hn.assignWith=Ms,Hn.at=As,Hn.before=Ia,Hn.bind=_a,Hn.bindAll=ou,Hn.bindKey=Fa,Hn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Za(t)?t:[t]},Hn.chain=ga,Hn.chunk=function(e,n,r){n=(r?ki(e,n,r):n===t)?1:bn(bs(n),0);var o=null==e?0:e.length;if(!o||n<1)return[];for(var i=0,a=0,s=xt(Fe(o/n));i<o;)s[a++]=oo(e,i,i+=n);return s},Hn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},Hn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=xt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ne(Za(n)?No(n):[n],yr(e,1))},Hn.cond=function(t){var n=null==t?0:t.length,r=ci();return t=n?Oe(t,(function(t){if("function"!=typeof t[1])throw new Ot(e);return[r(t[0]),t[1]]})):[],Xr((function(e){for(var r=-1;++r<n;){var o=t[r];if(xe(o[0],this,e))return xe(o[1],this,e)}}))},Hn.conforms=function(t){return function(t){var e=Bs(t);return function(n){return cr(n,t,e)}}(lr(t,1))},Hn.constant=iu,Hn.countBy=wa,Hn.create=function(t,e){var n=$n(t);return null==e?n:ir(n,e)},Hn.curry=function e(n,r,o){var i=Yo(n,8,t,t,t,t,t,r=o?t:r);return i.placeholder=e.placeholder,i},Hn.curryRight=function e(n,r,i){var a=Yo(n,o,t,t,t,t,t,r=i?t:r);return a.placeholder=e.placeholder,a},Hn.debounce=Ba,Hn.defaults=Ss,Hn.defaultsDeep=Os,Hn.defer=Ra,Hn.delay=Pa,Hn.difference=Ui,Hn.differenceBy=Wi,Hn.differenceWith=Ji,Hn.drop=function(e,n,r){var o=null==e?0:e.length;return o?oo(e,(n=r||n===t?1:bs(n))<0?0:n,o):[]},Hn.dropRight=function(e,n,r){var o=null==e?0:e.length;return o?oo(e,0,(n=o-(n=r||n===t?1:bs(n)))<0?0:n):[]},Hn.dropRightWhile=function(t,e){return t&&t.length?mo(t,ci(e,3),!0,!0):[]},Hn.dropWhile=function(t,e){return t&&t.length?mo(t,ci(e,3),!0):[]},Hn.fill=function(e,n,r,o){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&ki(e,n,r)&&(r=0,o=i),function(e,n,r,o){var i=e.length;for((r=bs(r))<0&&(r=-r>i?0:i+r),(o=o===t||o>i?i:bs(o))<0&&(o+=i),o=r>o?0:ws(o);r<o;)e[r++]=n;return e}(e,n,r,o)):[]},Hn.filter=function(t,e){return(Za(t)?Me:gr)(t,ci(e,3))},Hn.flatMap=function(t,e){return yr(Aa(t,e),1)},Hn.flatMapDeep=function(t,e){return yr(Aa(t,e),l)},Hn.flatMapDepth=function(e,n,r){return r=r===t?1:bs(r),yr(Aa(e,n),r)},Hn.flatten=Gi,Hn.flattenDeep=function(t){return null!=t&&t.length?yr(t,l):[]},Hn.flattenDepth=function(e,n){return null!=e&&e.length?yr(e,n=n===t?1:bs(n)):[]},Hn.flip=function(t){return Yo(t,512)},Hn.flow=au,Hn.flowRight=su,Hn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},Hn.functions=function(t){return null==t?[]:Cr(t,Bs(t))},Hn.functionsIn=function(t){return null==t?[]:Cr(t,Rs(t))},Hn.groupBy=Ea,Hn.initial=function(t){return null!=t&&t.length?oo(t,0,-1):[]},Hn.intersection=Qi,Hn.intersectionBy=Yi,Hn.intersectionWith=ta,Hn.invert=Is,Hn.invertBy=_s,Hn.invokeMap=Ta,Hn.iteratee=lu,Hn.keyBy=Ma,Hn.keys=Bs,Hn.keysIn=Rs,Hn.map=Aa,Hn.mapKeys=function(t,e){var n={};return e=ci(e,3),kr(t,(function(t,r,o){ar(n,e(t,r,o),t)})),n},Hn.mapValues=function(t,e){var n={};return e=ci(e,3),kr(t,(function(t,r,o){ar(n,r,e(t,r,o))})),n},Hn.matches=function(t){return Hr(lr(t,1))},Hn.matchesProperty=function(t,e){return $r(t,lr(e,1))},Hn.memoize=za,Hn.merge=Ps,Hn.mergeWith=zs,Hn.method=cu,Hn.methodOf=pu,Hn.mixin=fu,Hn.negate=ja,Hn.nthArg=function(t){return t=bs(t),Xr((function(e){return Vr(e,t)}))},Hn.omit=js,Hn.omitBy=function(t,e){return $s(t,ja(ci(e)))},Hn.once=function(t){return Ia(2,t)},Hn.orderBy=function(e,n,r,o){return null==e?[]:(Za(n)||(n=null==n?[]:[n]),Za(r=o?t:r)||(r=null==r?[]:[r]),Ur(e,n,r))},Hn.over=du,Hn.overArgs=Ha,Hn.overEvery=mu,Hn.overSome=vu,Hn.partial=$a,Hn.partialRight=qa,Hn.partition=Sa,Hn.pick=Hs,Hn.pickBy=$s,Hn.property=gu,Hn.propertyOf=function(e){return function(n){return null==e?t:Dr(e,n)}},Hn.pull=na,Hn.pullAll=ra,Hn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Jr(t,e,ci(n,2)):t},Hn.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?Jr(e,n,t,r):e},Hn.pullAt=oa,Hn.range=yu,Hn.rangeRight=bu,Hn.rearg=Va,Hn.reject=function(t,e){return(Za(t)?Me:gr)(t,ja(ci(e,3)))},Hn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ci(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Kr(t,o),n},Hn.rest=function(n,r){if("function"!=typeof n)throw new Ot(e);return Xr(n,r=r===t?r:bs(r))},Hn.reverse=ia,Hn.sampleSize=function(e,n,r){return n=(r?ki(e,n,r):n===t)?1:bs(n),(Za(e)?Yn:Yr)(e,n)},Hn.set=function(t,e,n){return null==t?t:to(t,e,n)},Hn.setWith=function(e,n,r,o){return o="function"==typeof o?o:t,null==e?e:to(e,n,r,o)},Hn.shuffle=function(t){return(Za(t)?tr:ro)(t)},Hn.slice=function(e,n,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&ki(e,n,r)?(n=0,r=o):(n=null==n?0:bs(n),r=r===t?o:bs(r)),oo(e,n,r)):[]},Hn.sortBy=Oa,Hn.sortedUniq=function(t){return t&&t.length?uo(t):[]},Hn.sortedUniqBy=function(t,e){return t&&t.length?uo(t,ci(e,2)):[]},Hn.split=function(e,n,r){return r&&"number"!=typeof r&&ki(e,n,r)&&(n=r=t),(r=r===t?f:r>>>0)?(e=Cs(e))&&("string"==typeof n||null!=n&&!cs(n))&&!(n=co(n))&&rn(e)?Co(cn(e),0,r):e.split(n,r):[]},Hn.spread=function(t,n){if("function"!=typeof t)throw new Ot(e);return n=null==n?0:bn(bs(n),0),Xr((function(e){var r=e[n],o=Co(e,0,n);return r&&Ne(o,r),xe(t,this,o)}))},Hn.tail=function(t){var e=null==t?0:t.length;return e?oo(t,1,e):[]},Hn.take=function(e,n,r){return e&&e.length?oo(e,0,(n=r||n===t?1:bs(n))<0?0:n):[]},Hn.takeRight=function(e,n,r){var o=null==e?0:e.length;return o?oo(e,(n=o-(n=r||n===t?1:bs(n)))<0?0:n,o):[]},Hn.takeRightWhile=function(t,e){return t&&t.length?mo(t,ci(e,3),!1,!0):[]},Hn.takeWhile=function(t,e){return t&&t.length?mo(t,ci(e,3)):[]},Hn.tap=function(t,e){return e(t),t},Hn.throttle=function(t,n,r){var o=!0,i=!0;if("function"!=typeof t)throw new Ot(e);return is(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),Ba(t,n,{leading:o,maxWait:n,trailing:i})},Hn.thru=ya,Hn.toArray=gs,Hn.toPairs=qs,Hn.toPairsIn=Vs,Hn.toPath=function(t){return Za(t)?Oe(t,$i):hs(t)?[t]:No(Hi(Cs(t)))},Hn.toPlainObject=xs,Hn.transform=function(t,e,n){var r=Za(t),o=r||Ya(t)||ds(t);if(e=ci(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:is(t)&&ns(i)?$n(Jt(t)):{}}return(o?De:kr)(t,(function(t,r,o){return e(n,t,r,o)})),n},Hn.unary=function(t){return La(t,1)},Hn.union=aa,Hn.unionBy=sa,Hn.unionWith=ua,Hn.uniq=function(t){return t&&t.length?po(t):[]},Hn.uniqBy=function(t,e){return t&&t.length?po(t,ci(e,2)):[]},Hn.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?po(e,t,n):[]},Hn.unset=function(t,e){return null==t||fo(t,e)},Hn.unzip=la,Hn.unzipWith=ca,Hn.update=function(t,e,n){return null==t?t:ho(t,e,wo(n))},Hn.updateWith=function(e,n,r,o){return o="function"==typeof o?o:t,null==e?e:ho(e,n,wo(r),o)},Hn.values=Us,Hn.valuesIn=function(t){return null==t?[]:Ze(t,Rs(t))},Hn.without=pa,Hn.words=nu,Hn.wrap=function(t,e){return $a(wo(e),t)},Hn.xor=fa,Hn.xorBy=ha,Hn.xorWith=da,Hn.zip=ma,Hn.zipObject=function(t,e){return yo(t||[],e||[],nr)},Hn.zipObjectDeep=function(t,e){return yo(t||[],e||[],to)},Hn.zipWith=va,Hn.entries=qs,Hn.entriesIn=Vs,Hn.extend=Es,Hn.extendWith=Ts,fu(Hn,Hn),Hn.add=Cu,Hn.attempt=ru,Hn.camelCase=Ws,Hn.capitalize=Js,Hn.ceil=Du,Hn.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=ks(r))==r?r:0),n!==t&&(n=(n=ks(n))==n?n:0),ur(ks(e),n,r)},Hn.clone=function(t){return lr(t,4)},Hn.cloneDeep=function(t){return lr(t,5)},Hn.cloneDeepWith=function(e,n){return lr(e,5,n="function"==typeof n?n:t)},Hn.cloneWith=function(e,n){return lr(e,4,n="function"==typeof n?n:t)},Hn.conformsTo=function(t,e){return null==e||cr(t,e,Bs(e))},Hn.deburr=Ks,Hn.defaultTo=function(t,e){return null==t||t!=t?e:t},Hn.divide=Eu,Hn.endsWith=function(e,n,r){e=Cs(e),n=co(n);var o=e.length,i=r=r===t?o:ur(bs(r),0,o);return(r-=n.length)>=0&&e.slice(r,i)==n},Hn.eq=Ua,Hn.escape=function(t){return(t=Cs(t))&&K.test(t)?t.replace(W,en):t},Hn.escapeRegExp=function(t){return(t=Cs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Hn.every=function(e,n,r){var o=Za(e)?Te:mr;return r&&ki(e,n,r)&&(n=t),o(e,ci(n,3))},Hn.find=ka,Hn.findIndex=Ki,Hn.findKey=function(t,e){return Be(t,ci(e,3),kr)},Hn.findLast=xa,Hn.findLastIndex=Zi,Hn.findLastKey=function(t,e){return Be(t,ci(e,3),xr)},Hn.floor=Tu,Hn.forEach=Ca,Hn.forEachRight=Da,Hn.forIn=function(t,e){return null==t?t:br(t,ci(e,3),Rs)},Hn.forInRight=function(t,e){return null==t?t:wr(t,ci(e,3),Rs)},Hn.forOwn=function(t,e){return t&&kr(t,ci(e,3))},Hn.forOwnRight=function(t,e){return t&&xr(t,ci(e,3))},Hn.get=Ns,Hn.gt=Wa,Hn.gte=Ja,Hn.has=function(t,e){return null!=t&&gi(t,e,Ar)},Hn.hasIn=Ls,Hn.head=Xi,Hn.identity=uu,Hn.includes=function(t,e,n,r){t=Xa(t)?t:Us(t),n=n&&!r?bs(n):0;var o=t.length;return n<0&&(n=bn(o+n,0)),fs(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Pe(t,e,n)>-1},Hn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:bs(n);return o<0&&(o=bn(r+o,0)),Pe(t,e,o)},Hn.inRange=function(e,n,r){return n=ys(n),r===t?(r=n,n=0):r=ys(r),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(e=ks(e),n,r)},Hn.invoke=Fs,Hn.isArguments=Ka,Hn.isArray=Za,Hn.isArrayBuffer=Ga,Hn.isArrayLike=Xa,Hn.isArrayLikeObject=Qa,Hn.isBoolean=function(t){return!0===t||!1===t||as(t)&&Tr(t)==g},Hn.isBuffer=Ya,Hn.isDate=ts,Hn.isElement=function(t){return as(t)&&1===t.nodeType&&!ls(t)},Hn.isEmpty=function(t){if(null==t)return!0;if(Xa(t)&&(Za(t)||"string"==typeof t||"function"==typeof t.splice||Ya(t)||ds(t)||Ka(t)))return!t.length;var e=vi(t);if(e==x||e==M)return!t.size;if(Ei(t))return!Rr(t).length;for(var n in t)if(Bt.call(t,n))return!1;return!0},Hn.isEqual=function(t,e){return Ir(t,e)},Hn.isEqualWith=function(e,n,r){var o=(r="function"==typeof r?r:t)?r(e,n):t;return o===t?Ir(e,n,t,r):!!o},Hn.isError=es,Hn.isFinite=function(t){return"number"==typeof t&&vn(t)},Hn.isFunction=ns,Hn.isInteger=rs,Hn.isLength=os,Hn.isMap=ss,Hn.isMatch=function(t,e){return t===e||_r(t,e,fi(e))},Hn.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,_r(e,n,fi(n),r)},Hn.isNaN=function(t){return us(t)&&t!=+t},Hn.isNative=function(t){if(Di(t))throw new Dt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fr(t)},Hn.isNil=function(t){return null==t},Hn.isNull=function(t){return null===t},Hn.isNumber=us,Hn.isObject=is,Hn.isObjectLike=as,Hn.isPlainObject=ls,Hn.isRegExp=cs,Hn.isSafeInteger=function(t){return rs(t)&&t>=-9007199254740991&&t<=c},Hn.isSet=ps,Hn.isString=fs,Hn.isSymbol=hs,Hn.isTypedArray=ds,Hn.isUndefined=function(e){return e===t},Hn.isWeakMap=function(t){return as(t)&&vi(t)==O},Hn.isWeakSet=function(t){return as(t)&&"[object WeakSet]"==Tr(t)},Hn.join=function(t,e){return null==t?"":gn.call(t,e)},Hn.kebabCase=Zs,Hn.last=ea,Hn.lastIndexOf=function(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var i=o;return r!==t&&(i=(i=bs(r))<0?bn(o+i,0):wn(i,o-1)),n==n?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(e,n,i):Re(e,je,i,!0)},Hn.lowerCase=Gs,Hn.lowerFirst=Xs,Hn.lt=ms,Hn.lte=vs,Hn.max=function(e){return e&&e.length?vr(e,uu,Mr):t},Hn.maxBy=function(e,n){return e&&e.length?vr(e,ci(n,2),Mr):t},Hn.mean=function(t){return He(t,uu)},Hn.meanBy=function(t,e){return He(t,ci(e,2))},Hn.min=function(e){return e&&e.length?vr(e,uu,zr):t},Hn.minBy=function(e,n){return e&&e.length?vr(e,ci(n,2),zr):t},Hn.stubArray=wu,Hn.stubFalse=ku,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=Mu,Hn.nth=function(e,n){return e&&e.length?Vr(e,bs(n)):t},Hn.noConflict=function(){return ce._===this&&(ce._=Ht),this},Hn.noop=hu,Hn.now=Na,Hn.pad=function(t,e,n){t=Cs(t);var r=(e=bs(e))?ln(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Wo(qe(o),n)+t+Wo(Fe(o),n)},Hn.padEnd=function(t,e,n){t=Cs(t);var r=(e=bs(e))?ln(t):0;return e&&r<e?t+Wo(e-r,n):t},Hn.padStart=function(t,e,n){t=Cs(t);var r=(e=bs(e))?ln(t):0;return e&&r<e?Wo(e-r,n)+t:t},Hn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(Cs(t).replace(rt,""),e||0)},Hn.random=function(e,n,r){if(r&&"boolean"!=typeof r&&ki(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=ys(e),n===t?(n=e,e=0):n=ys(n)),e>n){var o=e;e=n,n=o}if(r||e%1||n%1){var i=Cn();return wn(e+i*(n-e+ae("1e-"+((i+"").length-1))),n)}return Zr(e,n)},Hn.reduce=function(t,e,n){var r=Za(t)?Le:Ve,o=arguments.length<3;return r(t,ci(e,4),n,o,hr)},Hn.reduceRight=function(t,e,n){var r=Za(t)?Ie:Ve,o=arguments.length<3;return r(t,ci(e,4),n,o,dr)},Hn.repeat=function(e,n,r){return n=(r?ki(e,n,r):n===t)?1:bs(n),Gr(Cs(e),n)},Hn.replace=function(){var t=arguments,e=Cs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Hn.result=function(e,n,r){var o=-1,i=(n=ko(n,e)).length;for(i||(i=1,e=t);++o<i;){var a=null==e?t:e[$i(n[o])];a===t&&(o=i,a=r),e=ns(a)?a.call(e):a}return e},Hn.round=Au,Hn.runInContext=m,Hn.sample=function(t){return(Za(t)?Qn:Qr)(t)},Hn.size=function(t){if(null==t)return 0;if(Xa(t))return fs(t)?ln(t):t.length;var e=vi(t);return e==x||e==M?t.size:Rr(t).length},Hn.snakeCase=Qs,Hn.some=function(e,n,r){var o=Za(e)?_e:io;return r&&ki(e,n,r)&&(n=t),o(e,ci(n,3))},Hn.sortedIndex=function(t,e){return ao(t,e)},Hn.sortedIndexBy=function(t,e,n){return so(t,e,ci(n,2))},Hn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ao(t,e);if(r<n&&Ua(t[r],e))return r}return-1},Hn.sortedLastIndex=function(t,e){return ao(t,e,!0)},Hn.sortedLastIndexBy=function(t,e,n){return so(t,e,ci(n,2),!0)},Hn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ao(t,e,!0)-1;if(Ua(t[n],e))return n}return-1},Hn.startCase=Ys,Hn.startsWith=function(t,e,n){return t=Cs(t),n=null==n?0:ur(bs(n),0,t.length),e=co(e),t.slice(n,n+e.length)==e},Hn.subtract=Su,Hn.sum=function(t){return t&&t.length?Ue(t,uu):0},Hn.sumBy=function(t,e){return t&&t.length?Ue(t,ci(e,2)):0},Hn.template=function(e,n,r){var o=Hn.templateSettings;r&&ki(e,n,r)&&(n=t),e=Cs(e),n=Ts({},n,o,ti);var i,a,s=Ts({},n.imports,o.imports,ti),u=Bs(s),l=Ze(s,u),c=0,p=n.interpolate||bt,f="__p += '",h=At((n.escape||bt).source+"|"+p.source+"|"+(p===X?pt:bt).source+"|"+(n.evaluate||bt).source+"|$","g"),d="//# sourceURL="+(Bt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ne+"]")+"\n";e.replace(h,(function(t,n,r,o,s,u){return r||(r=o),f+=e.slice(c,u).replace(wt,nn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var m=Bt.call(n,"variable")&&n.variable;if(m){if(lt.test(m))throw new Dt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace($,""):f).replace(q,"$1").replace(V,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=ru((function(){return Et(u,d+"return "+f).apply(t,l)}));if(v.source=f,es(v))throw v;return v},Hn.times=function(t,e){if((t=bs(t))<1||t>c)return[];var n=f,r=wn(t,f);e=ci(e),t-=f;for(var o=We(r,e);++n<t;)e(n);return o},Hn.toFinite=ys,Hn.toInteger=bs,Hn.toLength=ws,Hn.toLower=function(t){return Cs(t).toLowerCase()},Hn.toNumber=ks,Hn.toSafeInteger=function(t){return t?ur(bs(t),-9007199254740991,c):0===t?t:0},Hn.toString=Cs,Hn.toUpper=function(t){return Cs(t).toUpperCase()},Hn.trim=function(e,n,r){if((e=Cs(e))&&(r||n===t))return Je(e);if(!e||!(n=co(n)))return e;var o=cn(e),i=cn(n);return Co(o,Xe(o,i),Qe(o,i)+1).join("")},Hn.trimEnd=function(e,n,r){if((e=Cs(e))&&(r||n===t))return e.slice(0,pn(e)+1);if(!e||!(n=co(n)))return e;var o=cn(e);return Co(o,0,Qe(o,cn(n))+1).join("")},Hn.trimStart=function(e,n,r){if((e=Cs(e))&&(r||n===t))return e.replace(rt,"");if(!e||!(n=co(n)))return e;var o=cn(e);return Co(o,Xe(o,cn(n))).join("")},Hn.truncate=function(e,n){var r=30,o="...";if(is(n)){var i="separator"in n?n.separator:i;r="length"in n?bs(n.length):r,o="omission"in n?co(n.omission):o}var a=(e=Cs(e)).length;if(rn(e)){var s=cn(e);a=s.length}if(r>=a)return e;var u=r-ln(o);if(u<1)return o;var l=s?Co(s,0,u).join(""):e.slice(0,u);if(i===t)return l+o;if(s&&(u+=l.length-u),cs(i)){if(e.slice(u).search(i)){var c,p=l;for(i.global||(i=At(i.source,Cs(ft.exec(i))+"g")),i.lastIndex=0;c=i.exec(p);)var f=c.index;l=l.slice(0,f===t?u:f)}}else if(e.indexOf(co(i),u)!=u){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+o},Hn.unescape=function(t){return(t=Cs(t))&&J.test(t)?t.replace(U,fn):t},Hn.uniqueId=function(t){var e=++Rt;return Cs(t)+e},Hn.upperCase=tu,Hn.upperFirst=eu,Hn.each=Ca,Hn.eachRight=Da,Hn.first=Xi,fu(Hn,(xu={},kr(Hn,(function(t,e){Bt.call(Hn.prototype,e)||(xu[e]=t)})),xu),{chain:!1}),Hn.VERSION="4.17.21",De(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Hn[t].placeholder=Hn})),De(["drop","take"],(function(e,n){Un.prototype[e]=function(r){r=r===t?1:bn(bs(r),0);var o=this.__filtered__&&!n?new Un(this):this.clone();return o.__filtered__?o.__takeCount__=wn(r,o.__takeCount__):o.__views__.push({size:wn(r,f),type:e+(o.__dir__<0?"Right":"")}),o},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),De(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Un.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ci(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),De(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Un.prototype[t]=function(){return this[n](1).value()[0]}})),De(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Un.prototype[t]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(uu)},Un.prototype.find=function(t){return this.filter(t).head()},Un.prototype.findLast=function(t){return this.reverse().find(t)},Un.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Un(this):this.map((function(n){return Nr(n,t,e)}))})),Un.prototype.reject=function(t){return this.filter(ja(ci(t)))},Un.prototype.slice=function(e,n){e=bs(e);var r=this;return r.__filtered__&&(e>0||n<0)?new Un(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=bs(n))<0?r.dropRight(-n):r.take(n-e)),r)},Un.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Un.prototype.toArray=function(){return this.take(f)},kr(Un.prototype,(function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),i=Hn[o?"take"+("last"==n?"Right":""):n],a=o||/^find/.test(n);i&&(Hn.prototype[n]=function(){var n=this.__wrapped__,s=o?[1]:arguments,u=n instanceof Un,l=s[0],c=u||Za(n),p=function(t){var e=i.apply(Hn,Ne([t],s));return o&&f?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=a&&!f,m=u&&!h;if(!a&&c){n=m?n:new Un(this);var v=e.apply(n,s);return v.__actions__.push({func:ya,args:[p],thisArg:t}),new Vn(v,f)}return d&&m?e.apply(this,s):(v=this.thru(p),d?o?v.value()[0]:v.value():v)})})),De(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Hn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Za(o)?o:[],t)}return this[n]((function(n){return e.apply(Za(n)?n:[],t)}))}})),kr(Un.prototype,(function(t,e){var n=Hn[e];if(n){var r=n.name+"";Bt.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:e,func:n})}})),Ln[$o(t,2).name]=[{name:"wrapper",func:t}],Un.prototype.clone=function(){var t=new Un(this.__wrapped__);return t.__actions__=No(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=No(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=No(this.__views__),t},Un.prototype.reverse=function(){if(this.__filtered__){var t=new Un(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Un.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Za(t),r=e<0,o=n?t.length:0,i=function(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,p=c.length,f=0,h=wn(u,this.__takeCount__);if(!n||!r&&o==u&&h==u)return vo(t,this.__actions__);var d=[];t:for(;u--&&f<h;){for(var m=-1,v=t[l+=e];++m<p;){var g=c[m],y=g.iteratee,b=g.type,w=y(v);if(2==b)v=w;else if(!w){if(1==b)continue t;break t}}d[f++]=v}return d},Hn.prototype.at=ba,Hn.prototype.chain=function(){return ga(this)},Hn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===t&&(this.__values__=gs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Hn.prototype.plant=function(e){for(var n,r=this;r instanceof qn;){var o=Vi(r);o.__index__=0,o.__values__=t,n?i.__wrapped__=o:n=o;var i=o;r=r.__wrapped__}return i.__wrapped__=e,n},Hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var n=e;return this.__actions__.length&&(n=new Un(this)),(n=n.reverse()).__actions__.push({func:ya,args:[ia],thisArg:t}),new Vn(n,this.__chain__)}return this.thru(ia)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return vo(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,ue&&(Hn.prototype[ue]=function(){return this}),Hn}();fe?((fe.exports=hn)._=hn,pe._=hn):ce._=hn}.call(m);var Ev=Dv.exports,Tv={exports:{}},Mv=Tv.exports=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=n(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i={exports:{}};function a(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function s(t){i.exports.defaults=t}i.exports={defaults:a(),getDefaults:a,changeDefaults:s};var u=/[&<>"']/,l=/[&<>"']/g,c=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h=function(t){return f[t]};function d(t,e){if(e){if(u.test(t))return t.replace(l,h)}else if(c.test(t))return t.replace(p,h);return t}var m=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(t){return t.replace(m,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var g=/(^|[^\[])\^/g;function y(t,e){t=t.source||t,e=e||"";var n={replace:function(e,r){return r=(r=r.source||r).replace(g,"$1"),t=t.replace(e,r),n},getRegex:function(){return new RegExp(t,e)}};return n}var b=/[^\w:]/g,w=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k(t,e,n){if(t){var r;try{r=decodeURIComponent(v(n)).replace(b,"").toLowerCase()}catch(o){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!w.test(n)&&(n=T(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(o){return null}return n}var x={},C=/^[^:]+:\/*[^/]*$/,D=/^([^:]+:)[\s\S]*$/,E=/^([^:]+:\/*[^/]*)[\s\S]*$/;function T(t,e){x[" "+t]||(C.test(t)?x[" "+t]=t+"/":x[" "+t]=S(t,"/",!0));var n=-1===(t=x[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(D,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(E,"$1")+e:t+e}function M(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function A(t,e){var n=t.replace(/\|/g,(function(t,e,n){for(var r=!1,o=e;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function S(t,e,n){var r=t.length;if(0===r)return"";for(var o=0;o<r;){var i=t.charAt(r-o-1);if(i!==e||n){if(i===e||!n)break;o++}else o++}return t.substr(0,r-o)}function O(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=t.length,r=0,o=0;o<n;o++)if("\\"===t[o])o++;else if(t[o]===e[0])r++;else if(t[o]===e[1]&&--r<0)return o;return-1}function N(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function L(t,e){if(e<1)return"";for(var n="";e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}var I={escape:d,unescape:v,edit:y,cleanUrl:k,resolveUrl:T,noopTest:{exec:function(){}},merge:M,splitCells:A,rtrim:S,findClosingBracket:O,checkSanitizeDeprecation:N,repeatString:L},_=i.exports.defaults,F=I.rtrim,B=I.splitCells,R=I.escape,P=I.findClosingBracket;function z(t,e,n){var r=e.href,o=e.title?R(e.title):null,i=t[1].replace(/\\([\[\]])/g,"$1");return"!"!==t[0].charAt(0)?{type:"link",raw:n,href:r,title:o,text:i}:{type:"image",raw:n,href:r,title:o,text:R(i)}}function j(t,e){var n=t.match(/^(\s+)(?:```)/);if(null===n)return e;var r=n[1];return e.split("\n").map((function(t){var e=t.match(/^\s+/);return null===e?t:e[0].length>=r.length?t.slice(r.length):t})).join("\n")}var H=function(){function t(t){this.options=t||_}var e=t.prototype;return e.space=function(t){var e=this.rules.block.newline.exec(t);if(e)return e[0].length>1?{type:"space",raw:e[0]}:{raw:"\n"}},e.code=function(t){var e=this.rules.block.code.exec(t);if(e){var n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:F(n,"\n")}}},e.fences=function(t){var e=this.rules.block.fences.exec(t);if(e){var n=e[0],r=j(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:r}}},e.heading=function(t){var e=this.rules.block.heading.exec(t);if(e){var n=e[2].trim();if(/#$/.test(n)){var r=F(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n}}},e.nptable=function(t){var e=this.rules.block.nptable.exec(t);if(e){var n={type:"table",header:B(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[],raw:e[0]};if(n.header.length===n.align.length){var r,o=n.align.length;for(r=0;r<o;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(o=n.cells.length,r=0;r<o;r++)n.cells[r]=B(n.cells[r],n.header.length);return n}}},e.hr=function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}},e.blockquote=function(t){var e=this.rules.block.blockquote.exec(t);if(e){var n=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],text:n}}},e.list=function(t){var e=this.rules.block.list.exec(t);if(e){var n,r,o,i,a,s,u,l,c,p=e[0],f=e[2],h=f.length>1,d={type:"list",raw:p,ordered:h,start:h?+f.slice(0,-1):"",loose:!1,items:[]},m=e[0].match(this.rules.block.item),v=!1,g=m.length;o=this.rules.block.listItemStart.exec(m[0]);for(var y=0;y<g;y++){if(p=n=m[y],this.options.pedantic||(c=n.match(new RegExp("\\n\\s*\\n {0,"+(o[0].length-1)+"}\\S")))&&(a=n.length-c.index+m.slice(y+1).join("\n").length,d.raw=d.raw.substring(0,d.raw.length-a),p=n=n.substring(0,c.index),g=y+1),y!==g-1){if(i=this.rules.block.listItemStart.exec(m[y+1]),this.options.pedantic?i[1].length>o[1].length:i[1].length>=o[0].length||i[1].length>3){m.splice(y,2,m[y]+(!this.options.pedantic&&i[1].length<o[0].length&&!m[y].match(/\n$/)?"":"\n")+m[y+1]),y--,g--;continue}(!this.options.pedantic||this.options.smartLists?i[2][i[2].length-1]!==f[f.length-1]:h===(1===i[2].length))&&(a=m.slice(y+1).join("\n").length,d.raw=d.raw.substring(0,d.raw.length-a),y=g-1),o=i}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),n=F(n,"\n"),y!==g-1&&(p+="\n"),s=v||/\n\n(?!\s*$)/.test(p),y!==g-1&&(v="\n\n"===p.slice(-2),s||(s=v)),s&&(d.loose=!0),this.options.gfm&&(l=void 0,(u=/^\[[ xX]\] /.test(n))&&(l=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),d.items.push({type:"list_item",raw:p,task:u,checked:l,loose:s,text:n})}return d}},e.html=function(t){var e=this.rules.block.html.exec(t);if(e)return{type:this.options.sanitize?"paragraph":"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):R(e[0]):e[0]}},e.def=function(t){var e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}},e.table=function(t){var e=this.rules.block.table.exec(t);if(e){var n={type:"table",header:B(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];var r,o=n.align.length;for(r=0;r<o;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(o=n.cells.length,r=0;r<o;r++)n.cells[r]=B(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},e.lheading=function(t){var e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1]}},e.paragraph=function(t){var e=this.rules.block.paragraph.exec(t);if(e)return{type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]}},e.text=function(t){var e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0]}},e.escape=function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:R(e[1])}},e.tag=function(t,e,n){var r=this.rules.inline.tag.exec(t);if(r)return!e&&/^<a /i.test(r[0])?e=!0:e&&/^<\/a>/i.test(r[0])&&(e=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:e,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):R(r[0]):r[0]}},e.link=function(t){var e=this.rules.inline.link.exec(t);if(e){var n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=F(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var o=P(e[2],"()");if(o>-1){var i=(0===e[0].indexOf("!")?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,i).trim(),e[3]=""}}var a=e[2],s="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);u&&(a=u[1],s=u[3])}else s=e[3]?e[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),z(e,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},e[0])}},e.reflink=function(t,e){var n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=e[r.toLowerCase()])||!r.href){var o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return z(n,r,n[0])}},e.emStrong=function(t,e,n){void 0===n&&(n="");var r=this.rules.inline.emStrong.lDelim.exec(t);if(r&&(!r[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var o=r[1]||r[2]||"";if(!o||o&&(""===n||this.rules.inline.punctuation.exec(n))){var i,a,s=r[0].length-1,u=s,l=0,c="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+s);null!=(r=c.exec(e));)if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6])if(a=i.length,r[3]||r[4])u+=a;else if(!((r[5]||r[6])&&s%3)||(s+a)%3){if(!((u-=a)>0))return a=Math.min(a,a+u+l),Math.min(s,a)%2?{type:"em",raw:t.slice(0,s+r.index+a+1),text:t.slice(1,s+r.index+a)}:{type:"strong",raw:t.slice(0,s+r.index+a+1),text:t.slice(2,s+r.index+a-1)}}else l+=a}}},e.codespan=function(t){var e=this.rules.inline.code.exec(t);if(e){var n=e[2].replace(/\n/g," "),r=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return r&&o&&(n=n.substring(1,n.length-1)),n=R(n,!0),{type:"codespan",raw:e[0],text:n}}},e.br=function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}},e.del=function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2]}},e.autolink=function(t,e){var n,r,o=this.rules.inline.autolink.exec(t);if(o)return r="@"===o[2]?"mailto:"+(n=R(this.options.mangle?e(o[1]):o[1])):n=R(o[1]),{type:"link",raw:o[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},e.url=function(t,e){var n;if(n=this.rules.inline.url.exec(t)){var r,o;if("@"===n[2])o="mailto:"+(r=R(this.options.mangle?e(n[0]):n[0]));else{var i;do{i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(i!==n[0]);r=R(n[0]),o="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}},e.inlineText=function(t,e,n){var r,o=this.rules.inline.text.exec(t);if(o)return r=e?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):R(o[0]):o[0]:R(this.options.smartypants?n(o[0]):o[0]),{type:"text",raw:o[0],text:r}},t}(),$=I.noopTest,q=I.edit,V=I.merge,U={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:$,table:$,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};U.def=q(U.def).replace("label",U._label).replace("title",U._title).getRegex(),U.bullet=/(?:[*+-]|\d{1,9}[.)])/,U.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,U.item=q(U.item,"gm").replace(/bull/g,U.bullet).getRegex(),U.listItemStart=q(/^( *)(bull) */).replace("bull",U.bullet).getRegex(),U.list=q(U.list).replace(/bull/g,U.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+U.def.source+")").getRegex(),U._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,U.html=q(U.html,"i").replace("comment",U._comment).replace("tag",U._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),U.paragraph=q(U._paragraph).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.blockquote=q(U.blockquote).replace("paragraph",U.paragraph).getRegex(),U.normal=V({},U),U.gfm=V({},U.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),U.gfm.nptable=q(U.gfm.nptable).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.gfm.table=q(U.gfm.table).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.pedantic=V({},U.normal,{html:q("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",U._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$,paragraph:q(U.normal._paragraph).replace("hr",U.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",U.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var W={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:$,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:$,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};W.punctuation=q(W.punctuation).replace(/punctuation/g,W._punctuation).getRegex(),W.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,W.escapedEmSt=/\\\*|\\_/g,W._comment=q(U._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),W.emStrong.lDelim=q(W.emStrong.lDelim).replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimAst=q(W.emStrong.rDelimAst,"g").replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimUnd=q(W.emStrong.rDelimUnd,"g").replace(/punct/g,W._punctuation).getRegex(),W._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,W._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,W._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,W.autolink=q(W.autolink).replace("scheme",W._scheme).replace("email",W._email).getRegex(),W._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,W.tag=q(W.tag).replace("comment",W._comment).replace("attribute",W._attribute).getRegex(),W._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,W._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,W._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,W.link=q(W.link).replace("label",W._label).replace("href",W._href).replace("title",W._title).getRegex(),W.reflink=q(W.reflink).replace("label",W._label).getRegex(),W.reflinkSearch=q(W.reflinkSearch,"g").replace("reflink",W.reflink).replace("nolink",W.nolink).getRegex(),W.normal=V({},W),W.pedantic=V({},W.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:q(/^!?\[(label)\]\((.*?)\)/).replace("label",W._label).getRegex(),reflink:q(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",W._label).getRegex()}),W.gfm=V({},W.normal,{escape:q(W.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),W.gfm.url=q(W.gfm.url,"i").replace("email",W.gfm._extended_email).getRegex(),W.breaks=V({},W.gfm,{br:q(W.br).replace("{2,}","*").getRegex(),text:q(W.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var J={block:U,inline:W},K=H,Z=i.exports.defaults,G=J.block,X=J.inline,Q=I.repeatString;function Y(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function tt(t){var e,n,r="",o=t.length;for(e=0;e<o;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var et=function(){function t(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Z,this.options.tokenizer=this.options.tokenizer||new K,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var e={block:G.normal,inline:X.normal};this.options.pedantic?(e.block=G.pedantic,e.inline=X.pedantic):this.options.gfm&&(e.block=G.gfm,this.options.breaks?e.inline=X.breaks:e.inline=X.gfm),this.tokenizer.rules=e}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var n=t.prototype;return n.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(t,this.tokens,!0),this.inline(this.tokens),this.tokens},n.blockTokens=function(t,e,n){var r,o,i,a;for(void 0===e&&(e=[]),void 0===n&&(n=!0),this.options.pedantic&&(t=t.replace(/^ +$/gm,""));t;)if(r=this.tokenizer.space(t))t=t.substring(r.raw.length),r.type&&e.push(r);else if(r=this.tokenizer.code(t))t=t.substring(r.raw.length),(a=e[e.length-1])&&"paragraph"===a.type?(a.raw+="\n"+r.raw,a.text+="\n"+r.text):e.push(r);else if(r=this.tokenizer.fences(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.heading(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.nptable(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.hr(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.blockquote(t))t=t.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),e.push(r);else if(r=this.tokenizer.list(t)){for(t=t.substring(r.raw.length),i=r.items.length,o=0;o<i;o++)r.items[o].tokens=this.blockTokens(r.items[o].text,[],!1);e.push(r)}else if(r=this.tokenizer.html(t))t=t.substring(r.raw.length),e.push(r);else if(n&&(r=this.tokenizer.def(t)))t=t.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.lheading(t))t=t.substring(r.raw.length),e.push(r);else if(n&&(r=this.tokenizer.paragraph(t)))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.text(t))t=t.substring(r.raw.length),(a=e[e.length-1])&&"text"===a.type?(a.raw+="\n"+r.raw,a.text+="\n"+r.text):e.push(r);else if(t){var s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return e},n.inline=function(t){var e,n,r,o,i,a,s=t.length;for(e=0;e<s;e++)switch((a=t[e]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},o=a.header.length,n=0;n<o;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(o=a.cells.length,n=0;n<o;n++)for(i=a.cells[n],a.tokens.cells[n]=[],r=0;r<i.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(i[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(o=a.items.length,n=0;n<o;n++)this.inline(a.items[n].tokens)}return t},n.inlineTokens=function(t,e,n,r){var o,i;void 0===e&&(e=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var a,s,u,l=t;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(l));)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,a.index)+"["+Q("a",a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,a.index)+"["+Q("a",a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,a.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(s||(u=""),s=!1,o=this.tokenizer.escape(t))t=t.substring(o.raw.length),e.push(o);else if(o=this.tokenizer.tag(t,n,r)){t=t.substring(o.raw.length),n=o.inLink,r=o.inRawBlock;var p=e[e.length-1];p&&"text"===o.type&&"text"===p.type?(p.raw+=o.raw,p.text+=o.text):e.push(o)}else if(o=this.tokenizer.link(t))t=t.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),e.push(o);else if(o=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(o.raw.length);var f=e[e.length-1];"link"===o.type?(o.tokens=this.inlineTokens(o.text,[],!0,r),e.push(o)):f&&"text"===o.type&&"text"===f.type?(f.raw+=o.raw,f.text+=o.text):e.push(o)}else if(o=this.tokenizer.emStrong(t,l,u))t=t.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),e.push(o);else if(o=this.tokenizer.codespan(t))t=t.substring(o.raw.length),e.push(o);else if(o=this.tokenizer.br(t))t=t.substring(o.raw.length),e.push(o);else if(o=this.tokenizer.del(t))t=t.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),e.push(o);else if(o=this.tokenizer.autolink(t,tt))t=t.substring(o.raw.length),e.push(o);else if(n||!(o=this.tokenizer.url(t,tt))){if(o=this.tokenizer.inlineText(t,r,Y))t=t.substring(o.raw.length),"_"!==o.raw.slice(-1)&&(u=o.raw.slice(-1)),s=!0,(i=e[e.length-1])&&"text"===i.type?(i.raw+=o.raw,i.text+=o.text):e.push(o);else if(t){var h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}else t=t.substring(o.raw.length),e.push(o);return e},e(t,null,[{key:"rules",get:function(){return{block:G,inline:X}}}]),t}(),nt=i.exports.defaults,rt=I.cleanUrl,ot=I.escape,it=function(){function t(t){this.options=t||nt}var e=t.prototype;return e.code=function(t,e,n){var r=(e||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(t,r);null!=o&&o!==t&&(n=!0,t=o)}return t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+ot(r,!0)+'">'+(n?t:ot(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:ot(t,!0))+"</code></pre>\n"},e.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},e.html=function(t){return t},e.heading=function(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},e.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.list=function(t,e,n){var r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"},e.listitem=function(t){return"<li>"+t+"</li>\n"},e.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.paragraph=function(t){return"<p>"+t+"</p>\n"},e.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},e.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},e.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},e.strong=function(t){return"<strong>"+t+"</strong>"},e.em=function(t){return"<em>"+t+"</em>"},e.codespan=function(t){return"<code>"+t+"</code>"},e.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.del=function(t){return"<del>"+t+"</del>"},e.link=function(t,e,n){if(null===(t=rt(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<a href="'+ot(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},e.image=function(t,e,n){if(null===(t=rt(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},e.text=function(t){return t},t}(),at=function(){function t(){}var e=t.prototype;return e.strong=function(t){return t},e.em=function(t){return t},e.codespan=function(t){return t},e.del=function(t){return t},e.html=function(t){return t},e.text=function(t){return t},e.link=function(t,e,n){return""+n},e.image=function(t,e,n){return""+n},e.br=function(){return""},t}(),st=function(){function t(){this.seen={}}var e=t.prototype;return e.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function(t,e){var n=t,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[t];do{n=t+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=r,this.seen[n]=0),n},e.slug=function(t,e){void 0===e&&(e={});var n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)},t}(),ut=it,lt=at,ct=st,pt=i.exports.defaults,ft=I.unescape,ht=et,dt=function(){function t(t){this.options=t||pt,this.options.renderer=this.options.renderer||new ut,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new lt,this.slugger=new ct}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var e=t.prototype;return e.parse=function(t,e){void 0===e&&(e=!0);var n,r,o,i,a,s,u,l,c,p,f,h,d,m,v,g,y,b,w="",k=t.length;for(n=0;n<k;n++)switch((p=t[n]).type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(p.tokens),p.depth,ft(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(l="",u="",i=p.header.length,r=0;r<i;r++)u+=this.renderer.tablecell(this.parseInline(p.tokens.header[r]),{header:!0,align:p.align[r]});for(l+=this.renderer.tablerow(u),c="",i=p.cells.length,r=0;r<i;r++){for(u="",a=(s=p.tokens.cells[r]).length,o=0;o<a;o++)u+=this.renderer.tablecell(this.parseInline(s[o]),{header:!1,align:p.align[o]});c+=this.renderer.tablerow(u)}w+=this.renderer.table(l,c);continue;case"blockquote":c=this.parse(p.tokens),w+=this.renderer.blockquote(c);continue;case"list":for(f=p.ordered,h=p.start,d=p.loose,i=p.items.length,c="",r=0;r<i;r++)g=(v=p.items[r]).checked,y=v.task,m="",v.task&&(b=this.renderer.checkbox(g),d?v.tokens.length>0&&"text"===v.tokens[0].type?(v.tokens[0].text=b+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=b+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(v.tokens,d),c+=this.renderer.listitem(m,y,g);w+=this.renderer.list(c,f,h);continue;case"html":w+=this.renderer.html(p.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":for(c=p.tokens?this.parseInline(p.tokens):p.text;n+1<k&&"text"===t[n+1].type;)c+="\n"+((p=t[++n]).tokens?this.parseInline(p.tokens):p.text);w+=e?this.renderer.paragraph(c):c;continue;default:var x='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void console.error(x);throw new Error(x)}return w},e.parseInline=function(t,e){e=e||this.renderer;var n,r,o="",i=t.length;for(n=0;n<i;n++)switch((r=t[n]).type){case"escape":o+=e.text(r.text);break;case"html":o+=e.html(r.text);break;case"link":o+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break;case"image":o+=e.image(r.href,r.title,r.text);break;case"strong":o+=e.strong(this.parseInline(r.tokens,e));break;case"em":o+=e.em(this.parseInline(r.tokens,e));break;case"codespan":o+=e.codespan(r.text);break;case"br":o+=e.br();break;case"del":o+=e.del(this.parseInline(r.tokens,e));break;case"text":o+=e.text(r.text);break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return o},t}(),mt=H,vt=it,gt=at,yt=st,bt=I.merge,wt=I.checkSanitizeDeprecation,kt=I.escape,xt=i.exports.getDefaults,Ct=i.exports.changeDefaults,Dt=i.exports.defaults;function Et(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),e=bt({},Et.defaults,e||{}),wt(e),n){var r,o=e.highlight;try{r=ht.lex(t,e)}catch(u){return n(u)}var i=function(t){var i;if(!t)try{e.walkTokens&&Et.walkTokens(r,e.walkTokens),i=dt.parse(r,e)}catch(u){t=u}return e.highlight=o,t?n(t):n(null,i)};if(!o||o.length<3)return i();if(delete e.highlight,!r.length)return i();var a=0;return Et.walkTokens(r,(function(t){"code"===t.type&&(a++,setTimeout((function(){o(t.text,t.lang,(function(e,n){if(e)return i(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),0==--a&&i()}))}),0))})),void(0===a&&i())}try{var s=ht.lex(t,e);return e.walkTokens&&Et.walkTokens(s,e.walkTokens),dt.parse(s,e)}catch(u){if(u.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+kt(u.message+"",!0)+"</pre>";throw u}}return Et.options=Et.setOptions=function(t){return bt(Et.defaults,t),Ct(Et.defaults),Et},Et.getDefaults=xt,Et.defaults=Dt,Et.use=function(t){var e=bt({},t);if(t.renderer&&function(){var n=Et.defaults.renderer||new vt,r=function(e){var r=n[e];n[e]=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=t.renderer[e].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}};for(var o in t.renderer)r(o);e.renderer=n}(),t.tokenizer&&function(){var n=Et.defaults.tokenizer||new mt,r=function(e){var r=n[e];n[e]=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=t.tokenizer[e].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}};for(var o in t.tokenizer)r(o);e.tokenizer=n}(),t.walkTokens){var n=Et.defaults.walkTokens;e.walkTokens=function(e){t.walkTokens(e),n&&n(e)}}Et.setOptions(e)},Et.walkTokens=function(t,e){for(var n,r=o(t);!(n=r()).done;){var i=n.value;switch(e(i),i.type){case"table":for(var a,s=o(i.tokens.header);!(a=s()).done;){var u=a.value;Et.walkTokens(u,e)}for(var l,c=o(i.tokens.cells);!(l=c()).done;)for(var p,f=o(l.value);!(p=f()).done;){var h=p.value;Et.walkTokens(h,e)}break;case"list":Et.walkTokens(i.items,e);break;default:i.tokens&&Et.walkTokens(i.tokens,e)}}},Et.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=bt({},Et.defaults,e||{}),wt(e);try{var n=ht.lexInline(t,e);return e.walkTokens&&Et.walkTokens(n,e.walkTokens),dt.parseInline(n,e)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+kt(r.message+"",!0)+"</pre>";throw r}},Et.Parser=dt,Et.parser=dt.parse,Et.Renderer=vt,Et.TextRenderer=gt,Et.Lexer=ht,Et.lexer=ht.lex,Et.Tokenizer=mt,Et.Slugger=yt,Et.parse=Et,Et}(),Av=i({setup(){const t=a("# hello"),e=v((()=>Mv(t.value,{sanitize:!0,breaks:!0,gfm:!0,pedantic:!1,smartLists:!0,smartypants:!1}))),n=Ev.debounce((e=>{t.value=e.target.value}),300);return{editorValue:t,compiledMarkdown:e,update:n}}});const Sv=d();l("data-v-50a83686");const Ov={class:"wrapper"},Nv={class:"markdown"};c();const Lv=Sv(((t,e,n,r,o,i)=>(p(),f("div",Ov,[h("textarea",{value:t.editorValue,class:"editor",onInput:e[1]||(e[1]=(...e)=>t.update&&t.update(...e))},null,40,["value"]),h("div",Nv,g(t.compiledMarkdown),1)]))));Av.render=Lv,Av.__scopeId="data-v-50a83686";var Iv=i({components:{simpleMD:Av,tuiEditor:yv},setup(){const t=a(""),i=y({content:"# wesome Editor! Toast UI"});return((t,i)=>{for(var a in i||(i={}))n.call(i,a)&&o(t,a,i[a]);if(e)for(var a of e(i))r.call(i,a)&&o(t,a,i[a]);return t})({value:t},b(i))}});const _v=d();l("data-v-7b14e038");const Fv={class:"editorWrapper"},Bv={class:"info"},Rv=k("markdown编辑器"),Pv=h("span",{style:{"text-align":"left"}},"markdown编辑器常用于技术型文本编辑场景。",-1),zv={class:"grid-content bg-purple-dark"},jv={style:{"text-align":"left"}},Hv=k("Toast UI Editor markdown编辑器 "),$v=k("Toast UI Editor "),qv={class:"grid-content bg-purple-dark"},Vv={style:{"text-align":"left"}},Uv=h("span",null,"超简单的markdown编辑器",-1);c();const Wv=_v(((t,e,n,r,o,i)=>{const a=w("el-divider"),s=w("el-link"),u=w("tuiEditor"),l=w("el-card"),c=w("el-col"),d=w("el-row"),m=w("simpleMD");return p(),f("div",Fv,[h("div",Bv,[h(a,{"content-position":"left"},{default:_v((()=>[Rv])),_:1}),Pv]),h("div",null,[h(d,null,{default:_v((()=>[h(c,{offset:1,span:22},{default:_v((()=>[h("div",zv,[h(l,{class:"box-card"},{default:_v((()=>[h("div",jv,[h("span",null,[Hv,h(s,{type:"primary",href:"https://nhn.github.io/tui.editor/latest/tutorial-example01-editor-basic"},{default:_v((()=>[$v])),_:1})]),h(a)]),h(u,{"model-value":t.content},null,8,["model-value"])])),_:1})])])),_:1})])),_:1}),h(d,null,{default:_v((()=>[h(c,{offset:1,span:22},{default:_v((()=>[h("div",qv,[h(l,{class:"box-card"},{default:_v((()=>[h("div",Vv,[Uv,h(a)]),h(m)])),_:1})])])),_:1})])),_:1})])])}));Iv.render=Wv,Iv.__scopeId="data-v-7b14e038";export{Iv as default};
